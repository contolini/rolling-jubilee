/*! Rolling Jubilee - v0.1.0 - 2012-12-14
* http://rollingjubilee.org/
* Copyright (c) 2012 Strike Debt; Licensed MIT */
(function(e,t){function n(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,e._a=null,this._lang=n||!1}function r(e){var t=this._data={},n=e.years||e.y||0,r=e.months||e.M||0,s=e.weeks||e.w||0,o=e.days||e.d||0,u=e.hours||e.h||0,a=e.minutes||e.m||0,f=e.seconds||e.s||0,l=e.milliseconds||e.ms||0;this._milliseconds=l+f*1e3+a*6e4+u*36e5,this._days=o+s*7,this._months=r+n*12,t.milliseconds=l%1e3,f+=i(l/1e3),t.seconds=f%60,a+=i(f/60),t.minutes=a%60,u+=i(a/60),t.hours=u%24,o+=i(u/24),o+=s*7,t.days=o%30,r+=i(o/30),t.months=r%12,n+=i(r/12),t.years=n,this._lang=!1}function i(e){return e<0?Math.ceil(e):Math.floor(e)}function s(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function o(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function u(e){return Object.prototype.toString.call(e)==="[object Array]"}function a(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function f(t,n){var r,i;for(r=1;r<7;r++)t[r]=t[r]==null?r===2?1:0:t[r];return t[7]=n,i=new e(0),n?(i.setUTCFullYear(t[0],t[1],t[2]),i.setUTCHours(t[3],t[4],t[5],t[6])):(i.setFullYear(t[0],t[1],t[2]),i.setHours(t[3],t[4],t[5],t[6])),i._a=t,i}function l(e,t){var n,r,i=[];!t&&D&&(t=require("./lang/"+e));for(n=0;n<P.length;n++)t[P[n]]=t[P[n]]||M.en[P[n]];for(n=0;n<12;n++)r=k([2e3,n]),i[n]=new RegExp("^"+(t.months[n]||t.months(r,""))+"|^"+(t.monthsShort[n]||t.monthsShort(r,"")).replace(".",""),"i");return t.monthsParse=t.monthsParse||i,M[e]=t,t}function c(e){var t=typeof e=="string"&&e||e&&e._lang||null;return t?M[t]||l(t):k}function h(e){return et[e]?"'+("+et[e]+")+'":e.replace(F,"").replace(/\\?'/g,"\\'")}function p(e){return c().longDateFormat[e]||e}function d(e){var t="var a,b;return '"+e.replace(B,h)+"';",n=Function;return new n("t","v","o","p","m",t)}function v(e){return Z[e]||(Z[e]=d(e)),Z[e]}function m(e,t){function n(n,i){return r[n].call?r[n](e,t):r[n][i]}var r=c(e);while(j.test(t))t=t.replace(j,p);return Z[t]||(Z[t]=d(t)),Z[t](e,n,r.ordinal,s,r.meridiem)}function g(e){switch(e){case"DDDD":return U;case"YYYY":return z;case"S":case"SS":case"SSS":case"DDD":return R;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return W;case"Z":case"ZZ":return X;case"T":return V;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return q;default:return new RegExp(e.replace("\\",""))}}function y(e,t,n,r){var i;switch(e){case"M":case"MM":n[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++)if(c().monthsParse[i].test(t)){n[1]=i;break}break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(n[2]=~~t);break;case"YY":t=~~t,n[0]=t+(t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":r.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":r.isUTC=!0,i=(t+"").match(Q),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&i[0]==="+"&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}}function b(e,t){var n=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},i=t.match(B),s,o;for(s=0;s<i.length;s++)o=(g(i[s]).exec(e)||[])[0],e=e.replace(g(i[s]),""),y(i[s],o,n,r);return r.isPm&&n[3]<12&&(n[3]+=12),r.isPm===!1&&n[3]===12&&(n[3]=0),n[3]+=r.tzh,n[4]+=r.tzm,f(n,r.isUTC)}function w(e,t){var r,i=e.match(I)||[],s,o=99,u,f,l;for(u=0;u<t.length;u++)f=b(e,t[u]),s=m(new n(f),t[u]).match(I)||[],l=a(i,s),l<o&&(o=l,r=f);return r}function E(t){var n="YYYY-MM-DDT",r;if($.exec(t)){for(r=0;r<4;r++)if(K[r][1].exec(t)){n+=K[r][0];break}return X.exec(t)?b(t,n+" Z"):b(t,n)}return new e(t)}function S(e,t,n,r,i){var s=i.relativeTime[e];return typeof s=="function"?s(t||1,!!n,e,r):s.replace(/%d/i,t||1)}function x(e,t,n){var r=A(Math.abs(e)/1e3),i=A(r/60),s=A(i/60),o=A(s/24),u=A(o/365),a=r<45&&["s",r]||i===1&&["m"]||i<45&&["mm",i]||s===1&&["h"]||s<22&&["hh",s]||o===1&&["d"]||o<=25&&["dd",o]||o<=45&&["M"]||o<345&&["MM",A(o/30)]||u===1&&["y"]||["yy",u];return a[2]=t,a[3]=e>0,a[4]=n,S.apply({},a)}function T(e,t){k.fn[e]=function(e){var n=this._isUTC?"UTC":"";return e!=null?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function N(e){k.duration.fn[e]=function(){return this._data[e]}}function C(e,t){k.duration.fn["as"+e]=function(){return+this/t}}var k,L="1.7.0",A=Math.round,O,M={},_="en",D=typeof module!="undefined"&&module.exports,P="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),H=/^\/?Date\((\-?\d+)/i,B=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?)/g,j=/(LT|LL?L?L?)/g,F=/(^\[)|(\\)|\]$/g,I=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,q=/\d\d?/,R=/\d{1,3}/,U=/\d{3}/,z=/\d{1,4}/,W=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,X=/Z|[\+\-]\d\d:?\d\d/i,V=/T/i,$=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,J="YYYY-MM-DDTHH:mm:ssZ",K=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],Q=/([\+\-]|\d\d)/gi,G="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Y={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Z={},et={M:"(a=t.month()+1)",MMM:'v("monthsShort",t.month())',MMMM:'v("months",t.month())',D:"(a=t.date())",DDD:"(a=new Date(t.year(),t.month(),t.date()),b=new Date(t.year(),0,1),a=~~(((a-b)/864e5)+1.5))",d:"(a=t.day())",dd:'v("weekdaysMin",t.day())',ddd:'v("weekdaysShort",t.day())',dddd:'v("weekdays",t.day())',w:"(a=new Date(t.year(),t.month(),t.date()-t.day()+5),b=new Date(a.getFullYear(),0,4),a=~~((a-b)/864e5/7+1.5))",YY:"p(t.year()%100,2)",YYYY:"p(t.year(),4)",a:"m(t.hours(),t.minutes(),!0)",A:"m(t.hours(),t.minutes(),!1)",H:"t.hours()",h:"t.hours()%12||12",m:"t.minutes()",s:"t.seconds()",S:"~~(t.milliseconds()/100)",SS:"p(~~(t.milliseconds()/10),2)",SSS:"p(t.milliseconds(),3)",Z:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(a/60),2)+":"+p(~~a%60,2)',ZZ:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(10*a/6),4)'},tt="DDD w M D d".split(" "),nt="M D H h m s w".split(" ");while(tt.length)O=tt.pop(),et[O+"o"]=et[O]+"+o(a)";while(nt.length)O=nt.pop(),et[O+O]="p("+et[O]+",2)";et.DDDD="p("+et.DDD+",3)",k=function(r,i){if(r===null||r==="")return null;var s,o;return k.isMoment(r)?new n(new e(+r._d),r._isUTC,r._lang):(i?u(i)?s=w(r,i):s=b(r,i):(o=H.exec(r),s=r===t?new e:o?new e(+o[1]):r instanceof e?r:u(r)?f(r):typeof r=="string"?E(r):new e(r)),new n(s))},k.utc=function(e,t){return u(e)?new n(f(e,!0),!0):(typeof e=="string"&&!X.exec(e)&&(e+=" +0000",t&&(t+=" Z")),k(e,t).utc())},k.unix=function(e){return k(e*1e3)},k.duration=function(e,t){var n=k.isDuration(e),i=typeof e=="number",s=n?e._data:i?{}:e,o;return i&&(t?s[t]=e:s.milliseconds=e),o=new r(s),n&&(o._lang=e._lang),o},k.humanizeDuration=function(e,t,n){return k.duration(e,t===!0?null:t).humanize(t===!0?!0:n)},k.version=L,k.defaultFormat=J,k.lang=function(e,t){var n;if(!e)return _;(t||!M[e])&&l(e,t);if(M[e]){for(n=0;n<P.length;n++)k[P[n]]=M[e][P[n]];k.monthsParse=M[e].monthsParse,_=e}},k.langData=c,k.isMoment=function(e){return e instanceof n},k.isDuration=function(e){return e instanceof r},k.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),k.fn=n.prototype={clone:function(){return k(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?!a(this._a,(this._a[7]?k.utc(this):this).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return m(this,e?e:k.defaultFormat)},add:function(e,t){var n=t?k.duration(+t,e):k.duration(e);return o(this,n,1),this},subtract:function(e,t){var n=t?k.duration(+t,e):k.duration(e);return o(this,n,-1),this},diff:function(e,t,n){var r=this._isUTC?k(e).utc():k(e).local(),i=(this.zone()-r.zone())*6e4,s=this._d-r._d-i,o=this.year()-r.year(),u=this.month()-r.month(),a=this.date()-r.date(),f;return t==="months"?f=o*12+u+a/30:t==="years"?f=o+(u+a/30)/12:f=t==="seconds"?s/1e3:t==="minutes"?s/6e4:t==="hours"?s/36e5:t==="days"?s/864e5:t==="weeks"?s/6048e5:s,n?f:A(f)},from:function(e,t){return k.duration(this.diff(e)).lang(this._lang).humanize(!t)},fromNow:function(e){return this.from(k(),e)},calendar:function(){var e=this.diff(k().sod(),"days",!0),t=this.lang().calendar,n=t.sameElse,r=e<-6?n:e<-1?t.lastWeek:e<0?t.lastDay:e<1?t.sameDay:e<2?t.nextDay:e<7?t.nextWeek:n;return this.format(typeof r=="function"?r.apply(this):r)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<k([this.year()]).zone()||this.zone()<k([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return k.utc([this.year(),this.month()+1,0]).date()},lang:function(e){return e===t?c(this):(this._lang=e,this)}};for(O=0;O<G.length;O++)T(G[O].toLowerCase(),G[O]);T("year","FullYear"),k.duration.fn=r.prototype={weeks:function(){return i(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=this.lang().relativeTime,r=x(t,!e,this.lang());return e&&(r=(t<=0?n.past:n.future).replace(/%s/i,r)),r},lang:k.fn.lang};for(O in Y)Y.hasOwnProperty(O)&&(C(O,Y[O]),N(O.toLowerCase()));C("Weeks",6048e5),D&&(module.exports=k),typeof ender=="undefined"&&(this.moment=k),typeof define=="function"&&define.amd&&define("moment",[],function(){return k})}).call(this,Date),function(e,t){function n(e){return new r(e)}function r(e){if(e&&e._wrapped)return e;this._wrapped=e}function i(e,t,n){t||(t=0);var r=e.length,i=r-t>=(n||jt),s=i?{}:e;if(i){var o,u=t-1;while(++u<r)o=e[u]+"",(tn.call(s,o)?s[o]:s[o]=[]).push(e[u])}return function(e){if(i){var n=e+"";return tn.call(s,n)&&q(s[n],e)>-1}return q(s,e,t)>-1}}function s(){var e,t,n,r=-1,i=arguments.length,s={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};while(++r<i){e=arguments[r];for(t in e)n=(n=e[t])==null?"":n,/beforeLoop|inLoop/.test(t)?(typeof n=="string"&&(n={array:n,object:n}),s.arrayBranch[t]=n.array||"",s.objectBranch[t]=n.object||""):s[t]=n}var u=s.args,a=/^[^,]+/.exec(u)[0],f=s.useStrict;s.firstArg=a,s.hasDontEnumBug=Sn,s.isKeysFast=_n,s.noArgsEnum=Nn,s.shadowed=Qt,s.useHas=s.useHas!==!1,s.useStrict=f==null?Dn:f,s.noCharByIndex==null&&(s.noCharByIndex=Ln),s.exit||(s.exit="if (!"+a+") return result");if(a!="collection"||!s.arrayBranch.inLoop)s.arrayBranch=null;var c=Function("arrayLikeClasses, ArrayProto, bind, compareAscending, concat, forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, isPlainObject, iteratorBind, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","var callee = function("+u+") {\n"+Rn(s)+"\n};\n"+"return callee");return c(Hn,Mt,rt,o,en,nr,tn,dt,q,m,Gn,g,y,l,gn,In,ln,rn,sn,bn,on)}function o(e,n){var r=e.index,i=n.index;return e=e.criteria,n=n.criteria,e===t?1:n===t?-1:e<n?-1:e>n?1:r<i?-1:1}function u(e,t){return Zt[t]}function a(e){return"\\"+qn[e]}function f(e){return jn[e]}function l(e,t){return function(n,r,i){return e.call(t,n,r,i)}}function c(){}function h(e,t){if(e&&It.test(t))return"<e%-"+t+"%>";var n=Zt.length;return Zt[n]="' +\n__e("+t+") +\n'",Yt+n}function p(e,t,n,r){if(r){var i=Zt.length;return Zt[i]="';\n"+r+";\n__p += '",Yt+i}return t?h(null,t):d(null,n)}function d(e,t){if(e&&It.test(t))return"<e%="+t+"%>";var n=Zt.length;return Zt[n]="' +\n((__t = ("+t+")) == null ? '' : __t) +\n'",Yt+n}function v(e){return Fn[e]}function m(e){return on.call(e)==cn}function g(e){return typeof e=="function"}function y(e,t){return e?e==Dt||e.__proto__==Dt&&(t||!m(e)):!1}function b(e,t,n,r,i){if(e==null)return e;n&&(t=!1),i||(i={value:null}),i.value==null&&(i.value=!!(_t.clone||Pt.clone||Ht.clone));var s=In[typeof e];if((s||i.value)&&e.clone&&g(e.clone))return i.value=null,e.clone(t);if(s){var o=on.call(e);if(!Bn[o]||Cn&&m(e))return e;var u=o==hn;s=u||(o==gn?y(e,!0):s)}if(!s||!t)return s?u?sn.call(e):tr({},e):e;var a=e.constructor;switch(o){case pn:return new a(e==1);case dn:return new a(+e);case mn:case bn:return new a(e);case yn:return a(e.source,Wt.exec(e))}r||(r=[]);var f=r.length;while(f--)if(r[f].source==e)return r[f].value;f=e.length;var l=u?a(f):{};r.push({value:l,source:e});if(u){var c=-1;while(++c<f)l[c]=b(e[c],t,null,r,i)}else rr(e,function(e,n){l[n]=b(e,t,null,r,i)});return l}function w(e,t){return e?tn.call(e,t):!1}function E(e){return e===!0||e===!1||on.call(e)==pn}function S(e){return on.call(e)==dn}function x(e){return e?e.nodeType===1:!1}function T(e,t,n,r){if(e==null||t==null)return e===t;r||(r={value:null}),r.value==null&&(r.value=!!(_t.isEqual||Pt.isEqual||Ht.isEqual));if(In[typeof e]||In[typeof t]||r.value){e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&g(e.isEqual))return r.value=null,e.isEqual(t);if(t.isEqual&&g(t.isEqual))return r.value=null,t.isEqual(e)}if(e===t)return e!==0||1/e==1/t;var i=on.call(e);if(i!=on.call(t))return!1;switch(i){case pn:case dn:return+e==+t;case mn:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case yn:case bn:return e==t+""}var s=Hn[i];if(Cn&&!s&&(s=m(e))&&!m(t))return!1;if(!s&&(i!=gn||An&&(typeof e.toString!="function"&&typeof (e+"")=="string"||typeof t.toString!="function"&&typeof (t+"")=="string")))return!1;n||(n=[]);var o=n.length;while(o--)if(n[o]==e)return!0;var u=-1,a=!0,f=0;n.push(e);if(s){f=e.length,a=f==t.length;if(a)while(f--)if(!(a=T(e[f],t[f],n,r)))break;return a}var l=e.constructor,c=t.constructor;if(l!=c&&!(g(l)&&l instanceof l&&g(c)&&c instanceof c))return!1;for(var h in e)if(tn.call(e,h)){f++;if(!tn.call(t,h)||!T(e[h],t[h],n,r))return!1}for(h in t)if(tn.call(t,h)&&!(f--))return!1;if(Sn)while(++u<7){h=Qt[u];if(tn.call(e,h)&&(!tn.call(t,h)||!T(e[h],t[h],n,r)))return!1}return!0}function N(e){return fn(e)&&on.call(e)==mn}function C(e){return e?In[typeof e]:!1}function k(e){return on.call(e)==mn&&e!=+e}function L(e){return e===null}function A(e){return on.call(e)==mn}function O(e){return on.call(e)==yn}function M(e){return on.call(e)==bn}function _(e){return e===t}function D(e){if(!e)return 0;var t=on.call(e),n=e.length;return Hn[t]||Cn&&m(e)||t==gn&&n>-1&&n===n>>>0&&g(e.splice)?n:or(e).length}function P(e,t,n,r){if(!e)return n;var i=e.length,s=arguments.length<3;r&&(t=l(t,r));if(i>-1&&i===i>>>0){var o=Ln&&on.call(e)==bn?e.split(""):e;i&&s&&(n=o[--i]);while(i--)n=t(n,o[i],i,e);return n}var u,a=or(e);i=a.length,i&&s&&(n=e[a[--i]]);while(i--)u=a[i],n=t(n,e[u],u,e);return n}function H(e){if(!e)return[];if(e.toArray&&g(e.toArray))return e.toArray();var t=e.length;return t>-1&&t===t>>>0?(kn?on.call(e)==bn:typeof e=="string")?e.split(""):sn.call(e):fr(e)}function B(e){var t=[];if(!e)return t;var n=-1,r=e.length;while(++n<r)e[n]&&t.push(e[n]);return t}function j(e){var t=[];if(!e)return t;var n=-1,r=e.length,s=en.apply(t,arguments),o=i(s,r);while(++n<r)o(e[n])||t.push(e[n]);return t}function F(e,t,n){if(e)return t==null||n?e[0]:sn.call(e,0,t)}function I(e,t){var n=[];if(!e)return n;var r,i=-1,s=e.length;while(++i<s)r=e[i],Gn(r)?nn.apply(n,t?r:I(r)):n.push(r);return n}function q(e,t,n){if(!e)return-1;var r=-1,i=e.length;if(n){if(typeof n!="number")return r=Q(e,t),e[r]===t?r:-1;r=(n<0?Math.max(0,i+n):n)-1}while(++r<i)if(e[r]===t)return r;return-1}function R(e,t,n){return e?sn.call(e,0,-(t==null||n?1:t)):[]}function U(e){var t=[];if(!e)return t;var n,r=arguments.length,s=[],o=-1,u=e.length;e:while(++o<u){n=e[o];if(q(t,n)<0){for(var a=1;a<r;a++)if(!(s[a]||(s[a]=i(arguments[a])))(n))continue e;t.push(n)}}return t}function z(e,t,n){if(e){var r=e.length;return t==null||n?e[r-1]:sn.call(e,-t||r)}}function W(e,t,n){if(!e)return-1;var r=e.length;n&&typeof n=="number"&&(r=(n<0?Math.max(0,r+n):Math.min(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function X(e,t,n){var r=-Infinity,i=r;if(!e)return i;var s,o=-1,u=e.length;if(!t){while(++o<u)e[o]>i&&(i=e[o]);return i}n&&(t=l(t,n));while(++o<u)s=t(e[o],o,e),s>r&&(r=s,i=e[o]);return i}function V(e,t,n){var r=Infinity,i=r;if(!e)return i;var s,o=-1,u=e.length;if(!t){while(++o<u)e[o]<i&&(i=e[o]);return i}n&&(t=l(t,n));while(++o<u)s=t(e[o],o,e),s<r&&(r=s,i=e[o]);return i}function $(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,i=Math.max(0,Math.ceil((t-e)/n)),s=Array(i);while(++r<i)s[r]=e,e+=n;return s}function J(e,t,n){return e?sn.call(e,t==null||n?1:t):[]}function K(e){if(!e)return[];var t,n=-1,r=e.length,i=Array(r);while(++n<r)t=Math.floor(Math.random()*(n+1)),i[n]=i[t],i[t]=e[n];return i}function Q(e,t,n,r){if(!e)return 0;var i,s=0,o=e.length;if(n){r&&(n=rt(n,r)),t=n(t);while(s<o)i=s+o>>>1,n(e[i])<t?s=i+1:o=i}else while(s<o)i=s+o>>>1,e[i]<t?s=i+1:o=i;return s}function G(){var e=-1,t=[],n=en.apply(t,arguments),r=n.length;while(++e<r)q(t,n[e])<0&&t.push(n[e]);return t}function Y(e,t,n,r){var i=[];if(!e)return i;var s,o=-1,u=e.length,a=[];typeof t=="function"&&(r=n,n=t,t=!1),n?r&&(n=l(n,r)):n=dt;while(++o<u){s=n(e[o],o,e);if(t?!o||a[a.length-1]!==s:q(a,s)<0)a.push(s),i.push(e[o])}return i}function Z(e){var t=[];if(!e)return t;var n=-1,r=e.length,s=i(arguments,1,20);while(++n<r)s(e[n])||t.push(e[n]);return t}function et(e){if(!e)return[];var t=-1,n=X(br(arguments,"length")),r=Array(n);while(++t<n)r[t]=br(arguments,t);return r}function tt(e,t){if(!e)return{};var n=-1,r=e.length,i={};t||(t=[]);while(++n<r)i[e[n]]=t[n];return i}function nt(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}}function rt(e,t){function n(){var o=arguments,u=t;i||(e=t[r]),s.length&&(o=o.length?s.concat(sn.call(o)):s);if(this instanceof n){c.prototype=e.prototype,u=new c;var a=e.apply(u,o);return a&&In[typeof a]?a:u}return e.apply(u,o)}var r,i=g(e);if(!i)r=t,t=e;else if(Mn||un&&arguments.length>2)return un.call.apply(un,arguments);var s=sn.call(arguments,2);return n}function it(){var e=arguments;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function st(e,t,n){function r(){u=null,n||e.apply(o,i)}var i,s,o,u;return function(){var a=n&&!u;return i=arguments,o=this,wn(u),u=En(r,t),a&&(s=e.apply(o,i)),s}}function ot(e,n){var r=sn.call(arguments,2);return En(function(){return e.apply(t,r)},n)}function ut(e){var n=sn.call(arguments,1);return En(function(){return e.apply(t,n)},1)}function at(e,t){var n={};return function(){var r=t?t.apply(this,arguments):arguments[0];return tn.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function ft(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}function lt(e){var t=sn.call(arguments,1),n=t.length;return function(){var r,i=arguments;return i.length&&(t.length=n,nn.apply(t,i)),r=t.length==1?e.call(this,t[0]):e.apply(this,t),t.length=n,r}}function ct(e,t){function n(){u=new Date,o=null,e.apply(s,r)}var r,i,s,o,u=0;return function(){var a=new Date,f=t-(a-u);return r=arguments,s=this,f<=0?(u=a,i=e.apply(s,r)):o||(o=En(n,f)),i}}function ht(e,t){return function(){var n=[e];return arguments.length&&nn.apply(n,arguments),t.apply(this,n)}}function pt(e){return e==null?"":(e+"").replace(Jt,f)}function dt(e){return e}function vt(e){vr(ir(e),function(t){var i=n[t]=e[t];r.prototype[t]=function(){var e=[this._wrapped];arguments.length&&nn.apply(e,arguments);var t=i.apply(n,e);return this._chain&&(t=new r(t),t._chain=!0),t}})}function mt(){return e._=Ft,this}function gt(e,t){if(!e)return null;var n=e[t];return g(n)?e[t]():n}function yt(e,t,r){r||(r={}),e+="";var i,s,o=r.escape,f=r.evaluate,l=r.interpolate,c=n.templateSettings,v=r.variable||c.variable,m=v;o==null&&(o=c.escape),f==null&&(f=c.evaluate||!1),l==null&&(l=c.interpolate),o&&(e=e.replace(o,h)),l&&(e=e.replace(l,d)),f!=Ct&&(Ct=f,At=RegExp("<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>"+(f?"|"+f.source:""),"g")),i=Zt.length,e=e.replace(At,p),i=i!=Zt.length,e="__p += '"+e.replace(Kt,a).replace($t,u)+"';\n",Zt.length=0,m||(v=kt||"obj",i?e="with ("+v+") {\n"+e+"\n}\n":(v!=kt&&(kt=v,Lt=RegExp("(\\(\\s*)"+v+"\\."+v+"\\b","g")),e=e.replace(Xt,"$&"+v+".").replace(Lt,"$1__d"))),e=(i?e.replace(Rt,""):e).replace(Ut,"$1").replace(zt,"$1;"),e="function("+v+") {\n"+(m?"":v+" || ("+v+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(m?"":", __d = "+v+"."+v+" || "+v)+";\n")+e+"return __p\n}",Pn&&(e+="\n//@ sourceURL=/lodash/template/source["+Gt++ +"]");try{s=Function("_","return "+e)(n)}catch(g){s=function(){throw g}}return t?s(t):(s.source=e,s)}function bt(e,t,n){var r=-1;if(n)while(++r<e)t.call(n,r);else while(++r<e)t(r)}function wt(e){return e==null?"":(e+"").replace(qt,v)}function Et(e){var t=Bt++;return e?e+t:t}function St(e){return e=new r(e),e._chain=!0,e}function xt(e,t){return t(e),e}function Tt(){return this._chain=!0,this}function Nt(){return this._wrapped}"use strict";var Ct,kt,Lt,At,Ot=typeof exports=="object"&&exports&&(typeof global=="object"&&global&&global==global.global&&(e=global),exports),Mt=Array.prototype,_t=Boolean.prototype,Dt=Object.prototype,Pt=Number.prototype,Ht=String.prototype,Bt=0,jt=30,Ft=e._,It=/[-+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,qt=/&(?:amp|lt|gt|quot|#x27);/g,Rt=/\b__p \+= '';/g,Ut=/\b(__p \+=) '' \+/g,zt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wt=/\w*$/,Xt=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,Vt=RegExp("^"+(Dt.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),$t=/__token__(\d+)/g,Jt=/[&<>"']/g,Kt=/['\n\r\t\u2028\u2029\\]/g,Qt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Gt=0,Yt="__token__",Zt=[],en=Mt.concat,tn=Dt.hasOwnProperty,nn=Mt.push,rn=Dt.propertyIsEnumerable,sn=Mt.slice,on=Dt.toString,un=Vt.test(un=sn.bind)&&un,an=Vt.test(an=Array.isArray)&&an,fn=e.isFinite,ln=Vt.test(ln=Object.keys)&&ln,cn="[object Arguments]",hn="[object Array]",pn="[object Boolean]",dn="[object Date]",vn="[object Function]",mn="[object Number]",gn="[object Object]",yn="[object RegExp]",bn="[object String]",wn=e.clearTimeout,En=e.setTimeout,Sn,xn,Tn,Nn=!0;(function(){function e(){this.x=1}var t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments)Nn=!r;Sn=(n+"").length<4,Tn=n[0]!="x",xn=(n.splice.call(t,0,1),t[0])})(1);var Cn=!m(arguments),kn=sn.call("x")[0]!="x",Ln="x"[0]+Object("x")[0]!="xx";try{var An=({toString:0}+"",on.call(e.document||0)==gn)}catch(On){}var Mn=un&&/\n|Opera/.test(un+on.call(e.opera)),_n=ln&&/^.+$|true/.test(ln+!!e.attachEvent),Dn=!Mn;try{var Pn=(Function("//@")(),!e.attachEvent)}catch(On){}var Hn={};Hn[pn]=Hn[dn]=Hn[vn]=Hn[mn]=Hn[gn]=Hn[yn]=!1,Hn[cn]=Hn[hn]=Hn[bn]=!0;var Bn={};Bn[cn]=Bn[vn]=!1,Bn[hn]=Bn[pn]=Bn[dn]=Bn[mn]=Bn[gn]=Bn[yn]=Bn[bn]=!0;var jn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Fn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},In={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1,unknown:!0},qn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};n.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var Rn=yt("<% if (useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length > -1 && length === length >>> 0) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectBranch.inLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {    <% if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>;\n    <% if (!hasDontEnumBug || useHas) { %>}\n<% } %>  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch || noArgsEnum) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),Un={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (callback(value, index, collection) === false) return result"},zn={init:"{}",top:"var prop;\nif (typeof callback != 'function') {\n  var valueProp = callback;\n  callback = function(value) { return value[valueProp] }\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)"},Wn={useHas:!1,args:"object, callback, thisArg",init:"{}",top:"var isFunc = typeof callback == 'function';\nif (!isFunc) {\n  var props = concat.apply(ArrayProto, arguments)\n} else if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (isFunc\n  ? !callback(value, index, object)\n  : indexOf(props, index) < 0\n) result[index] = value"},Xn={init:"true",inLoop:"if (!callback(value, index, collection)) return !result"},Vn={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"result[index] = value",bottom:"  }\n}"},$n={init:"[]",inLoop:"callback(value, index, collection) && result.push(value)"},Jn={top:"if (thisArg) callback = iteratorBind(callback, thisArg)"},Kn={inLoop:{object:Un.inLoop}},Qn={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+(_n?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(value, index, collection)",object:"result"+(_n?"[ownIndex] = ":".push")+"(callback(value, index, collection))"}};Cn&&(m=function(e){return!!e&&!!tn.call(e,"callee")});var Gn=an||function(e){return on.call(e)==hn};g(/x/)&&(g=function(e){return on.call(e)==vn}),y(In)||(y=function(e,t){var n=!1;if(!e||typeof e!="object"||!t&&m(e))return n;var r=e.constructor;return(!An||typeof e.toString=="function"||typeof (e+"")!="string")&&(!g(r)||r instanceof r)?Tn?(nr(e,function(t,r){return n=!tn.call(e,r),!1}),n===!1):(nr(e,function(e,t){n=t}),n===!1||tn.call(e,n)):n});var Yn=s({args:"object",init:"[]",inLoop:"result.push(index)"}),Zn=s(Vn,{inLoop:"if (result[index] == null) "+Vn.inLoop}),er=s(Wn),tr=s(Vn),nr=s(Un,Jn,Kn,{useHas:!1}),rr=s(Un,Jn,Kn),ir=s({useHas:!1,args:"object",init:"[]",inLoop:"if (isFunction(value)) result.push(index)",bottom:"result.sort()"}),sr=s({args:"value",init:"true",top:"var className = toString.call(value),\n    length = value.length;\nif (arrayLikeClasses[className]"+(Cn?" || isArguments(value)":"")+" ||\n"+"  (className == objectClass && length > -1 && length === length >>> 0 &&\n"+"  isFunction(value.splice))"+") return !length",inLoop:{object:"return false"}}),or=ln?function(e){var t=typeof e;return t=="function"&&rn.call(e,"prototype")?Yn(e):e&&In[t]?ln(e):[]}:Yn,ur=s(Vn,{args:"object, source, indicator, stack",top:"var destValue, found, isArr, stackLength, recursive = indicator == isPlainObject;\nif (!recursive) stack = [];\nfor (var argsIndex = 1, argsLength = recursive ? 2 : arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"if (value && ((isArr = isArray(value)) || isPlainObject(value))) {\n  found = false; stackLength = stack.length;\n  while (stackLength--) {\n    if (found = stack[stackLength].source == value) break\n  }\n  if (found) {\n    result[index] = stack[stackLength].value\n  } else {\n    destValue = (destValue = result[index]) && isArr\n      ? (isArray(destValue) ? destValue : [])\n      : (isPlainObject(destValue) ? destValue : {});\n    stack.push({ value: destValue, source: value });\n    result[index] = callee(destValue, value, isPlainObject, stack)\n  }\n} else if (value != null) {\n  result[index] = value\n}"}),ar=s(Wn,{top:"if (typeof callback != 'function') {\n  var prop,\n      props = concat.apply(ArrayProto, arguments),\n      length = props.length;\n  for (index = 1; index < length; index++) {\n    prop = props[index];\n    if (prop in object) result[prop] = object[prop]\n  }\n} else {\n  if (thisArg) callback = iteratorBind(callback, thisArg)",inLoop:"if (callback(value, index, object)) result[index] = value",bottom:"}"}),fr=s({args:"object",init:"[]",inLoop:"result.push(value)"}),lr=s({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(collection) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (value === target) return true"}),cr=s(Un,zn),hr=s(Un,Xn),pr=s(Un,$n),dr=s(Un,Jn,{init:"",inLoop:"if (callback(value, index, collection)) return value"}),vr=s(Un,Jn),mr=s(Un,zn,{inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)"}),gr=s(Qn,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)",object:"result"+(_n?"[ownIndex] = ":".push")+"((isFunc ? methodName : value[methodName]).apply(value, args))"}}),yr=s(Un,Qn),br=s(Qn,{args:"collection, property",inLoop:{array:"result[index] = value[property]",object:"result"+(_n?"[ownIndex] = ":".push")+"(value[property])"}}),wr=s({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = iteratorBind(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = iteratee[++index]"},inLoop:{array:"result = callback(result, value, index, collection)",object:"result = noaccum\n  ? (noaccum = false, value)\n  : callback(result, value, index, collection)"}}),Er=s(Un,$n,{inLoop:"!"+$n.inLoop}),Sr=s(Un,Xn,{init:"false",inLoop:Xn.inLoop.replace("!","")}),xr=s(Un,zn,Qn,{inLoop:{array:"result[index] = {\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n}",object:"result"+(_n?"[ownIndex] = ":".push")+"({\n"+"  criteria: callback(value, index, collection),\n"+"  index: index,\n"+"  value: value\n"+"})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"}),Tr=s($n,{args:"collection, properties",top:"var props = [];\nforIn(properties, function(value, prop) { props.push(prop) });\nvar propsLength = props.length",inLoop:"for (var prop, pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\n  prop = props[propIndex];\n  if (!(pass = value[prop] === properties[prop])) break\n}\npass && result.push(value)"}),Nr=s({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++) {\n    result[funcs[index]] = bind(result[funcs[index]], result)\n  }\n  return result\n}",inLoop:"if (isFunction(result[index])) {\n  result[index] = bind(result[index], result)\n}"});n.VERSION="0.6.1",n.after=nt,n.bind=rt,n.bindAll=Nr,n.chain=St,n.clone=b,n.compact=B,n.compose=it,n.contains=lr,n.countBy=cr,n.debounce=st,n.defaults=Zn,n.defer=ut,n.delay=ot,n.difference=j,n.drop=er,n.escape=pt,n.every=hr,n.extend=tr,n.filter=pr,n.find=dr,n.first=F,n.flatten=I,n.forEach=vr,n.forIn=nr,n.forOwn=rr,n.functions=ir,n.groupBy=mr,n.has=w,n.identity=dt,n.indexOf=q,n.initial=R,n.intersection=U,n.invoke=gr,n.isArguments=m,n.isArray=Gn,n.isBoolean=E,n.isDate=S,n.isElement=x,n.isEmpty=sr,n.isEqual=T,n.isFinite=N,n.isFunction=g,n.isNaN=k,n.isNull=L,n.isNumber=A,n.isObject=C,n.isRegExp=O,n.isString=M,n.isUndefined=_,n.keys=or,n.last=z,n.lastIndexOf=W,n.map=yr,n.max=X,n.memoize=at,n.merge=ur,n.min=V,n.mixin=vt,n.noConflict=mt,n.once=ft,n.partial=lt,n.pick=ar,n.pluck=br,n.range=$,n.reduce=wr,n.reduceRight=P,n.reject=Er,n.rest=J,n.result=gt,n.shuffle=K,n.size=D,n.some=Sr,n.sortBy=xr,n.sortedIndex=Q,n.tap=xt,n.template=yt,n.throttle=ct,n.times=bt,n.toArray=H,n.unescape=wt,n.union=G,n.uniq=Y,n.uniqueId=Et,n.values=fr,n.where=Tr,n.without=Z,n.wrap=ht,n.zip=et,n.zipObject=tt,n.all=hr,n.any=Sr,n.collect=yr,n.detect=dr,n.each=vr,n.foldl=wr,n.foldr=P,n.head=F,n.include=lr,n.inject=wr,n.methods=ir,n.omit=er,n.select=pr,n.tail=J,n.take=F,n.unique=Y,n._iteratorTemplate=Rn,n._shimKeys=Yn,r.prototype=n.prototype,vt(n),r.prototype.chain=Tt,r.prototype.value=Nt,vr(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Mt[e];r.prototype[e]=function(){var e=this._wrapped;return t.apply(e,arguments),xn&&e.length===0&&delete e[0],this._chain&&(e=new r(e),e._chain=!0),e}}),vr(["concat","join","slice"],function(e){var t=Mt[e];r.prototype[e]=function(){var e=this._wrapped,n=t.apply(e,arguments);return this._chain&&(n=new r(n),n._chain=!0),n}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=n,define(function(){return n})):Ot?typeof module=="object"&&module&&module.exports==Ot?(module.exports=n)._=n:Ot._=n:e._=n}(this),function(){var e=this.math={};e.mean=e.ave=e.average=function(t,n){return e.sum(t,n)/_(t).size()},e.median=function(t){var n=(t.length+1)/2,r=e.sort(t);return r.length%2?r[n-1]:(r[n-1.5]+r[n-.5])/2},e.pow=function(e,t){if(_.isNumber(e))return Math.pow(e,t);if(_.isArray(e))return _.map(e,function(e){return _.pow(e,t)})},e.scale=function(e,t){var t=t||1,n=_.max(e);return _.map(e,function(e){return e*(t/n)})},e.slope=function(e,t){return(t[1]-e[1])/(t[0]-e[0])},e.sort=function(e){return e.sort(function(e,t){return e-t})},e.stdDeviation=e.sigma=function(e){return Math.sqrt(_(e).variance())},e.sum=function(e,t){if(_.isArray(e)&&typeof e[0]=="number")var n=e;else var t=t||"value",n=_(e).pluck(t);var r=0;for(var i=0,s=n.length;i<s;i++)r+=n[i];return r},e.transpose=function(e){var t=[];return _(e).each(function(e,n){_(e).each(function(e,r){t[r]||(t[r]=[]),t[r][n]=e})}),t},e.variance=function(e){var t=_(e).mean();return _(e).chain().map(function(e){return _(e-t).pow(2)}).mean().value()},_.mixin(e)}(),function(e){function t(e){var t=v[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}var n={},r=Array.prototype,i=Object.prototype,s=i.hasOwnProperty,o=i.toString,u=r.forEach,a=r.slice,f=function(e,t,r){var i,o,a;if(!e)return;if(u&&e.forEach===u)e.forEach(t,r);else if(e.length===+e.length){for(o=0,a=e.length;o<a;o++)if(o in e&&t.call(r,e[o],o,e)===n)return}else for(i in e)if(s.call(e,i)&&t.call(r,e[i],i,e)===n)return},l=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},c=function(e){return f(a.call(arguments,1),function(t){var n;for(n in t)t[n]!==void 0&&(e[n]=t[n])}),e},h={"[object Array]":"array","[object Function]":"function"},p=function(e){return e?h[o.call(e)]||"object":String(e)},d={},v={};d.Callbacks=function(e){e=e?v[e]||t(e):{};var n=[],r=[],i,s,o,u,a,f,l=function(t){var r,i,s,o,u;for(r=0,i=t.length;r<i;r++)s=t[r],o=p(s),o==="array"?l(s):o==="function"&&(!e.unique||!h.has(s))&&n.push(s)},c=function(t,l){l=l||[],i=!e.memory||[t,l],s=!0,o=!0,f=u||0,u=0,a=n.length;for(;n&&f<a;f++)if(n[f].apply(t,l)===!1&&e.stopOnFalse){i=!0;break}o=!1,n&&(e.once?i===!0?h.disable():n=[]:r&&r.length&&(i=r.shift(),h.fireWith(i[0],i[1])))},h={add:function(){if(n){var e=n.length;l(arguments),o?a=n.length:i&&i!==!0&&(u=e,c(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){o&&s<=a&&(a--,s<=f&&f--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=undefined,this},disabled:function(){return!n},lock:function(){return r=undefined,(!i||i===!0)&&h.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(o?e.once||r.push([t,n]):(!e.once||!i)&&c(t,n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},d.Deferred=function(e){var t=d.Callbacks("once memory"),n=d.Callbacks("once memory"),r=d.Callbacks("memory"),i="pending",s={resolve:t,reject:n,notify:r},o={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return u.done(e).fail(t).progress(n),this},always:function(){return u.done.apply(u,arguments).fail.apply(u,arguments),this},pipe:function(e,t,n){return d.Deferred(function(r){f({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=e[0],i=e[1],s;l(n)?u[t](function(){s=n.apply(this,arguments),s&&l(s.promise)?s.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===u?r:this,[s])}):u[t](r[i])})}).promise()},promise:function(e){if(!e)e=o;else for(var t in o)e[t]=o[t];return e}},u=o.promise({}),a;for(a in s)u[a]=s[a].fire,u[a+"With"]=s[a].fireWith;return u.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(u,u),u},d.when=function(e){function t(e){return function(t){r[e]=arguments.length>1?a.call(arguments,0):t,--u||c.resolveWith(c,r)}}function n(e){return function(t){o[e]=arguments.length>1?a.call(arguments,0):t,c.notifyWith(h,o)}}var r=a.call(arguments,0),i=0,s=r.length,o=new Array(s),u=s,f=s,c=s<=1&&e&&l(e.promise)?e:d.Deferred(),h=c.promise();if(s>1){for(;i<s;i++)r[i]&&r[i].promise&&l(r[i].promise)?r[i].promise().then(t(i),c.reject,n(i)):--u;u||c.resolveWith(c,r)}else c!==e&&c.resolveWith(c,s?[e]:[]);return h},typeof module!="undefined"&&module.exports?module.exports=d:typeof e._!="undefined"?e._.mixin(d):e._=d}(this),function(e,t){var n=e.Miso||(e.Miso={});n.typeOf=function(e,r){var i=t.keys(n.types),s;return i.push(i.splice(t.indexOf(i,"string"),1)[0]),i.push(i.splice(t.indexOf(i,"mixed"),1)[0]),s=t.find(i,function(t){return n.types[t].test(e,r)}),s=t.isUndefined(s)?"string":s,s},n.types={mixed:{name:"mixed",coerce:function(e){return t.isNull(e)||typeof e=="undefined"||t.isNaN(e)?null:e},test:function(e){return!0},compare:function(e,n){if(t.isEqual(e,n))return 0;if(e<n)return-1;if(e>n)return 1},numeric:function(e){return e===null||t.isNaN(+e)?null:+e}},string:{name:"string",coerce:function(e){return t.isNaN(e)||e===null||typeof e=="undefined"?null:e.toString()},test:function(e){return e===null||typeof e=="undefined"||typeof e=="string"},compare:function(e,t){return e==null&&t!=null?-1:e!=null&&t==null?1:e<t?-1:e>t?1:0},numeric:function(e){return t.isNaN(+e)||e===null?null:t.isNumber(+e)?+e:null}},"boolean":{name:"boolean",regexp:/^(true|false)$/,coerce:function(e){return t.isNaN(e)||e===null||typeof e=="undefined"?null:e==="false"?!1:Boolean(e)},test:function(e){return e===null||typeof e=="undefined"||typeof e=="boolean"||this.regexp.test(e)?!0:!1},compare:function(e,t){return e==null&&t!=null?-1:e!=null&&t==null?1:e==null&&t==null?0:e===t?0:e<t?-1:1},numeric:function(e){return e===null||t.isNaN(e)?null:e?1:0}},number:{name:"number",regexp:/^\s*[\-\.]?[0-9]+([\.][0-9]+)?\s*$/,coerce:function(e){var n=+e;return t.isNull(e)||typeof e=="undefined"||t.isNaN(n)?null:n},test:function(e){return e===null||typeof e=="undefined"||typeof e=="number"||this.regexp.test(e)?!0:!1},compare:function(e,t){return e==null&&t!=null?-1:e!=null&&t==null?1:e==null&&t==null?0:e===t?0:e<t?-1:1},numeric:function(e){return t.isNaN(e)||e===null?null:e}},time:{name:"time",format:"DD/MM/YYYY",_formatLookup:[["DD","\\d{2}"],["D","\\d{1}|\\d{2}"],["MM","\\d{2}"],["M","\\d{1}|\\d{2}"],["YYYY","\\d{4}"],["YY","\\d{2}"],["A","[AM|PM]"],["hh","\\d{2}"],["h","\\d{1}|\\d{2}"],["mm","\\d{2}"],["m","\\d{1}|\\d{2}"],["ss","\\d{2}"],["s","\\d{1}|\\d{2}"],["ZZ","[-|+]\\d{4}"],["Z","[-|+]\\d{2}:\\d{2}"]],_regexpTable:{},_regexp:function(e){if(this._regexpTable[e])return new RegExp(this._regexpTable[e],"g");var n=e;return t.each(this._formatLookup,function(e){n=n.replace(e[0],e[1])},this),n=n.split("/").join("\\/"),this._regexpTable[e]=n,new RegExp(this._regexpTable[e],"g")},coerce:function(e,n){n=n||{};if(t.isNull(e)||typeof e=="undefined"||t.isNaN(e))return null;if(t.isString(e)){var r=n.format||this.format;return moment(e,n.format)}return t.isNumber(e)?moment(e):e},test:function(e,n){n=n||{};if(e===null||typeof e=="undefined")return!0;if(t.isString(e)){var r=n.format||this.format,i=this._regexp(r);return i.test(e)}return!0},compare:function(e,t){return e<t?-1:e>t?1:0},numeric:function(e){return t.isNaN(e)||e===null?null:e.valueOf()}}}}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Event=function(e){t.isArray(e)||(e=[e]),this.deltas=e},t.extend(n.Event.prototype,{affectedColumns:function(){var e=[];return t.each(this.deltas,function(n){n.old=n.old||[],n.changed=n.changed||[],e=t.chain(e).union(t.keys(n.old),t.keys(n.changed)).reject(function(e){return e==="_id"}).value()}),e}}),t.extend(n.Event,{isRemove:function(e){return t.isUndefined(e.changed)||t.keys(e.changed).length===0?!0:!1},isAdd:function(e){return t.isUndefined(e.old)||t.keys(e.old).length===0?!0:!1},isUpdate:function(e){return!this.isRemove(e)&&!this.isAdd(e)?!0:!1}}),n.Events={},n.Events.bind=function(e,t,n){var r=this._callbacks||(this._callbacks={}),i=r[e]||(r[e]={}),s=i.tail||(i.tail=i.next={});return s.callback=t,s.context=n,i.tail=s.next={},this},n.Events.unbind=function(e,t){var n,r,i;if(!e)this._callbacks=null;else if(n=this._callbacks)if(!t)n[e]={};else if(r=n[e])while((i=r)&&(r=r.next)){if(r.callback!==t)continue;i.next=r.next,r.context=r.callback=null;break}return this},n.Events.trigger=function(e){var t,n,r,i,s,o=["all",e];if(!(n=this._callbacks))return this;while(s=o.pop()){if(!(t=n[s]))continue;i=s==="all"?arguments:Array.prototype.slice.call(arguments,1);while(t=t.next)(r=t.callback)&&r.apply(t.context||this,i)}return this},n.Events._buildEvent=function(e){return new n.Event(e)}}(this,_),function(e,t){var n=e.Miso||{};n.Builder={detectColumnType:function(e,r){var i=t.inject(r.slice(0,5),function(e,r){var i=n.typeOf(r);return r!==""&&e.indexOf(i)===-1&&!t.isNull(r)&&e.push(i),e},[]);return i.length===1?e.type=i[0]:e.type="mixed",e},detectColumnTypes:function(e,r){t.each(r,function(t,r){var i=e.column(r);if(i.type){i.force=!0;return}n.Builder.detectColumnType(i,t)},this)},cacheRows:function(e){n.Builder.clearRowCache(e),t.each(e._columns[e._columnPositionByName._id].data,function(t,n){e._rowPositionById[t]=n,e._rowIdByPosition.push(t)},e);var r=t.uniq(t.map(e._columns,function(e){return e.data.length}));if(r.length>1)throw new Error("Row lengths need to be the same. Empty values should be set to null."+t.map(e._columns,function(e){return e.data+"|||"}));e.length=r[0]},clearRowCache:function(e){e._rowPositionById={},e._rowIdByPosition=[]},cacheColumns:function(e){e._columnPositionByName={},t.each(e._columns,function(t,n){e._columnPositionByName[t.name]=n})}},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1})}(this,_),function(e,t){var n=e.Miso;n.Column=function(e){return t.extend(this,e),this._id=e.id||t.uniqueId(),this.data=e.data||[],this},t.extend(n.Column.prototype,{toNumeric:function(e){return n.types[this.type].numeric(e)},numericAt:function(e){return this.toNumeric(this.data[e])},coerce:function(){this.data=t.map(this.data,function(e){return n.types[this.type].coerce(e,this)},this)},compute:function(e,t){if(this.func){var n=this.func(e);return typeof t!="undefined"?this.data[t]=n:this.data.push(n),n}},isComputed:function(){return!t.isUndefined(this.func)},_sum:function(){return t.sum(this.data)},_mean:function(){var e=0;for(var t=0;t<this.data.length;t++)e+=this.numericAt(t);return e/=this.data.length,n.types[this.type].coerce(e,this)},_median:function(){return n.types[this.type].coerce(t.median(this.data),this)},_max:function(){var e=-Infinity;for(var t=0;t<this.data.length;t++)this.data[t]!==null&&n.types[this.type].compare(this.data[t],e)>0&&(e=this.numericAt(t));return n.types[this.type].coerce(e,this)},_min:function(){var e=Infinity;for(var t=0;t<this.data.length;t++)this.data[t]!==null&&n.types[this.type].compare(this.data[t],e)<0&&(e=this.numericAt(t));return n.types[this.type].coerce(e,this)}}),n.DataView=function(e){if(typeof e!="undefined"){e=e||(e={});if(t.isUndefined(e.parent))throw new Error("A view must have a parent specified.");this.parent=e.parent,this._initialize(e)}},t.extend(n.DataView.prototype,{_initialize:function(e){this.parent.syncable===!0&&(t.extend(this,n.Events),this.syncable=!0),this.filter={columns:this._columnFilter(e.filter.columns||undefined),rows:this._rowFilter(e.filter.rows||undefined)},this._columns=this._selectData(),n.Builder.cacheColumns(this),n.Builder.cacheRows(this),this.syncable&&this.parent.bind("change",this._sync,this)},_sync:function(e){var r=e.deltas,i=null;t.each(r,function(r,s){var o=this._rowPositionById[r._id];if(typeof o=="undefined"&&n.Event.isAdd(r))this.filter.rows&&this.filter.rows(r.changed)&&(this._add(r.changed),i="add");else{if(o==="undefined")return;t.each(r.changed,function(e,n){var r=this._columnPositionByName[n];if(t.isUndefined(r))return;this._columns[r].data[o]=e,i="update"},this)}var u=this.rowByPosition(o);if(n.Event.isRemove(r)||this.filter.row&&!this.filter.row(u)){var f={_id:r._id,old:this.rowByPosition(o),changed:{}};e.deltas.splice(s,1,f),this._remove(o),i="delete"}},this),this.syncable&&(this.trigger(i,e),this.trigger("change",e))},where:function(e,r){return r=r||{},r.filter=r.filter||{},t.isFunction(e)?r.filter.rows=e:r.filter=e,r.parent=this,new n.DataView(r)},_selectData:function(){var e=[];return t.each(this.parent._columns,function(t){this.filter.columns(t)&&e.push(new n.Column({name:t.name,data:[],type:t.type,_id:t._id}))},this),this.parent.each(function(t){if(!this.filter.rows(t))return;for(var n=0;n<e.length;n++)e[n].data.push(t[e[n].name])},this),e},_columnFilter:function(e){var n;return t.isUndefined(e)?n=function(){return!0}:(t.isString(e)&&(e=[e]),e.push("_id"),n=function(n){return t.indexOf(e,n.name)===-1?!1:!0}),n},_rowFilter:function(e){var n;return t.isNumber(e)&&(e=[e]),t.isUndefined(e)?n=function(){return!0}:t.isFunction(e)?n=e:n=function(n){return t.indexOf(e,n._id)===-1?!1:!0},n},column:function(e){return this._column(e)},_column:function(e){if(t.isUndefined(this._columnPositionByName))return undefined;var n=this._columnPositionByName[e];return this._columns[n]},columns:function(e){return new n.DataView({filter:{columns:e},parent:this})},columnNames:function(){var e=t.pluck(this._columns,"name");return t.reject(e,function(e){return e==="_id"||e==="_oids"})},hasColumn:function(e){return!t.isUndefined(this._columnPositionByName[e])},each:function(e,t){for(var n=0;n<this.length;n++)e.apply(t||this,[this.rowByPosition(n),n])},reverseEach:function(e,t){for(var n=this.length-1;n>=0;n--)e.apply(t||this,[this.rowByPosition(n),n])},eachColumn:function(e,t){var n=this.columnNames();for(var r=0;r<n.length;r++)e.apply(t||this,[n[r],this.column(n[r]),r])},rowByPosition:function(e){return this._row(e)},rowById:function(e){return this._row(this._rowPositionById[e])},_row:function(e){var n={};return t.each(this._columns,function(t){n[t.name]=t.data[e]}),n},_remove:function(e){var n=this._rowPositionById[e];return t.each(this._columns,function(e){e.data.splice(n,1)}),delete this._rowPositionById[e],this._rowIdByPosition.splice(n,1),this.length--,this},_add:function(e,r){t.each(e,function(r,i){var s=this.column(i);if(s.isComputed())throw"You're trying to update a computed column. Those get computed!";if(typeof s!="undefined"){var o=n.types[s.type];if(!s.force&&!o.test(e[s.name],s))throw"incorrect value '"+e[s.name]+"' of type "+n.typeOf(e[s.name],s)+" passed to column '"+s.name+"' with type "+s.type;t.isUndefined(s.before)||(e[s.name]=s.before(e[s.name])),e[s.name]=o.coerce(e[s.name],s)}},this),this._computedColumns&&t.each(this._computedColumns,function(t){var n=t.compute(e);e[t.name]=n});if(t.isUndefined(this.comparator))t.each(this._columns,function(n){n.isComputed()||n.data.push(!t.isUndefined(e[n.name])&&!t.isNull(e[n.name])?e[n.name]:null)}),this.length++,this._rowIdByPosition=this._rowIdByPosition||(this._rowIdByPosition=[]),this._rowPositionById=this._rowPositionById||(this._rowPositionById={}),this._rowIdByPosition.push(e._id),this._rowPositionById[e._id]=this._rowIdByPosition.length;else{var i=function(e,t,n){Array.prototype.splice.apply(n,[e,0].concat(t))},s;this.length++;for(s=0;s<this.length;s++){var o=this.rowByPosition(s);if(t.isUndefined(o._id)||this.comparator(e,o)<0){t.each(this._columns,function(t){i(s,e[t.name]?e[t.name]:null,t.data)});break}}this._rowIdByPosition=[],this._rowPositionById={},this.each(function(e,t){this._rowIdByPosition.push(e._id),this._rowPositionById[e._id]=t})}return this},rows:function(e){return new n.DataView({filter:{rows:e},parent:this})},sort:function(e){var n={};t.isFunction(e)?n.comparator=e:n=e||n,n.comparator&&(this.comparator=n.comparator);if(t.isUndefined(this.comparator))throw new Error("Cannot sort without this.comparator.");var r=this.length,i;if(r===1)return;var s=t.bind(function(e,n){var r=this.rowByPosition(n);t.each(r,function(t,r){var i=this._columnPositionByName[r],s=this._columns[i].data[e];this._columns[i].data.splice(e,1,t),this._columns[i].data.splice(n,1,s)},this)},this),o=t.bind(function(e,t){var n=e,r;while(n*2<=t){r=n*2;var i=this.rowByPosition(n);r+1<t&&this.comparator(this.rowByPosition(r),this.rowByPosition(r+1))<0&&r++;if(!(this.comparator(i,this.rowByPosition(r))<0))return;s(n,r),n=r}},this),u=function(e){var t=Math.round((e-2)/2);while(t>=0)o(t,e-1),t--};if(r>2){u(r),i=r-1;while(i>1)s(i,0),i--,o(0,i)}else this.comparator(this.rowByPosition(0),this.rowByPosition(1))>0&&s(0,1);return this.comparator(this.rowByPosition(this.length-2),this.rowByPosition(this.length-1))>0&&s(this.length-1,this.length-2),this.syncable&&n.silent&&this.trigger("sort"),this},toJSON:function(){var e=[];for(var t=0;t<this.length;t++)e.push(this.rowByPosition(t));return e}})}(this,_),function(e,t){var n=e.Miso;n.Product=n.Product||function(e){e=e||{},this.func=e.func;if(e.columns){var n=e.columns;t.isArray(e.columns)&&(n=e.columns[0]),this.valuetype=n.type,this.numeric=function(){return n.toNumeric(this.value)}}return this.func({silent:!0}),this},t.extend(n.Product.prototype,n.Events,{val:function(){return this.value},type:function(){return this.valuetype},_sync:function(e){this.func()},_buildDelta:function(e,t){return{old:e,changed:t}}}),n.Product.define=function(e){return function(r,i){i=i||{};var s=this._findColumns(r),o=this;i.type=i.type||s[0].type,i.typeOptions=i.typeOptions||s[0].typeOptions;var u=function(){var t=e.call(o,s,i);return n.types[i.type].coerce(t,i.typeOptions)};if(this.syncable){var f=new n.Product({columns:s,func:function(e){e=e||{};var n=this._buildDelta(this.value,u.call(o));this.value=n.changed;if(o.syncable){var r=this._buildEvent(n);!t.isUndefined(n.old)&&!e.silent&&n.old!==n.changed&&this.trigger("change",r)}}});return this.bind("change",f._sync,f),f}return u.call(o)}},t.extend(n.DataView.prototype,{_findColumns:function(e){var n=[];return t.isUndefined(e)&&(e=this.columnNames()),e=t.isArray(e)?e:[e],t.each(e,function(e){e=this._columns[this._columnPositionByName[e]],n.push(e)},this),n},sum:n.Product.define(function(e,r){return t.each(e,function(e){if(e.type===n.types.time.name)throw new Error("Can't sum up time")}),t.sum(t.map(e,function(e){return e._sum()}))}),max:n.Product.define(function(e,n){return t.max(t.map(e,function(e){return e._max()}))}),min:n.Product.define(function(e,n){return t.min(t.map(e,function(e){return e._min()}))}),mean:n.Product.define(function(e,r){var i=[];t.each(e,function(e){i.push(e.data)}),i=t.flatten(i);var s=e[0].type;return i=t.map(i,function(e){return n.types[s].numeric(e)}),t.mean(i)})})}(this,_),function(e,t,n){var r=e.Miso;r.Dataset=function(e){this.length=0,this._columns=[],this._columnPositionByName={},this._computedColumns=[],typeof e!="undefined"&&(e=e||{},this._initialize(e))},r.Dataset.prototype=new r.DataView,t.extend(r.Dataset.prototype,{_initialize:function(e){e.sync===!0&&(t.extend(this,r.Events),this.syncable=!0),this.importer=e.importer||null,this.parser=e.parser||r.Parsers.Obj,t.isUndefined(e.parser)&&(e.strict?this.parser=r.Parsers.Strict:e.delimiter&&(this.parser=r.Parsers.Delimited)),this.importer===null&&(e.url?e.interval?(this.importer=r.Importers.Polling,this.interval=e.interval):this.importer=r.Importers.Remote:this.importer=r.Importers.Local),this.parser=new this.parser(e),this.parser instanceof r.Parsers.Delimited&&(e.dataType="text"),this.importer=new this.importer(e),e.comparator&&(this.comparator=e.comparator),e.ready&&(this.ready=e.ready),e.resetOnFetch&&(this.resetOnFetch=e.resetOnFetch),e.uniqueAgainst&&(this.uniqueAgainst=e.uniqueAgainst),t.isUndefined(e.data)&&t.isUndefined(e.url)&&this._addIdColumn(),e.deferred?this.deferred=e.deferred:this.deferred=new t.Deferred,e.columns&&this.addColumns(e.columns)},fetch:function(e){e=e||{};var n=this.deferred;if(t.isNull(this.importer))throw"No importer defined";return this.importer.fetch({success:t.bind(function(t){try{this._apply(t)}catch(r){if(!e.error)throw r;e.error.call(this,r)}this.comparator&&this.sort(),this.ready&&this.ready.call(this),e.success&&e.success.call(this),n.resolveWith(this,[this])},this),error:t.bind(function(t){e.error&&e.error.call(this,t),n.reject(t)},this)}),n.promise()},_applications:{againstColumn:function(e){var n=[],i=t.keys(e),s,o=this.uniqueAgainst,u=this.column(o),a=[],f=[],l=[];t.each(e[o],function(n,i){var s=u.data.indexOf(r.types[u.type].coerce(n)),o={};t.each(e,function(e,t){o[t]=e[i]});if(s===-1)a.push(o);else{f.push(o);var l=this.rowById(this.column("_id").data[s])._id;this.update(l,o)}},this),a.length>0&&this.add(a)},blind:function(e){var n,r,i=[],s,o=t.keys(e),u=t.max(t.map(o,function(t){return e[t].length},this));for(var a=0;a<u;a++){s={};for(var f=0;f<o.length;f++)s[o[f]]=e[o[f]][a];i.push(s)}this.add(i)}},_apply:function(e){var n=this.parser.parse(e);if(!this.fetched)this._addIdColumn(),this.addColumns(t.map(n.columns,function(e){return{name:e}})),r.Builder.detectColumnTypes(this,n.data),this._applications.blind.call(this,n.data),this.fetched=!0;else if(this.resetOnFetch)this.reset(),this._applications.blind.call(this,n.data);else if(this.uniqueAgainst){if(!this.hasColumn(this.uniqueAgainst))throw new Error("You requested a unique add against a column that doesn't exist.");this._applications.againstColumn.call(this,n.data)}else this._applications.blind.call(this,n.data);r.Builder.cacheRows(this)},addColumns:function(e){t.each(e,function(e){this.addColumn(e)},this)},addComputedColumn:function(e,n,i){if(!t.isUndefined(this.column(e)))throw"There is already a column by this name.";if(typeof r.types[n]=="undefined")throw"The type "+n+" doesn't exist";var s=new r.Column({name:e,type:n,func:t.bind(i,this)});return this._columns.push(s),this._computedColumns.push(s),this._columnPositionByName[s.name]=this._columns.length-1,this.length>0&&this.each(function(e,t){s.compute(e,t)},this),s},addColumn:function(e){return t.isUndefined(this.column(e.name))?(e=new r.Column(e),this._columns.push(e),this._columnPositionByName[e.name]=this._columns.length-1,e):!1},_addIdColumn:function(e){if(!t.isUndefined(this.column("_id")))return;var n=[];e&&e>0&&t.times(e,function(){n.push(t.uniqueId())}),this.addColumn({name:"_id",type:"number",data:n});if(this._columnPositionByName._id!==0){var r=this._columns[this._columnPositionByName._id],i=this._columnPositionByName._id;this._columns.splice(i,1),this._columns.unshift(r),this._columnPositionByName._id=0,t.each(this._columnPositionByName,function(e,t){t!=="_id"&&this._columnPositionByName[t]<i&&this._columnPositionByName[t]++},this)}},add:function(e,n){n=n||{},t.isArray(e)||(e=[e]);var r=[];t.each(e,function(e){e._id||(e._id=t.uniqueId()),this._add(e,n),this.syncable&&!n.silent&&r.push({changed:e})},this);if(this.syncable&&!n.silent){var i=this._buildEvent(r);this.trigger("add",i),this.trigger("change",i)}return this},remove:function(e,n){e=this._rowFilter(e);var r=[],i=[];this.each(function(t,n){e(t)&&(i.push(t._id),r.push({old:t}))}),t.each(i,function(e){this._remove(e)},this);if(this.syncable&&(!n||!n.silent)){var s=this._buildEvent(r);this.trigger("remove",s),this.trigger("change",s)}},update:function(e,n,i){var s,o=[],u=t.bind(function(e,i){var u,a;t.isFunction(n)?a=n.apply(this,[e]):a=n,s=t.keys(a),t.each(s,function(e){u=this.column(e);if(u.isComputed())throw"You're trying to update a computed column. Those get computed!";var n=r.types[u.type];if(n){if(!n.test(a[u.name],u))throw"incorrect value '"+a[u.name]+"' of type "+r.typeOf(a[u.name],u)+" passed to column '"+u.name+"' with type "+u.type;t.isUndefined(u.before)||(a[u.name]=u.before(a[u.name])),a[u.name]=n.coerce(a[u.name],u)}u.data[i]=a[u.name]},this),typeof this._computedColumns!="undefined"&&t.each(this._computedColumns,function(n){var r=t.extend({},e,a),s=r[n.name],o=n.compute(r,i);s!==o&&(a[n.name]=o)}),o.push({_id:e._id,old:e,changed:a})},this);t.isString(e)&&(e=[e]);if(t.isArray(e)){var a,f;t.each(e,function(e){a=this.rowById(e),f=this._rowPositionById[e],u(a,f)})}else e=this._rowFilter(e),this.each(function(t,n){e(t)&&u(t,n)},this);if(this.syncable&&(!i||!i.silent)){var l=this._buildEvent(o);this.trigger("update",l),this.trigger("change",l)}return this},reset:function(e){t.each(this._columns,function(e){e.data=[]}),this.length=0,this.syncable&&(!e||!e.silent)&&this.trigger("reset")}})}(this,_,moment),function(e,t){var n=e.Miso||(e.Miso={});n.Derived=function(e){e=e||{},n.Dataset.call(this),this.parent=e.parent,this.method=e.method,this._addIdColumn(),this.addColumn({name:"_oids",type:"mixed"}),this.parent.syncable&&(t.extend(this,n.Events),this.syncable=!0,this.parent.bind("change",this._sync,this))},n.Derived.prototype=new n.Dataset,t.extend(n.Derived.prototype,{_sync:function(e){this.func.call(this.args),this.trigger("change")}}),t.extend(n.DataView.prototype,{movingAverage:function(e,r,i){i=i||{};var s=new n.Derived({parent:this,method:i.method||t.mean,size:r,args:arguments});this.eachColumn(function(e){s.addColumn({name:e,type:this.column(e).type,data:[]})},this),n.Builder.cacheColumns(s);var o=function(){var i=[];typeof e=="string"&&(e=[e]),this.column("_id").data=this.parent.column("_id").data.slice(r-1,this.parent.length),this.eachColumn(function(n,i,s){e.indexOf(n)===-1&&n!=="_oids"?i.data=this.parent.column(n).data.slice(r-1,this.parent.length):i.data=t.movingAvg(this.parent.column(n).data,r,this.method)},this),this.length=this.parent.length-r+1;var s=this.column("_oids");s.data=[];for(var o=0;o<this.length;o++)s.data.push(this.parent.column("_id").data.slice(o,o+r));return n.Builder.cacheRows(this),this};return s.func=t.bind(o,s),s.func.call(s.args)},countBy:function(e,r){function i(e,t,r){var i;for(i=0;i<e.length;i++)if(n.types[r].compare(e[i],t)===0)return i;return-1}r=r||{};var s=new n.Derived({parent:this,method:t.sum,args:arguments}),o=this.column(e);s.addColumn({name:e,type:o.type}),s.addColumn({name:"count",type:"number"}),s.addColumn({name:"_oids",type:"mixed"}),n.Builder.cacheColumns(s);var u=s._column(e).data,a=s._column("count").data,f=s._column("_oids").data,l=s._column("_id").data;return this.each(function(n){var r=i(u,n[e],o.type);r===-1?(u.push(n[e]),l.push(t.uniqueId()),a.push(1),f.push([n._id])):(a[r]+=1,f[r].push(n._id))}),n.Builder.cacheRows(s),s},groupBy:function(e,r,i){i=i||{};var s=new n.Derived({parent:this,method:i.method||t.sum,args:arguments});i&&i.preprocess&&(s.preprocess=i.preprocess);var o=t.union([e],r);t.each(o,function(e){this.addColumn({name:e,type:this.parent.column(e).type})},s),n.Builder.cacheColumns(s);var u=function(){n.Builder.clearRowCache(this);var i={},s=0,o=this._columnPositionByName[e],u=this.parent.column(e);for(var f=0;f<this.parent.length;f++){var l=null;this.preprocess?l=this.preprocess(u.data[f]):l=u.data[f],t.isUndefined(i[l])&&(i[l]=s,t.each(r,function(e){var n=this.column(e),r=this.column("_id");n.data[s]=[],r.data[s]=t.uniqueId()},this),this.column(e).data[s]=l,s++),t.each(r,function(e){var t=this.column(e),n=this.parent.column(e).data[f],r=i[l];t.data[r].push(this.parent.rowByPosition(f))},this)}var h=this._columns[this._columnPositionByName._oids];return h.data=[],t.each(r,function(e){var n=this.column(e);t.each(n.data,function(r,i){t.isArray(r)&&(h.data[i]=h.data[i]||[],h.data[i].push(t.map(r,function(e){return e._id})),h.data[i]=t.flatten(h.data[i]),n.data[i]=this.method(t.map(r,function(t){return t[e]})),this.length++)},this)},this),n.Builder.cacheRows(this),this};return s.func=t.bind(u,s),s.func.call(s.args)}})}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Importers=function(e,t){},n.Importers.prototype.extract=function(e){return e=t.clone(e),e}}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Importers.Local=function(e){e=e||{},this.data=e.data||null,this.extract=e.extract||this.extract},t.extend(n.Importers.Local.prototype,n.Importers.prototype,{fetch:function(e){var t=e.data?e.data:this.data;e.success(this.extract(t))}})}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Importers.Remote=function(e){e=e||{},this._url=e.url,this.extract=e.extract||this.extract,this.params={type:"GET",url:t.isFunction(this._url)?t.bind(this._url,this):this._url,dataType:e.dataType?e.dataType:e.jsonp?"jsonp":"json",callback:e.callback}},t.extend(n.Importers.Remote.prototype,n.Importers.prototype,{fetch:function(e){var r=t.bind(function(t){e.success(this.extract(t))},this);this.callback&&(window[this.callback]=r),n.Xhr(t.extend(this.params,{success:this.callback?this.callback:r,error:e.error}))}});var r={url:"",data:"",dataType:"",success:function(){},type:"GET",async:!0,xhr:function(){return e.ActiveXObject?new e.ActiveXObject("Microsoft.XMLHTTP"):new e.XMLHttpRequest}},i=/\?/;n.Xhr=function(e){e.dataType=e.dataType&&e.dataType.toLowerCase()||null;var s=t.isFunction(e.url)?e.url():e.url;if(!(!e.dataType||e.dataType!=="jsonp"&&e.dataType!=="script")){n.Xhr.getJSONP(s,e.success,e.dataType==="script",e.error,e.callback);return}var o=t.extend({},r,e,{url:s});o.ajax=o.xhr();if(o.ajax)return o.type==="GET"&&o.data&&(o.url+=(i.test(o.url)?"&":"?")+o.data,o.data=null),o.ajax.open(o.type,o.url,o.async),o.ajax.send(o.data||null),n.Xhr.httpData(o)},n.Xhr.getJSONP=function(e,n,r,i,s){if(r){var o=document.querySelectorAll('script[src="'+e+'"]');if(o.length){n&&n(!0);return}}var u=document.head||document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script"),f=e.split("?")[1],l=!1,c=[],h;f&&!r&&(c=f.split("&")),c.length&&(h=c[c.length-1].split("="));if(!s){var p=t.uniqueId("callback");s=c.length?h[1]?h[1]:p:p}!f&&!r&&(e+="?");if(!f||!/callback/.test(f))f&&(e+="&"),e+="callback="+s;s&&!r&&(!window[s]||(s=s+ +(new Date)+t.uniqueId()),window[s]=function(e){n&&n(e),l=!0},h&&(e=e.replace(h.join("="),h[0]+"="+s))),a.onload=a.onreadystatechange=function(){if(!a.readyState||/loaded|complete/.test(a.readyState)){r&&n&&n();if(l){try{delete window[s]}catch(e){window[s]=void 0}u.removeChild(a)}}},a.onerror=function(e){i&&i.call(null,e)},a.src=e,u.insertBefore(a,u.firstChild);return},n.Xhr.httpData=function(e){var t,n=null;return e.ajax.onreadystatechange=function(){if(e.ajax.readyState===4){try{n=JSON.parse(e.ajax.responseText)}catch(r){}t={xml:e.ajax.responseXML,text:e.ajax.responseText,json:n},e.dataType&&(t=t[e.dataType]),/(2..)/.test(e.ajax.status)?e.success.call(e.ajax,t):e.error&&e.error.call(null,e.ajax.statusText)}},t}}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Importers.Polling=function(e){e=e||{},this.interval=e.interval||1e3,this._def=null,n.Importers.Remote.apply(this,[e])},t.extend(n.Importers.Polling.prototype,n.Importers.Remote.prototype,{fetch:function(r){this._def===null&&(this._def=t.Deferred(),this.success_callback=t.bind(function(e){r.success(this.extract(e)),this._def.resolve(this)},this),this.error_callback=t.bind(function(e){r.error(e),this._def.reject(e)},this)),t.when(this._def.promise()).then(function(e){var n=t.bind(function(){this.fetch({success:this.success_callback,error:this.error_callback})},e);e._timeout=setTimeout(n,e.interval),e._def=t.Deferred()}),n.Xhr(t.extend(this.params,{success:this.success_callback,error:this.error_callback})),e.imp=this},stop:function(){this._def!==null&&this._def.reject(),typeof this._timeout!="undefined"&&clearTimeout(this._timeout)},start:function(){this._def!==null&&(this._def=t.Deferred(),this.fetch())}})}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Importers.GoogleSpreadsheet=function(e){e=e||{};if(e.url)e.url=e.url;else{if(t.isUndefined(e.key))throw new Error("Set options 'key' properties to point to your google document.");e.fast?(e.url="https://spreadsheets.google.com/tq?key="+e.key,typeof e.sheetName=="undefined"&&(e.sheetName="Sheet1"),e.url+="&sheet="+e.sheetName,this.callback="misodsgs"+(new Date).getTime(),e.url+="&tqx=version:0.6;responseHandler:"+this.callback,e.url+=";reqId:0;out:json&tq&_=1335871249558#",delete e.sheetName):e.url="https://spreadsheets.google.com/feeds/cells/"+e.key+"/"+e.worksheet+"/public/basic?alt=json-in-script&callback=",delete e.key}return this.params={type:"GET",url:e.url,dataType:"jsonp"},this},t.extend(n.Importers.GoogleSpreadsheet.prototype,n.Importers.Remote.prototype)}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Parsers=function(e){this.options=e||{}},t.extend(n.Parsers.prototype,{parse:function(){}})}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Parsers.Strict=function(e){this.options=e||{}},t.extend(n.Parsers.Strict.prototype,n.Parsers.prototype,{parse:function(e){var n={},r=[];return t.each(e.columns,function(e){if(r.indexOf(e.name)!==-1)throw new Error('You have more than one column named "'+e.name+'"');r.push(e.name),n[e.name]=e.data}),{columns:r,data:n}}})}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Parsers.Obj=n.Parsers,t.extend(n.Parsers.Obj.prototype,n.Parsers.prototype,{parse:function(e){var n=t.keys(e[0]),r={};return t.each(n,function(e){r[e]=[]}),t.each(n,function(n){t.times(e.length,function(t){r[n].push(e[t][n])})}),{columns:n,data:r}}})}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Parsers.GoogleSpreadsheet=function(e){this.fast=e.fast||!1},t.extend(n.Parsers.GoogleSpreadsheet.prototype,n.Parsers.prototype,{parse:function(e){var n=[],r=[],i={},s;if(typeof e.status!="undefined"&&e.status==="error")throw new Error("You can't use the fast importer for this url. Disable the fast flag");if(this.fast){n=t.pluck(e.table.cols,"label");if(t.unique(n).length<n.length){var o="";throw t.inject(n,function(e,t){return e[t]=e[t]+1||1,e[t]>1&&(o=t),e},{}),new Error('You have more than one column named "'+o+'"')}t.each(e.table.rows,function(e){e=e.c;for(s=0;s<e.length;s++)r[s]=r[s]||[],e[s].v===""?r[s].push(null):r[s].push(e[s].v)}),t.each(n,function(e,t){i[e]=r[t]})}else{var u=/([A-Z]+)(\d+)/,a={};t.each(e.feed.entry,function(e,t){var i=u.exec(e.title.$t),s=i[1],o=parseInt(i[2],10);if(o===1){if(n.indexOf(e.content.$t)!==-1)throw new Error('You have more than one column named "'+e.content.$t+'"');a[s]=r.length,n[a[s]]=e.content.$t,r[a[s]]=[]}else{var f=a[s];r[f][o-1]=e.content.$t}},this),t.each(r,function(e,s){e.length=t.max(t.pluck(r,"length")),e.splice(0,1);for(var o=0;o<e.length;o++)if(t.isUndefined(e[o])||e[o]==="")e[o]=null;i[n[s]]=e})}return{columns:n,data:i}}})}(this,_),function(e,t){var n=e.Miso||(e.Miso={});n.Parsers.Delimited=function(e){e=e||{},this.delimiter=e.delimiter||",",this.skipRows=e.skipRows||0,this.emptyValue=e.emptyValue||null,this.__delimiterPatterns=new RegExp("(\\"+this.delimiter+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+this.delimiter+"\\r\\n]*))","gi")},typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.extend(n.Parsers.Delimited.prototype,n.Parsers.prototype,{parse:function(e){var n=[],r={},i={},s=function(e){i[e]||(i[e]=0);var t=e+i[e];return i[e]+=1,t},o=function(e,i,o,u,a){o=o||",";var f=null,l=0,h=!1,p=-1,d=0;try{i=i.replace(/\s+$/,"").replace(/^[\r|\n|\s]+[\r|\n]/,"\n");if(u>0){var v=0,m=0,g=i.length;while(v<u&&m<g)/\n|\r|\r\n/.test(i.charAt(m))&&v++,m++;i=i.slice(m,g)}function y(e){var i=e[1];if(i.length&&i!==o){d++;if(p<l-1)throw d--,new Error("Not enough items in row");h=!0,p=0}else h||l++,p++;var u=null;e[2]?u=e[2].replace(new RegExp('""',"g"),'"'):u=e[3];if(h){u===""&&(u=a);if(typeof r[n[p]]=="undefined")throw new Error("Too many items in row");r[n[p]].push(u)}else{var f=function(e){var t=s(e);while(n.indexOf(t)!==-1)t=s(e);return t};if(t.isUndefined(u)||u==="")u="X";n.indexOf(u)!==-1&&(u=f(u)),n.push(u),r[u]=[]}}(new RegExp("^"+o)).test(i)&&y(["","",undefined,""]);while(f=e.exec(i))y(f)}catch(w){throw new Error("Error while parsing delimited data on row "+d+". Message: "+w.message)}return{columns:n,data:r}};return o(this.__delimiterPatterns,e,this.delimiter,this.skipRows,this.emptyValue)}})}(this,_),this.Handlebars={},function(e){e.VERSION="1.0.rc.1",e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(r,i){var s=i.inverse||function(){},o=i.fn,u="",a=t.call(r);return a===n&&(r=r.call(this)),r===!0?o(this):r===!1||r==null?s(this):a==="[object Array]"?r.length>0?e.helpers.each(r,i):s(this):o(r)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s="",o;n.data&&(o=e.createFrame(n.data));if(t&&t.length>0)for(var u=0,a=t.length;u<a;u++)o&&(o.index=u),s+=r(t[u],{data:o});else s=i(this);return s}),e.registerHelper("if",function(r,i){var s=t.call(r);return s===n&&(r=r.call(this)),!r||e.Utils.isEmpty(r)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){var r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t){e.log(t)})}(this.Handlebars);var handlebars=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,DATA:27,param:28,STRING:29,INTEGER:30,BOOLEAN:31,hashSegments:32,hashSegment:33,ID:34,EQUALS:35,pathSegments:36,SEP:37,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",27:"DATA",29:"STRING",30:"INTEGER",31:"BOOLEAN",34:"ID",35:"EQUALS",37:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[17,1],[25,2],[25,1],[28,1],[28,1],[28,1],[28,1],[28,1],[26,1],[32,2],[32,1],[33,3],[33,3],[33,3],[33,3],[33,3],[21,1],[36,3],[36,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 3:this.$=new i.ProgramNode(o[a]);break;case 4:this.$=new i.ProgramNode([]);break;case 5:this.$=[o[a]];break;case 6:o[a-1].push(o[a]),this.$=o[a-1];break;case 7:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 8:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 9:this.$=o[a];break;case 10:this.$=o[a];break;case 11:this.$=new i.ContentNode(o[a]);break;case 12:this.$=new i.CommentNode(o[a]);break;case 13:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 14:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 15:this.$=o[a-1];break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 18:this.$=new i.PartialNode(o[a-1]);break;case 19:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 20:break;case 21:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 22:this.$=[[o[a-1]].concat(o[a]),null];break;case 23:this.$=[[o[a-1]],o[a]];break;case 24:this.$=[[o[a]],null];break;case 25:this.$=[[new i.DataNode(o[a])],null];break;case 26:o[a-1].push(o[a]),this.$=o[a-1];break;case 27:this.$=[o[a]];break;case 28:this.$=o[a];break;case 29:this.$=new i.StringNode(o[a]);break;case 30:this.$=new i.IntegerNode(o[a]);break;case 31:this.$=new i.BooleanNode(o[a]);break;case 32:this.$=new i.DataNode(o[a]);break;case 33:this.$=new i.HashNode(o[a]);break;case 34:o[a-1].push(o[a]),this.$=o[a-1];break;case 35:this.$=[o[a]];break;case 36:this.$=[o[a-2],o[a]];break;case 37:this.$=[o[a-2],new i.StringNode(o[a])];break;case 38:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 39:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 40:this.$=[o[a-2],new i.DataNode(o[a])];break;case 41:this.$=new i.IdNode(o[a]);break;case 42:o[a-2].push(o[a]),this.$=o[a-2];break;case 43:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,27:[1,24],34:[1,26],36:25},{17:27,21:23,27:[1,24],34:[1,26],36:25},{17:28,21:23,27:[1,24],34:[1,26],36:25},{17:29,21:23,27:[1,24],34:[1,26],36:25},{21:30,34:[1,26],36:25},{1:[2,1]},{6:31,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,32],21:23,27:[1,24],34:[1,26],36:25},{10:33,20:[1,34]},{10:35,20:[1,34]},{18:[1,36]},{18:[2,24],21:41,25:37,26:38,27:[1,45],28:39,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,25]},{18:[2,41],27:[2,41],29:[2,41],30:[2,41],31:[2,41],34:[2,41],37:[1,48]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],37:[2,43]},{18:[1,49]},{18:[1,50]},{18:[1,51]},{18:[1,52],21:53,34:[1,26],36:25},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:54,34:[1,26],36:25},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:41,26:55,27:[1,45],28:56,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,23]},{18:[2,27],27:[2,27],29:[2,27],30:[2,27],31:[2,27],34:[2,27]},{18:[2,33],33:57,34:[1,58]},{18:[2,28],27:[2,28],29:[2,28],30:[2,28],31:[2,28],34:[2,28]},{18:[2,29],27:[2,29],29:[2,29],30:[2,29],31:[2,29],34:[2,29]},{18:[2,30],27:[2,30],29:[2,30],30:[2,30],31:[2,30],34:[2,30]},{18:[2,31],27:[2,31],29:[2,31],30:[2,31],31:[2,31],34:[2,31]},{18:[2,32],27:[2,32],29:[2,32],30:[2,32],31:[2,32],34:[2,32]},{18:[2,35],34:[2,35]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],35:[1,59],37:[2,43]},{34:[1,60]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,61]},{18:[1,62]},{18:[2,21]},{18:[2,26],27:[2,26],29:[2,26],30:[2,26],31:[2,26],34:[2,26]},{18:[2,34],34:[2,34]},{35:[1,59]},{21:63,27:[1,67],29:[1,64],30:[1,65],31:[1,66],34:[1,26],36:25},{18:[2,42],27:[2,42],29:[2,42],30:[2,42],31:[2,42],34:[2,42],37:[2,42]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,36],34:[2,36]},{18:[2,37],34:[2,37]},{18:[2,38],34:[2,38]},{18:[2,39],34:[2,39]},{18:[2,40],34:[2,40]}],defaultActions:{16:[2,1],24:[2,25],38:[2,23],55:[2,21]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 35;case 13:return 34;case 14:return 34;case 15:return 37;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),29;case 20:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),29;case 21:return n.yytext=n.yytext.substr(1),27;case 22:return 31;case 23:return 31;case 24:return 30;case 25:return 34;case 26:return n.yytext=n.yytext.substr(1,n.yyleng-2),34;case 27:return"INVALID";case 28:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,28],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=handlebars,exports.Parser=handlebars.Parser,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");var n,r;return typeof process!="undefined"?n=require("fs").readFileSync(require("path").resolve(t[1]),"utf8"):n=require("file").path(require("file").cwd()).join(t[1]).read({charset:"utf-8"}),exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(e){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e)},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){}},Handlebars.log=function(e,t){Handlebars.logger.log(e,t)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.id=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,r,i){e(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(e){this.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");var t=[],n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===".."?n++:s==="."||s==="this"?this.isScoped=!0:t.push(s)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=e.length===1&&!this.isScoped&&n===0},Handlebars.AST.DataNode=function(e){this.type="DATA",this.id=e},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e},Handlebars.AST.CommentNode=function(e){this.type="comment",this.comment=e}}(),Handlebars.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/[&<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return typeof e=="undefined"?!0:e===null?!0:e===!1?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.prototype={compiler:e,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("pushLiteral","{}"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("pushLiteral","{}"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("push","{}");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.accept(r),this.opcode("assignToHash",n[0])},partial:function(e){var t=e.id;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.original),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0];this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i)},simpleMustache:function(e,t,n){var r=e.id;r.type==="DATA"?this.DATA(r):r.parts.length?this.ID(r):(this.addDepth(r.depth),this.opcode("getContext",r.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.string)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("pushLiteral","{}"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("pushLiteral","{}"),r}};var n=function(e){this.value=e};t.prototype={nameLookup:function(e,n,r){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":"buffer += "+e+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(o=i.length;this.i<o;this.i++)s=i[this.i],s.opcode==="DECLARE"?this[s.name]=s.value:this[s.opcode].apply(this,s.args);return this.createFunctionContext(r)},nextOpcode:function(){var e=this.environment.opcodes,t=e[this.i+1];return e[this.i+1]},eat:function(e){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild){var n=[];for(var r in this.context.aliases)this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);if(e)return i.push(this.source.join("\n  ")),Function.apply(this,i);var u="function "+(this.name||"")+"("+i.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,u+"\n\n"),u},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),t+" = blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var e=this.nextOpcode(),t="";this.context.aliases.escapeExpression="this.escapeExpression",e&&e.opcode==="appendContent"&&(t=" + "+this.quotedString(e.args[0]),this.eat(e)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+t))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.pushStack(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+"() : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.pushStack(this.nameLookup("data",e,"data"))},pushStringParam:function(e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e)},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){this.pushStack(e)},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t);this.register("foundHelper",n.name),this.pushStack("foundHelper ? foundHelper.call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")")},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.pushStack(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var t=this.setupHelper(0,e),n=this.lastHelper=this.nameLookup("helpers",e,"helper");this.register("foundHelper",n);var r=this.nameLookup("depth"+this.lastContext,e,"context"),i=this.nextStack();this.source.push("if (foundHelper) { "+i+" = foundHelper.call("+t.callParams+"); }"),this.source.push("else { "+i+" = "+r+"; "+i+" = typeof "+i+" === functionType ? "+i+"() : "+i+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.pushStack("self.invokePartial("+t.join(", ")+");")},assignToHash:function(e){var t=this.popStack(),n=this.topStack();this.source.push(n+"['"+e+"'] = "+t+";")},compiler:t,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler,this.context.programs.push("");var u=this.context.programs.length;r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context)}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.compileStack.push(new n(e)),e},pushStack:function(e){return this.source.push(this.incrStack()+" = "+e+";"),this.compileStack.push("stack"+this.stackSlot),"stack"+this.stackSlot},replaceStack:function(e){var t=e.call(this,this.topStack());return this.source.push(this.topStack()+" = "+t+";"),"stack"+this.stackSlot},nextStack:function(e){var t=this.incrStack();return this.compileStack.push("stack"+this.stackSlot),t},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){var e=this.compileStack.pop();return e instanceof n?e.value:(this.stackSlot--,e)},topStack:function(){var e=this.compileStack[this.compileStack.length-1];return e instanceof n?e.value:e},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t){var n=[];this.setupParams(e,n);var r=this.nameLookup("helpers",t,"helper");return{params:n,name:r,callParams:["depth0"].concat(n).join(", "),helperMissingParams:["depth0",this.quotedString(t)].concat(n).join(", ")}},setupParams:function(e,t){var n=[],r=[],i,s,o;n.push("hash:"+this.popStack()),s=this.popStack(),o=this.popStack();if(o||s)o||(this.context.aliases.self="this",o="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),n.push("inverse:"+s),n.push("fn:"+o);for(var u=0;u<e;u++)i=this.popStack(),t.push(i),this.options.stringParams&&r.push(this.popStack());return this.options.stringParams&&n.push("contexts:["+r.join(",")+"]"),this.options.data&&n.push("data:data"),t.push("{"+n.join(",")+"}"),t.join(", ")}};var r="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),i=t.RESERVED_WORDS={};for(var s=0,o=r.length;s<o;s++)i[r[s]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){t=t||{};var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(r,t)},Handlebars.compile=function(e,t){function r(){var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t),i=(new Handlebars.JavaScriptCompiler).compile(r,t,undefined,!0);return Handlebars.template(i)}t=t||{};var n;return function(e,t){return n||(n=r()),n.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(n,r){return r=r||{},e.call(t,Handlebars,n,r.helpers,r.partials,r.data)}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){var o={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,o);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e,{data:s!==undefined}),i[t](n,o)}},Handlebars.template=Handlebars.VM.template,function(e){e.fn.jOdometer=function(t){function b(e){e!=undefined?(clearInterval(y),s=e,w(s)):(w(s),s+=t.increment),t.counterEnd!=0&&s>=t.counterEnd&&(clearInterval(y),w(t.counterEnd))}function w(r){a=String(r).split(".");if(u.length>0)for(h=0;h<u.length;h++)oldDigit=u[h],a[1]&&(u[h]=a[1].charAt(h)),u[h]==""&&(u[h]="0"),E(e(".jodometer_decimal_"+h,n),parseInt(u[h]),parseInt(oldDigit));p=a[0],c=p.length-1;var s=t.maxDigits==0?o.length:t.maxDigits;for(h=0;h<s;h++)oldDigit=o[h],c>=0&&(o[h]=p.charAt(c)),o[h]==""&&t.maxDigits==0&&(o[h]="0"),oldDigit==""&&(t.prefixChar?(c==0&&(e(".jodometer_integer_"+h,n).animate({top:i},0,"linear"),oldDigit="0"),c==-1&&(e(".jodometer_integer_"+h,n).animate({top:15*t.heightNumber*-1},1,"linear"),e(".jodometer_integer_"+h,n).show())):c==0&&(e(".jodometer_integer_"+h,n).show(),oldDigit="0")),E(e(".jodometer_integer_"+h,n),parseInt(o[h]),parseInt(oldDigit)),c--}function E(e,n,r){if(isNaN(n)||isNaN(r))return this;n!=r&&(e.stop(),n==0?e.animate({top:10*t.heightNumber*-1+i},t.speed,t.easing).animate({top:i},1,"linear"):n<r?e.animate({top:10*t.heightNumber*-1+i},t.speed*((10-r)/10),"linear").animate({top:i},1,"linear").animate({top:n*t.heightNumber*-1+i},t.speed*r/10,t.easing):e.animate({top:n*t.heightNumber*-1+i},t.speed,t.easing))}if(this.length>1)return this.each(function(){e(this).jOdometer(t)}),this;t=e.extend({},e.fn.jOdometer.defaults,t),this.goToNumber=function(e){b(e)};var n=e(this),r=this,i=-t.heightNumber,s=parseFloat(t.counterStart),o=[],u=[],a=String(t.counterStart).split("."),f=0,l=0;if(a[1]){var c=0;for(var h=a[1].length-1;h>-1;h--)u[h]=a[1].charAt(h),e(this).append('<img style="position:absolute; right:'+(c*t.widthNumber+t.offsetRight+c*t.spaceNumbers)+"px; top:"+(parseInt(u[h])*t.heightNumber*-1+i)+'px;" class="jodometer_decimal_'+h+'" src="'+t.numbersImage+'" alt="Decimal '+(h+1)+'" />'),c++;e(this).append('<div style="position:absolute; width:'+t.widthDot+"px; height:"+t.heightNumber+"px; background:url("+t.numbersImage+") no-repeat center "+(12*t.heightNumber*-1+i)+"px; right:"+(a[1].length*t.widthNumber+t.offsetRight+a[1].length*t.spaceNumbers)+'px;" class="jodometer_dot"></div>'),f=a[1].length,l=t.widthDot}var p=a[0],c=p.length-1,d=0,v=t.maxDigits==0?p.length:t.maxDigits;for(var h=0;h<v;h++){h<p.length?o[h]=p.charAt(c):o[h]="",t.formatNumber&&h>0&&h%3==0&&(e(this).append('<div style="position:absolute; width:'+t.widthDot+"px; "+"height:"+t.heightNumber+"px; "+"background:url("+t.numbersImage+") "+"no-repeat center bottom; "+"right:"+(h*t.widthNumber+f*t.widthNumber+l+d+t.offsetRight+f*t.spaceNumbers+h*t.spaceNumbers+t.spaceNumbers)+"px;"+'" class="jodometer_dot"></div>'),d+=t.widthDot+t.spaceNumbers);var m="";c<0&&(m="display:none; ");var g=parseInt(o[h]);t.prefixChar&&c==-1&&(m="",g=14),e(this).append('<img style="'+m+"position:absolute; "+"right:"+(h*t.widthNumber+f*t.widthNumber+l+d+t.offsetRight+f*t.spaceNumbers+h*t.spaceNumbers+t.spaceNumbers)+"px; "+"top:"+(g*t.heightNumber*-1+i)+"px;"+'" class="jodometer_integer_'+h+'" src="'+t.numbersImage+'" alt="Integer '+(h+1)+'" />'),c--}if(parseFloat(t.counterStart)!=t.counterEnd||t.counterEnd.toString()=="false"&&parseFloat(t.counterStart)==0)var y=setInterval(function(){b()},t.delayTime);return this},e.fn.jOdometer.defaults={counterStart:"0000.00",counterEnd:!1,delayTime:1e3,increment:.01,speed:500,easing:"swing",numbersImage:"/images/jodometer-numbers.png",formatNumber:!1,heightNumber:31,widthNumber:14,offsetRight:0,spaceNumbers:0,widthDot:10,maxDigits:0,prefixChar:!1}}(jQuery),function(e,t,n,r){var i=n(e),s=n(t),o=n.fancybox=function(){o.open.apply(this,arguments)},u=null,a=t.createTouch!==r,f=function(e){return e&&e.hasOwnProperty&&e instanceof n},l=function(e){return e&&"string"===n.type(e)},c=function(e){return l(e)&&0<e.indexOf("%")},h=function(e,t){var n=parseInt(e,10);return t&&c(e)&&(n*=o.getViewport()[t]/100),Math.ceil(n)},p=function(e,t){return h(e,t)+"px"};n.extend(o,{version:"2.1.0",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!a,autoCenter:!a,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"'+(n.browser.msie?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{closeClick:!0,speedOut:200,showEarly:!0,css:{}},title:{type:"float"}},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeChange:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){if(e&&(n.isPlainObject(t)||(t={}),!1!==o.close(!0)))return n.isArray(e)||(e=f(e)?n(e).get():[e]),n.each(e,function(i,s){var u={},a,c,h,p,d;"object"===n.type(s)&&(s.nodeType&&(s=n(s)),f(s)?(u={href:s.attr("href"),title:s.attr("title"),isDom:!0,element:s},n.metadata&&n.extend(!0,u,s.metadata())):u=s),a=t.href||u.href||(l(s)?s:null),c=t.title!==r?t.title:u.title||"",p=(h=t.content||u.content)?"html":t.type||u.type,!p&&u.isDom&&(p=s.data("fancybox-type"),p||(p=(p=s.prop("class").match(/fancybox\.(\w+)/))?p[1]:null)),l(a)&&(p||(o.isImage(a)?p="image":o.isSWF(a)?p="swf":"#"===a.charAt(0)?p="inline":l(s)&&(p="html",h=s)),"ajax"===p)&&(d=a.split(/\s+/,2),a=d.shift(),d=d.shift()),h||("inline"===p?a?h=n(l(a)?a.replace(/.*(?=#[^\s]+$)/,""):a):u.isDom&&(h=s):"html"===p?h=a:!p&&!a&&u.isDom&&(p="inline",h=s)),n.extend(u,{href:a,type:p,content:h,title:c,selector:d}),e[i]=u}),o.opts=n.extend(!0,{},o.defaults,t),t.keys!==r&&(o.opts.keys=t.keys?n.extend({},o.defaults.keys,t.keys):!1),o.group=e,o._start(o.opts.index)},cancel:function(){var e=o.coming;e&&!1!==o.trigger("onCancel")&&(o.hideLoading(),o.ajaxLoad&&o.ajaxLoad.abort(),o.ajaxLoad=null,o.imgPreload&&(o.imgPreload.onload=o.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0).trigger("onReset").remove(),o.current||o.trigger("afterClose"),o.coming=null)},close:function(e){o.cancel(),!1!==o.trigger("beforeClose")&&(o.unbindEvents(),!o.isOpen||!0===e?(n(".fancybox-wrap").stop(!0).trigger("onReset").remove(),o._afterZoomOut()):(o.isOpen=o.isOpened=!1,o.isClosing=!0,n(".fancybox-item, .fancybox-nav").remove(),o.wrap.stop(!0,!0).removeClass("fancybox-opened"),"fixed"===o.wrap.css("position")&&o.wrap.css(o._getPosition(!0)),o.transitions[o.current.closeMethod]()))},play:function(e){var t=function(){clearTimeout(o.player.timer)},r=function(){t(),o.current&&o.player.isActive&&(o.player.timer=setTimeout(o.next,o.current.playSpeed))},i=function(){t(),n("body").unbind(".player"),o.player.isActive=!1,o.trigger("onPlayEnd")};!0===e||!o.player.isActive&&!1!==e?o.current&&(o.current.loop||o.current.index<o.group.length-1)&&(o.player.isActive=!0,n("body").bind({"afterShow.player onUpdate.player":r,"onCancel.player beforeClose.player":i,"beforeLoad.player":t}),r(),o.trigger("onPlayStart")):i()},next:function(e){var t=o.current;t&&(l(e)||(e=t.direction.next),o.jumpto(t.index+1,e,"next"))},prev:function(e){var t=o.current;t&&(l(e)||(e=t.direction.prev),o.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,n){var i=o.current;i&&(e=h(e),o.direction=t||i.direction[e>=i.index?"next":"prev"],o.router=n||"jumpto",i.loop&&(0>e&&(e=i.group.length+e%i.group.length),e%=i.group.length),i.group[e]!==r)&&(o.cancel(),o._start(e))},reposition:function(e,t){var n;o.isOpen&&(n=o._getPosition(t),e&&"scroll"===e.type?(delete n.position,o.wrap.stop(!0,!0).animate(n,200)):o.wrap.css(n))},update:function(e){var t=e&&e.type,n=!t||"orientationchange"===t;n&&(clearTimeout(u),u=null);if(o.isOpen&&!u){if(n||a)o.wrap.removeAttr("style").addClass("fancybox-tmp"),o.trigger("onUpdate");u=setTimeout(function(){var n=o.current;n&&(o.wrap.removeClass("fancybox-tmp"),t!=="scroll"&&o._setDimension(),t==="scroll"&&n.canShrink||o.reposition(e),o.trigger("onUpdate"),u=null)},a?500:n?20:300)}},toggle:function(e){o.isOpen&&(o.current.fitToView="boolean"===n.type(e)?e:!o.current.fitToView,o.update())},hideLoading:function(){s.unbind("keypress.fb"),n("#fancybox-loading").remove()},showLoading:function(){var e,t;o.hideLoading(),s.bind("keypress.fb",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),o.cancel())}),e=n('<div id="fancybox-loading"><div></div></div>').click(o.cancel).appendTo("body"),o.defaults.fixed||(t=o.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=o.current?o.current.locked:!1,n={x:i.scrollLeft(),y:i.scrollTop()};return t?(n.w=t[0].clientWidth,n.h=t[0].clientHeight):(n.w=a&&e.innerWidth?e.innerWidth:i.width(),n.h=a&&e.innerHeight?e.innerHeight:i.height()),n},unbindEvents:function(){o.wrap&&f(o.wrap)&&o.wrap.unbind(".fb"),s.unbind(".fb"),i.unbind(".fb")},bindEvents:function(){var e=o.current,t;e&&(i.bind("orientationchange.fb"+(a?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),o.update),(t=e.keys)&&s.bind("keydown.fb",function(i){var s=i.which||i.keyCode,u=i.target||i.srcElement;!i.ctrlKey&&!i.altKey&&!i.shiftKey&&!i.metaKey&&(!u||!u.type&&!n(u).is("[contenteditable]"))&&n.each(t,function(t,u){if(1<e.group.length&&u[s]!==r)return o[t](u[s]),i.preventDefault(),!1;if(-1<n.inArray(s,u))return o[t](),i.preventDefault(),!1})}),n.fn.mousewheel&&e.mouseWheel&&o.wrap.bind("mousewheel.fb",function(t,r,i,s){for(var u=n(t.target||null),a=!1;u.length&&!a&&!u.is(".fancybox-skin")&&!u.is(".fancybox-wrap");)a=u[0]&&(!u[0].style.overflow||"hidden"!==u[0].style.overflow)&&(u[0].clientWidth&&u[0].scrollWidth>u[0].clientWidth||u[0].clientHeight&&u[0].scrollHeight>u[0].clientHeight),u=n(u).parent();0!==r&&!a&&1<o.group.length&&!e.canShrink&&(0<s||0<i?o.prev(0<s?"down":"left"):(0>s||0>i)&&o.next(0>s?"up":"right"),t.preventDefault())}))},trigger:function(e,t){var r,i=t||o.coming||o.current;if(i){n.isFunction(i[e])&&(r=i[e].apply(i,Array.prototype.slice.call(arguments,1)));if(!1===r)return!1;"onCancel"===e&&!o.isOpened&&(o.isActive=!1),i.helpers&&n.each(i.helpers,function(t,r){r&&o.helpers[t]&&n.isFunction(o.helpers[t][e])&&o.helpers[t][e](r,i)}),n.event.trigger(e+".fb")}},isImage:function(e){return l(e)&&e.match(/\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$/i)},isSWF:function(e){return l(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t={},r,i,e=h(e);r=o.group[e]||null;if(!r)return!1;t=n.extend(!0,{},o.opts,r),r=t.margin,i=t.padding,"number"===n.type(r)&&(t.margin=[r,r,r,r]),"number"===n.type(i)&&(t.padding=[i,i,i,i]),t.modal&&n.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),t.autoSize&&(t.autoWidth=t.autoHeight=!0),"auto"===t.width&&(t.autoWidth=!0),"auto"===t.height&&(t.autoHeight=!0),t.group=o.group,t.index=e,o.coming=t;if(!1===o.trigger("beforeLoad"))o.coming=null;else{i=t.type,r=t.href;if(!i)return o.coming=null,o.current&&o.router&&"jumpto"!==o.router?(o.current.index=e,o[o.router](o.direction)):!1;o.isActive=!0;if("image"===i||"swf"===i)t.autoHeight=t.autoWidth=!1,t.scrolling="visible";"image"===i&&(t.aspectRatio=!0),"iframe"===i&&a&&(t.scrolling="scroll"),t.wrap=n(t.tpl.wrap).addClass("fancybox-"+(a?"mobile":"desktop")+" fancybox-type-"+i+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent),n.extend(t,{skin:n(".fancybox-skin",t.wrap),outer:n(".fancybox-outer",t.wrap),inner:n(".fancybox-inner",t.wrap)}),n.each(["Top","Right","Bottom","Left"],function(e,n){t.skin.css("padding"+n,p(t.padding[e]))}),o.trigger("onReady");if("inline"===i||"html"===i){if(!t.content||!t.content.length)return o._error("content")}else if(!r)return o._error("href");"image"===i?o._loadImage():"ajax"===i?o._loadAjax():"iframe"===i?o._loadIframe():o._afterLoad()}},_error:function(e){n.extend(o.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:o.coming.tpl.error}),o._afterLoad()},_loadImage:function(){var e=o.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,o.coming.width=this.width,o.coming.height=this.height,o._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,o._error("image")},e.src=o.coming.href,(e.complete===r||!e.complete)&&o.showLoading()},_loadAjax:function(){var e=o.coming;o.showLoading(),o.ajaxLoad=n.ajax(n.extend({},e.ajax,{url:e.href,error:function(e,t){o.coming&&"abort"!==t?o._error("ajax",e):o.hideLoading()},success:function(t,n){"success"===n&&(e.content=t,o._afterLoad())}}))},_loadIframe:function(){var e=o.coming,t=n(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",a?"auto":e.iframe.scrolling).attr("src",e.href);n(e.wrap).bind("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(o.showLoading(),t.one("load",function(){n(this).data("ready",1),a||n(this).bind("load.fb",o.update),n(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),o._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||o._afterLoad()},_preloadImages:function(){var e=o.group,t=o.current,n=e.length,r=t.preload?Math.min(t.preload,n-1):0,i,s;for(s=1;s<=r;s+=1)i=e[(t.index+s)%n],"image"===i.type&&i.href&&((new Image).src=i.href)},_afterLoad:function(){var e=o.coming,t=o.current,r,i,s,u,a;o.hideLoading();if(e&&!1!==o.isActive)if(!1===o.trigger("afterLoad",e,t))e.wrap.stop(!0).trigger("onReset").remove(),o.coming=null;else{t&&(o.trigger("beforeChange",t),t.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove(),"fixed"===t.wrap.css("position")&&t.wrap.css(o._getPosition(!0))),o.unbindEvents(),r=e.content,i=e.type,s=e.scrolling,n.extend(o,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:t}),u=e.href;switch(i){case"inline":case"ajax":case"html":e.selector?r=n("<div>").html(r).find(e.selector):f(r)&&(r.data("fancybox-placeholder")||r.data("fancybox-placeholder",n('<div class="fancybox-placeholder"></div>').insertAfter(r).hide()),r=r.show().detach(),e.wrap.bind("onReset",function(){n(this).find(r).length&&r.hide().replaceAll(r.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":r=e.tpl.image.replace("{href}",u);break;case"swf":r='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+u+'"></param>',a="",n.each(e.swf,function(e,t){r+='<param name="'+e+'" value="'+t+'"></param>',a+=" "+e+'="'+t+'"'}),r+='<embed src="'+u+'" type="application/x-shockwave-flash" width="100%" height="100%"'+a+"></embed></object>"}(!f(r)||!r.parent().is(e.inner))&&e.inner.append(r),o.trigger("beforeShow"),e.inner.css("overflow","yes"===s?"scroll":"no"===s?"hidden":s),o._setDimension(),e.wrap.removeClass("fancybox-tmp"),e.pos=n.extend({},e.dim,o._getPosition(!0)),o.isOpen=!1,o.coming=null,o.bindEvents(),o.isOpened?t.prevMethod&&o.transitions[t.prevMethod]():n(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),o.transitions[o.isOpened?e.nextMethod:e.openMethod](),o._preloadImages()}},_setDimension:function(){var e=o.getViewport(),t=0,r=!1,i=!1,r=o.wrap,s=o.skin,u=o.inner,a=o.current,i=a.width,f=a.height,l=a.minWidth,d=a.minHeight,m=a.maxWidth,g=a.maxHeight,y=a.scrolling,w=a.scrollOutside?a.scrollbarWidth:0,E=a.margin,S=E[1]+E[3],x=E[0]+E[2],T,N,L,A,O,M,_,D,P;r.add(s).add(u).width("auto").height("auto"),E=s.outerWidth(!0)-s.width(),T=s.outerHeight(!0)-s.height(),N=S+E,L=x+T,A=c(i)?(e.w-N)*h(i)/100:i,O=c(f)?(e.h-L)*h(f)/100:f;if("iframe"===a.type){if(P=a.content,a.autoHeight&&1===P.data("ready"))try{P[0].contentWindow.document.location&&(u.width(A).height(9999),M=P.contents().find("body"),w&&M.css("overflow-x","hidden"),O=M.height())}catch(H){}}else if(a.autoWidth||a.autoHeight)u.addClass("fancybox-tmp"),a.autoWidth||u.width(A),a.autoHeight||u.height(O),a.autoWidth&&(A=u.width()),a.autoHeight&&(O=u.height()),u.removeClass("fancybox-tmp");i=h(A),f=h(O),D=A/O,l=h(c(l)?h(l,"w")-N:l),m=h(c(m)?h(m,"w")-N:m),d=h(c(d)?h(d,"h")-L:d),g=h(c(g)?h(g,"h")-L:g),M=m,_=g,S=e.w-S,x=e.h-x;if(a.aspectRatio){if(i>m&&(i=m,f=i/D),f>g&&(f=g,i=f*D),i<l&&(i=l,f=i/D),f<d)f=d,i=f*D}else i=Math.max(l,Math.min(i,m)),f=Math.max(d,Math.min(f,g));if(a.fitToView)if(m=Math.min(e.w-N,m),g=Math.min(e.h-L,g),u.width(h(i)).height(h(f)),r.width(h(i+E)),e=r.width(),N=r.height(),a.aspectRatio)for(;(e>S||N>x)&&i>l&&f>d&&!(19<t++);)f=Math.max(d,Math.min(g,f-10)),i=f*D,i<l&&(i=l,f=i/D),i>m&&(i=m,f=i/D),u.width(h(i)).height(h(f)),r.width(h(i+E)),e=r.width(),N=r.height();else i=Math.max(l,Math.min(i,i-(e-S))),f=Math.max(d,Math.min(f,f-(N-x)));w&&"auto"===y&&f<O&&i+E+w<S&&(i+=w),u.width(h(i)).height(h(f)),r.width(h(i+E)),e=r.width(),N=r.height(),r=(e>S||N>x)&&i>l&&f>d,i=a.aspectRatio?i<M&&f<_&&i<A&&f<O:(i<M||f<_)&&(i<A||f<O),n.extend(a,{dim:{width:p(e),height:p(N)},origWidth:A,origHeight:O,canShrink:r,canExpand:i,wPadding:E,hPadding:T,wrapSpace:N-s.outerHeight(!0),skinSpace:s.height()-f}),!P&&a.autoHeight&&f>d&&f<g&&!i&&u.height("auto")},_getPosition:function(e){var t=o.current,n=o.getViewport(),r=t.margin,i=o.wrap.width()+r[1]+r[3],s=o.wrap.height()+r[0]+r[2],r={position:"absolute",top:r[0],left:r[3]};return t.autoCenter&&t.fixed&&!e&&s<=n.h&&i<=n.w?r.position="fixed":t.locked||(r.top+=n.y,r.left+=n.x),r.top=p(Math.max(r.top,r.top+(n.h-s)*t.topRatio)),r.left=p(Math.max(r.left,r.left+(n.w-i)*t.leftRatio)),r},_afterZoomIn:function(){var e=o.current;e&&((o.isOpen=o.isOpened=!0,o.wrap.addClass("fancybox-opened").css("overflow","visible"),o.reposition(),(e.closeClick||e.nextClick)&&o.inner.css("cursor","pointer").bind("click.fb",function(t){!n(t.target).is("a")&&!n(t.target).parent().is("a")&&o[e.closeClick?"close":"next"]()}),e.closeBtn&&n(e.tpl.closeBtn).appendTo(o.skin).bind("click.fb",o.close),e.arrows&&1<o.group.length&&((e.loop||0<e.index)&&n(e.tpl.prev).appendTo(o.outer).bind("click.fb",o.prev),(e.loop||e.index<o.group.length-1)&&n(e.tpl.next).appendTo(o.outer).bind("click.fb",o.next)),o.trigger("afterShow"),!e.loop&&e.index===e.group.length-1)?o.play(!1):o.opts.autoPlay&&!o.player.isActive&&(o.opts.autoPlay=!1,o.play()))},_afterZoomOut:function(){var e=o.current;n(".fancybox-wrap").stop(!0).trigger("onReset").remove(),n.extend(o,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),o.trigger("afterClose",e)}}),o.transitions={getOrigPosition:function(){var e=o.current,t=e.element,n=e.orig,r={},i=50,s=50,u=e.hPadding,a=e.wPadding,l=o.getViewport();return!n&&e.isDom&&t.is(":visible")&&(n=t.find("img:first"),n.length||(n=t)),f(n)?(r=n.offset(),n.is("img")&&(i=n.outerWidth(),s=n.outerHeight())):(r.top=l.y+(l.h-s)*e.topRatio,r.left=l.x+(l.w-i)*e.leftRatio),e.locked&&(r.top-=l.y,r.left-=l.x),r={top:p(r.top-u*e.topRatio),left:p(r.left-a*e.leftRatio),width:p(i+a),height:p(s+u)}},step:function(e,t){var n,r,i=t.prop;r=o.current;var s=r.wrapSpace,u=r.skinSpace;if("width"===i||"height"===i)n=t.end===t.start?1:(e-t.start)/(t.end-t.start),o.isClosing&&(n=1-n),r="width"===i?r.wPadding:r.hPadding,r=e-r,o.skin[i](h("width"===i?r:r-s*n)),o.inner[i](h("width"===i?r:r-s*n-u*n))},zoomIn:function(){var e=o.current,t=e.pos,r=e.openEffect,i="elastic"===r,s=n.extend({opacity:1},t);delete s.position,i?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===r&&(t.opacity=.1),o.wrap.css(t).animate(s,{duration:"none"===r?0:e.openSpeed,easing:e.openEasing,step:i?this.step:null,complete:o._afterZoomIn})},zoomOut:function(){var e=o.current,t=e.closeEffect,n="elastic"===t,r={opacity:.1};n&&(r=this.getOrigPosition(),e.closeOpacity&&(r.opacity=.1)),o.wrap.animate(r,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:n?this.step:null,complete:o._afterZoomOut})},changeIn:function(){var e=o.current,t=e.nextEffect,n=e.pos,r={opacity:1},i=o.direction,s;n.opacity=.1,"elastic"===t&&(s="down"===i||"up"===i?"top":"left","down"===i||"right"===i?(n[s]=p(h(n[s])-200),r[s]="+=200px"):(n[s]=p(h(n[s])+200),r[s]="-=200px")),"none"===t?o._afterZoomIn():o.wrap.css(n).animate(r,{duration:e.nextSpeed,easing:e.nextEasing,complete:o._afterZoomIn})},changeOut:function(){var e=o.previous,t=e.prevEffect,r={opacity:.1},i=o.direction;"elastic"===t&&(r["down"===i||"up"===i?"top":"left"]=("up"===i||"left"===i?"-":"+")+"=200px"),e.wrap.animate(r,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){n(this).trigger("onReset").remove()}})}},o.helpers.overlay={overlay:null,update:function(){var e="100%",r;this.overlay.width(e).height("100%"),n.browser.msie?(r=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),s.width()>r&&(e=s.width())):s.width()>i.width()&&(e=s.width()),this.overlay.width(e).height(s.height())},onReady:function(e,r){n(".fancybox-overlay").stop(!0,!0),this.overlay||n.extend(this,{overlay:n('<div class="fancybox-overlay"></div>').appendTo(r.parent),margin:s.height()>i.height()||"scroll"===n("body").css("overflow-y")?n("body").css("margin-right"):!1,el:t.all&&!t.querySelector?n("html"):n("body")}),r.fixed&&!a&&(this.overlay.addClass("fancybox-overlay-fixed"),r.autoCenter&&(this.overlay.append(r.wrap),r.locked=this.overlay)),!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var r=this.overlay.unbind(".fb").width("auto").height("auto").css(e.css);e.closeClick&&r.bind("click.fb",function(e){n(e.target).hasClass("fancybox-overlay")&&o.close()}),t.fixed&&!a?t.locked&&(this.el.addClass("fancybox-lock"),!1!==this.margin&&n("body").css("margin-right",h(this.margin)+t.scrollbarWidth)):this.update(),r.show()},onUpdate:function(e,t){(!t.fixed||a)&&this.update()},afterClose:function(e){var t=this,e=e.speedOut||0;t.overlay&&!o.isActive&&t.overlay.fadeOut(e||0,function(){n("body").css("margin-right",t.margin),t.el.removeClass("fancybox-lock"),t.overlay.remove(),t.overlay=null})}},o.helpers.title={beforeShow:function(e){var t=o.current.title,r=e.type;if(l(t)&&""!==n.trim(t)){t=n('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+t+"</div>");switch(r){case"inside":r=o.skin;break;case"outside":r=o.wrap;break;case"over":r=o.inner;break;default:r=o.skin,t.appendTo("body").width(t.width()).wrapInner('<span class="child"></span>'),o.current.margin[2]+=Math.abs(h(t.css("margin-bottom")))}"top"===e.position?t.prependTo(r):t.appendTo(r)}}},n.fn.fancybox=function(e){var t,r=n(this),i=this.selector||"",u=function(s){var u=n(this).blur(),a=t,f,l;!s.ctrlKey&&!s.altKey&&!s.shiftKey&&!s.metaKey&&!u.is(".fancybox-wrap")&&(f=e.groupAttr||"data-fancybox-group",l=u.attr(f),l||(f="rel",l=u.get(0)[f]),l&&""!==l&&"nofollow"!==l&&(u=i.length?n(i):r,u=u.filter("["+f+'="'+l+'"]'),a=u.index(this)),e.index=a,!1!==o.open(u,e)&&s.preventDefault())},e=e||{};return t=e.index||0,!i||!1===e.live?r.unbind("click.fb-start").bind("click.fb-start",u):s.undelegate(i,"click.fb-start").delegate(i+":not('.fancybox-item, .fancybox-nav')","click.fb-start",u),this},s.ready(function(){n.scrollbarWidth===r&&(n.scrollbarWidth=function(){var e=n('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),t=t.innerWidth()-t.height(99).innerWidth();return e.remove(),t});if(n.support.fixedPosition===r){var e=n.support,t=n('<div style="position:fixed;top:20px;"></div>').appendTo("body"),i=20===t[0].offsetTop||15===t[0].offsetTop;t.remove(),e.fixedPosition=i}n.extend(o.defaults,{scrollbarWidth:n.scrollbarWidth(),fixed:n.support.fixedPosition,parent:n("body")})})}(window,document,jQuery),function(e){"use strict";var t=e.fancybox,n=function(t,n,r){return r=r||"",e.type(r)==="object"&&(r=e.param(r,!0)),e.each(n,function(e,n){t=t.replace("$"+e,n||"")}),r.length&&(t+=(t.indexOf("?")>0?"&":"?")+r),t};t.helpers.media={types:{youtube:{matcher:/(youtube\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed)?([\w-]{11}|\?listType=(.*)&list=(.*)).*/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"opaque",enablejsapi:1},type:"iframe",url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,color:"",fullscreen:1},type:"iframe",url:"//player.vimeo.com/video/$1"},metacafe:{matcher:/metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,params:{autoPlay:"yes"},type:"swf",url:function(t,n,r){return r.swf.flashVars="playerVars="+e.param(n,!0),"//www.metacafe.com/fplayer/"+t[1]+"/.swf"}},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"swf",url:"//www.dailymotion.com/swf/video/$1"},twitvid:{matcher:/twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,params:{autoplay:0},type:"iframe",url:"//www.twitvid.com/embed.php?guid=$1"},twitpic:{matcher:/twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,type:"image",url:"//twitpic.com/show/full/$1/"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/"},google_maps:{matcher:/maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,type:"iframe",url:function(e){return"//maps.google."+e[1]+"/"+e[3]+""+e[4]+"&output="+(e[4].indexOf("layer=c")>0?"svembed":"embed")}}},beforeLoad:function(t,r){var i=r.href||"",s=!1,o,u,a,f;for(o in this.types){u=this.types[o],a=i.match(u.matcher);if(a){s=u.type,f=e.extend(!0,{},u.params,r[o]||(e.isPlainObject(t[o])?t[o].params:null)),i=e.type(u.url)==="function"?u.url.call(this,a,f,r):n(u.url,a,f);break}}s&&(r.href=i,r.type=s,r.autoHeight=!1)}}}(jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),function(e,t,n){function i(e){return e}function s(e){return decodeURIComponent(e.replace(r," "))}var r=/\+/g,o=e.cookie=function(r,u,a){if(u!==n){a=e.extend({},o.defaults,a),u===null&&(a.expires=-1);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return u=o.json?JSON.stringify(u):String(u),t.cookie=[encodeURIComponent(r),"=",o.raw?u:encodeURIComponent(u),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=o.raw?i:s,h=t.cookie.split("; ");for(var p=0,d=h.length;p<d;p++){var v=h[p].split("=");if(c(v.shift())===r){var m=c(v.join("="));return o.json?JSON.parse(m):m}}return null};o.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==null?(e.cookie(t,null,n),!0):!1}}(jQuery,document),function(e,t){"$:nomunge";var n=e.jQuery||e.Cowboy||(e.Cowboy={}),r;n.throttle=r=function(e,r,i,s){function a(){function l(){u=+(new Date),i.apply(n,f)}function c(){o=t}var n=this,a=+(new Date)-u,f=arguments;s&&!o&&l(),o&&clearTimeout(o),s===t&&a>e?l():r!==!0&&(o=setTimeout(s?c:l,s===t?e-a:e))}var o,u=0;return typeof r!="boolean"&&(s=i,i=r,r=t),n.guid&&(a.guid=i.guid=i.guid||n.guid++),a},n.debounce=function(e,n,i){return i===t?r(e,n,!1):r(e,i,n!==!1)}}(this);var RJ=RJ||{SPREADSHEETKEY:"0Ao7re1ITFPKydFhKcGFDT2JpTnphbnNubTUwbThVSEE",setupDataCaching:function(){RJ.fetchDataFromGDocs()&&(dataCache={}),RJ.pendingGDocsRequests=0},fetchDataFromGDocs:function(e){return!0},showDataFromGDocs:function(){return;var e},loadData:function(e,t,n){var r=[],i={},s=new Miso.Dataset({importer:Miso.Importers.GoogleSpreadsheet,parser:Miso.Parsers.GoogleSpreadsheet,key:RJ.SPREADSHEETKEY,worksheet:t});RJ.fetchDataFromGDocs(e)?(RJ.pendingGDocsRequests++,s.fetch({success:function(){this.each(function(e){r.push(e)}),i[e]=r,dataCache[e]=r,RJ.pendingGDocsRequests--,RJ.fetchDataFromGDocs()&&RJ.pendingGDocsRequests==0&&RJ.showDataFromGDocs(),RJ.templatize(e,i,n)},error:function(){r=dataCache[e],i[e]=r,RJ.templatize(e,i,n)}})):(r=dataCache[e],i[e]=r,RJ.templatize(e,i,n))},templatize:function(e,t,n){e==="videos"&&_.each(t.videos,function(e,n){var r=t.videos[n].video_url.split("v=")[1],i=r.indexOf("&");i!==-1&&(r=r.substring(0,i)),t.videos[n].thumbnail="https://i3.ytimg.com/vi/"+r+"/0.jpg"});if(e==="counters"){var r=RJ.normalizeCounterValue(t.counters[0].amount),i=RJ.normalizeCounterValue(t.counters[1].amount);RJ.counter.options.counterStart=r-3,RJ.counter.options.counterEnd=r,RJ.counter.options.counterStart==RJ.counter.options.counterEnd&&(RJ.counter.options.counterStart-=10),$(".counter").jOdometer(RJ.counter.options),$(".donations").html(RJ.commify(i));return}n!==undefined&&(t=RJ.transform(t[e],n));if($("#"+e+"-template").length>0){var s=$("#"+e+"-template").html(),o=Handlebars.compile(s);$("#"+e+"-container").append(o(t))}},transform:function(e,t){var n=[],r=[];return _.each(e,function(e,i){i>0&&i%t===0&&(n.push(r),r=[]),r.push(e)}),r.length>0&&n.push(r),n},commify:function(e){return"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},normalizeCounterValue:function(e){return e=e.toString().replace(/\.(\d+)/),e=e.replace(/\D/,""),parseInt(e)},counter:{options:{increment:1,delayTime:500,counterStart:0,counterEnd:0,numbersImage:"http://rollingjubilee.org/assets/img/jodometer-numbers-24pt.png",widthNumber:32,heightNumber:54,spaceNumbers:0,offsetRight:-10,maxDigits:10,prefixChar:!0}},twitter:{tweet:"You are not a loan. #RollingJubilee #PeoplesBailout @StrikeDebt",getURL:function(e,t){var n="https://twitter.com/home?",t=t!==undefined?t:RJ.twitter.tweet;return e!==undefined?n+"status=."+encodeURIComponent(e+" "+t):n+"status="+encodeURIComponent(t)}},ecard:{chosen_graphic:"one",recipient_name:"Friend",first_name:"Your Friend",donation_amount:0,get:function(e){e&&$.each($.parseJSON(e),function(e,t){$("#"+e).length>0&&($("#"+e).val(t),RJ.ecard[e]=t),e==="chosen_graphic"&&($(".ecard #options div").removeClass("selected"),$("#"+t).addClass("selected"),RJ.ecard.chosen_graphic=t)})},getPreview:function(){var e=RJ.ecard.chosen_graphic?RJ.ecard.chosen_graphic:"one",t=RJ.ecard.donation_amount?RJ.ecard.donation_amount:"0",n=RJ.ecard.recipient_name?RJ.ecard.recipient_name:"Friend",r=RJ.ecard.first_name?RJ.ecard.first_name:"Your friend";return"http://tmwrk.com/rj/gifts/generate.php?image_number="+e+"&recipient_name="+n+"&first_name="+r+"&amount="+t},checkURLParams:function(){var e=RJ.ecard.getParameterByName("image_number"),t=RJ.ecard.getParameterByName("donation_amount"),n=RJ.ecard.getParameterByName("recipient_name"),r=RJ.ecard.getParameterByName("first_name");e&&t&&n&&r&&(RJ.ecard.chosen_graphic=e,RJ.ecard.donation_amount=t,RJ.ecard.recipient_name=n,RJ.ecard.first_name=r,RJ.ecard.updatePrintableContent(),$("body").addClass("permalinked"))},getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),r=n.exec(window.location.search);return r==null?null:decodeURIComponent(r[1].replace(/\+/g," "))},checkFields:function(){$(".ecard .right input").each(function(){RJ.ecard[$(this).attr("id")]=$(this).val(),$(this).attr("id")==="donation_amount"&&$(this).val().length<1&&(RJ.ecard[$(this).attr("id")]=0)}),$(".multiplier").html(parseInt(RJ.ecard.donation_amount)*20);var e=0;$(".ecard .right input").each(function(){$(this).val().length>0&&e++}),e>2?($(".submit-ecard").removeClass("disabled"),$("#more-options").removeClass("disabled"),RJ.ecard.updatePrintableContent()):($(".submit-ecard").addClass("disabled"),$("#more-options").addClass("disabled"))},updatePrintableContent:function(){var e=RJ.ecard.getPreview();$("#print-content").html('<img src="'+e+'">')},emailLink:function(){}}};$(function(){RJ.setupDataCaching(),RJ.loadData("videos","1",4),RJ.loadData("allies","2"),RJ.loadData("knowledge","3"),RJ.loadData("social-media","4"),RJ.loadData("faq1","5"),RJ.loadData("faq2","6"),RJ.loadData("counters","7"),$(".fancybox-media").fancybox({openEffect:"none",closeEffect:"none",helpers:{media:{}}}),$(document).on("click","nav.main a, a.scroll",function(){var e=$(this).attr("href"),t=$(e).offset().top-20;return $("html,body").animate({scrollTop:t},700),!1}),$(document).on("click",".journalists li",function(){$(this).addClass("selected").siblings().removeClass("selected"),RJ.twitter.target=$(this).find(".username").text(),$(".statuses").slideDown();var e=$(".statuses").offset().top;return $("html,body").animate({scrollTop:e},300),!1}),$(document).on("click",".statuses li",function(){return $(this).addClass("selected").siblings().removeClass("selected"),RJ.twitter.tweet=$(this).find("span").text()+" http://rollingjubilee.org",location.href=RJ.twitter.getURL(RJ.twitter.target,RJ.twitter.tweet),!1}),$(document).on("click",".ecard #options div",function(e){RJ.ecard.chosen_graphic=$(this).attr("id"),$(".ecard #options div").removeClass("selected"),$(this).addClass("selected"),$("#preview").find("img").attr("src",$(this).find("img").attr("src").replace("_thumb","_left")),e.preventDefault()}),$(".ecard .right input").on("keyup",$.debounce(250,function(){RJ.ecard.checkFields()})),RJ.ecard.checkURLParams(),RJ.ecard.checkFields(),$(".submit-ecard:not(.disabled)").live("click",function(){RJ.ecard.donation_amount=$("#donation_amount").val(),location.href=RJ.ecard.getPreview()}),$("#print-this-page").live("click",function(){return window.print(),!1}),$("#email-link").live("click",function(){var e=encodeURIComponent(RJ.ecard.chosen_graphic),t=encodeURIComponent(RJ.ecard.donation_amount),n=encodeURIComponent(RJ.ecard.recipient_name),r=encodeURIComponent(RJ.ecard.first_name),i="http://rollingjubilee.org/gifts/?image_number="+e+"&recipient_name="+n+"&first_name="+r+"&donation_amount="+t,s="http://api.bitly.com/v3/shorten?login=dphiffer&apiKey=R_67523ca32f7b9c2cd1acedd601a662a0&longUrl="+encodeURIComponent(i)+"&format=json";return $.ajax({url:s,dataType:"json",success:function(e){var t="Happy Holidays!",n="Dear "+RJ.ecard.recipient_name+",\n\nI'm sending you the gift of debt liberation! Just follow this link:\n"+e.data.url+"\n\nHappy Holidays!\n"+RJ.ecard.first_name;window.location="mailto:?to=&subject="+encodeURIComponent(t)+"&body="+encodeURIComponent(n)}}),!1}),$(document).on("click","#sample-tweets li",function(){location.href=RJ.twitter.getURL(undefined,$(this).find("span").text())})});