/*! Rolling Jubilee - v0.1.0 - 2012-12-13
* http://rollingjubilee.org/
* Copyright (c) 2012 Strike Debt; Licensed MIT */
(function(a,b){function c(a,b,c){this._d=a,this._isUTC=!!b,this._a=a._a||null,a._a=null,this._lang=c||!1}function d(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,f=a.weeks||a.w||0,g=a.days||a.d||0,h=a.hours||a.h||0,i=a.minutes||a.m||0,j=a.seconds||a.s||0,k=a.milliseconds||a.ms||0;this._milliseconds=k+j*1e3+i*6e4+h*36e5,this._days=g+f*7,this._months=d+c*12,b.milliseconds=k%1e3,j+=e(k/1e3),b.seconds=j%60,i+=e(j/60),b.minutes=i%60,h+=e(i/60),b.hours=h%24,g+=e(h/24),g+=f*7,b.days=g%30,d+=e(g/30),b.months=d%12,c+=e(d/12),b.years=c,this._lang=!1}function e(a){return a<0?Math.ceil(a):Math.floor(a)}function f(a,b){var c=a+"";while(c.length<b)c="0"+c;return c}function g(a,b,c){var d=b._milliseconds,e=b._days,f=b._months,g;d&&a._d.setTime(+a+d*c),e&&a.date(a.date()+e*c),f&&(g=a.date(),a.date(1).month(a.month()+f*c).date(Math.min(g,a.daysInMonth())))}function h(a){return Object.prototype.toString.call(a)==="[object Array]"}function i(a,b){var c=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),e=0,f;for(f=0;f<c;f++)~~a[f]!==~~b[f]&&e++;return e+d}function j(b,c){var d,e;for(d=1;d<7;d++)b[d]=b[d]==null?d===2?1:0:b[d];return b[7]=c,e=new a(0),c?(e.setUTCFullYear(b[0],b[1],b[2]),e.setUTCHours(b[3],b[4],b[5],b[6])):(e.setFullYear(b[0],b[1],b[2]),e.setHours(b[3],b[4],b[5],b[6])),e._a=b,e}function k(a,b){var c,d,e=[];!b&&H&&(b=require("./lang/"+a));for(c=0;c<I.length;c++)b[I[c]]=b[I[c]]||F.en[I[c]];for(c=0;c<12;c++)d=B([2e3,c]),e[c]=new RegExp("^"+(b.months[c]||b.months(d,""))+"|^"+(b.monthsShort[c]||b.monthsShort(d,"")).replace(".",""),"i");return b.monthsParse=b.monthsParse||e,F[a]=b,b}function l(a){var b=typeof a=="string"&&a||a&&a._lang||null;return b?F[b]||k(b):B}function m(a){return ba[a]?"'+("+ba[a]+")+'":a.replace(M,"").replace(/\\?'/g,"\\'")}function n(a){return l().longDateFormat[a]||a}function o(a){var b="var a,b;return '"+a.replace(K,m)+"';",c=Function;return new c("t","v","o","p","m",b)}function p(a){return _[a]||(_[a]=o(a)),_[a]}function q(a,b){function c(c,e){return d[c].call?d[c](a,b):d[c][e]}var d=l(a);while(L.test(b))b=b.replace(L,n);return _[b]||(_[b]=o(b)),_[b](a,c,d.ordinal,f,d.meridiem)}function r(a){switch(a){case"DDDD":return Q;case"YYYY":return R;case"S":case"SS":case"SSS":case"DDD":return P;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return S;case"Z":case"ZZ":return T;case"T":return U;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return O;default:return new RegExp(a.replace("\\",""))}}function s(a,b,c,d){var e;switch(a){case"M":case"MM":c[1]=b==null?0:~~b-1;break;case"MMM":case"MMMM":for(e=0;e<12;e++)if(l().monthsParse[e].test(b)){c[1]=e;break}break;case"D":case"DD":case"DDD":case"DDDD":b!=null&&(c[2]=~~b);break;case"YY":b=~~b,c[0]=b+(b>70?1900:2e3);break;case"YYYY":c[0]=~~Math.abs(b);break;case"a":case"A":d.isPm=(b+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":c[3]=~~b;break;case"m":case"mm":c[4]=~~b;break;case"s":case"ss":c[5]=~~b;break;case"S":case"SS":case"SSS":c[6]=~~(("0."+b)*1e3);break;case"Z":case"ZZ":d.isUTC=!0,e=(b+"").match(Y),e&&e[1]&&(d.tzh=~~e[1]),e&&e[2]&&(d.tzm=~~e[2]),e&&e[0]==="+"&&(d.tzh=-d.tzh,d.tzm=-d.tzm)}}function t(a,b){var c=[0,0,1,0,0,0,0],d={tzh:0,tzm:0},e=b.match(K),f,g;for(f=0;f<e.length;f++)g=(r(e[f]).exec(a)||[])[0],a=a.replace(r(e[f]),""),s(e[f],g,c,d);return d.isPm&&c[3]<12&&(c[3]+=12),d.isPm===!1&&c[3]===12&&(c[3]=0),c[3]+=d.tzh,c[4]+=d.tzm,j(c,d.isUTC)}function u(a,b){var d,e=a.match(N)||[],f,g=99,h,j,k;for(h=0;h<b.length;h++)j=t(a,b[h]),f=q(new c(j),b[h]).match(N)||[],k=i(e,f),k<g&&(g=k,d=j);return d}function v(b){var c="YYYY-MM-DDT",d;if(V.exec(b)){for(d=0;d<4;d++)if(X[d][1].exec(b)){c+=X[d][0];break}return T.exec(b)?t(b,c+" Z"):t(b,c)}return new a(b)}function w(a,b,c,d,e){var f=e.relativeTime[a];return typeof f=="function"?f(b||1,!!c,a,d):f.replace(/%d/i,b||1)}function x(a,b,c){var d=D(Math.abs(a)/1e3),e=D(d/60),f=D(e/60),g=D(f/24),h=D(g/365),i=d<45&&["s",d]||e===1&&["m"]||e<45&&["mm",e]||f===1&&["h"]||f<22&&["hh",f]||g===1&&["d"]||g<=25&&["dd",g]||g<=45&&["M"]||g<345&&["MM",D(g/30)]||h===1&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,w.apply({},i)}function y(a,b){B.fn[a]=function(a){var c=this._isUTC?"UTC":"";return a!=null?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function z(a){B.duration.fn[a]=function(){return this._data[a]}}function A(a,b){B.duration.fn["as"+a]=function(){return+this/b}}var B,C="1.7.0",D=Math.round,E,F={},G="en",H=typeof module!="undefined"&&module.exports,I="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),J=/^\/?Date\((\-?\d+)/i,K=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?)/g,L=/(LT|LL?L?L?)/g,M=/(^\[)|(\\)|\]$/g,N=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,O=/\d\d?/,P=/\d{1,3}/,Q=/\d{3}/,R=/\d{1,4}/,S=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,T=/Z|[\+\-]\d\d:?\d\d/i,U=/T/i,V=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,W="YYYY-MM-DDTHH:mm:ssZ",X=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],Y=/([\+\-]|\d\d)/gi,Z="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),$={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},_={},ba={M:"(a=t.month()+1)",MMM:'v("monthsShort",t.month())',MMMM:'v("months",t.month())',D:"(a=t.date())",DDD:"(a=new Date(t.year(),t.month(),t.date()),b=new Date(t.year(),0,1),a=~~(((a-b)/864e5)+1.5))",d:"(a=t.day())",dd:'v("weekdaysMin",t.day())',ddd:'v("weekdaysShort",t.day())',dddd:'v("weekdays",t.day())',w:"(a=new Date(t.year(),t.month(),t.date()-t.day()+5),b=new Date(a.getFullYear(),0,4),a=~~((a-b)/864e5/7+1.5))",YY:"p(t.year()%100,2)",YYYY:"p(t.year(),4)",a:"m(t.hours(),t.minutes(),!0)",A:"m(t.hours(),t.minutes(),!1)",H:"t.hours()",h:"t.hours()%12||12",m:"t.minutes()",s:"t.seconds()",S:"~~(t.milliseconds()/100)",SS:"p(~~(t.milliseconds()/10),2)",SSS:"p(t.milliseconds(),3)",Z:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(a/60),2)+":"+p(~~a%60,2)',ZZ:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(10*a/6),4)'},bb="DDD w M D d".split(" "),bc="M D H h m s w".split(" ");while(bb.length)E=bb.pop(),ba[E+"o"]=ba[E]+"+o(a)";while(bc.length)E=bc.pop(),ba[E+E]="p("+ba[E]+",2)";ba.DDDD="p("+ba.DDD+",3)",B=function(d,e){if(d===null||d==="")return null;var f,g;return B.isMoment(d)?new c(new a(+d._d),d._isUTC,d._lang):(e?h(e)?f=u(d,e):f=t(d,e):(g=J.exec(d),f=d===b?new a:g?new a(+g[1]):d instanceof a?d:h(d)?j(d):typeof d=="string"?v(d):new a(d)),new c(f))},B.utc=function(a,b){return h(a)?new c(j(a,!0),!0):(typeof a=="string"&&!T.exec(a)&&(a+=" +0000",b&&(b+=" Z")),B(a,b).utc())},B.unix=function(a){return B(a*1e3)},B.duration=function(a,b){var c=B.isDuration(a),e=typeof a=="number",f=c?a._data:e?{}:a,g;return e&&(b?f[b]=a:f.milliseconds=a),g=new d(f),c&&(g._lang=a._lang),g},B.humanizeDuration=function(a,b,c){return B.duration(a,b===!0?null:b).humanize(b===!0?!0:c)},B.version=C,B.defaultFormat=W,B.lang=function(a,b){var c;if(!a)return G;(b||!F[a])&&k(a,b);if(F[a]){for(c=0;c<I.length;c++)B[I[c]]=F[a][I[c]];B.monthsParse=F[a].monthsParse,G=a}},B.langData=l,B.isMoment=function(a){return a instanceof c},B.isDuration=function(a){return a instanceof d},B.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return~~(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"}}),B.fn=c.prototype={clone:function(){return B(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?!i(this._a,(this._a[7]?B.utc(this):this).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){return q(this,a?a:B.defaultFormat)},add:function(a,b){var c=b?B.duration(+b,a):B.duration(a);return g(this,c,1),this},subtract:function(a,b){var c=b?B.duration(+b,a):B.duration(a);return g(this,c,-1),this},diff:function(a,b,c){var d=this._isUTC?B(a).utc():B(a).local(),e=(this.zone()-d.zone())*6e4,f=this._d-d._d-e,g=this.year()-d.year(),h=this.month()-d.month(),i=this.date()-d.date(),j;return b==="months"?j=g*12+h+i/30:b==="years"?j=g+(h+i/30)/12:j=b==="seconds"?f/1e3:b==="minutes"?f/6e4:b==="hours"?f/36e5:b==="days"?f/864e5:b==="weeks"?f/6048e5:f,c?j:D(j)},from:function(a,b){return B.duration(this.diff(a)).lang(this._lang).humanize(!b)},fromNow:function(a){return this.from(B(),a)},calendar:function(){var a=this.diff(B().sod(),"days",!0),b=this.lang().calendar,c=b.sameElse,d=a<-6?c:a<-1?b.lastWeek:a<0?b.lastDay:a<1?b.sameDay:a<2?b.nextDay:a<7?b.nextWeek:c;return this.format(typeof d=="function"?d.apply(this):d)},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<B([this.year()]).zone()||this.zone()<B([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return a==null?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return B.utc([this.year(),this.month()+1,0]).date()},lang:function(a){return a===b?l(this):(this._lang=a,this)}};for(E=0;E<Z.length;E++)y(Z[E].toLowerCase(),Z[E]);y("year","FullYear"),B.duration.fn=d.prototype={weeks:function(){return e(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(a){var b=+this,c=this.lang().relativeTime,d=x(b,!a,this.lang());return a&&(d=(b<=0?c.past:c.future).replace(/%s/i,d)),d},lang:B.fn.lang};for(E in $)$.hasOwnProperty(E)&&(A(E,$[E]),z(E.toLowerCase()));A("Weeks",6048e5),H&&(module.exports=B),typeof ender=="undefined"&&(this.moment=B),typeof define=="function"&&define.amd&&define("moment",[],function(){return B})}).call(this,Date),function(a,b){function c(a){return new d(a)}function d(a){if(a&&a._wrapped)return a;this._wrapped=a}function e(a,b,c){b||(b=0);var d=a.length,e=d-b>=(c||bL),f=e?{}:a;if(e){var g,h=b-1;while(++h<d)g=a[h]+"",(cb.call(f,g)?f[g]:f[g]=[]).push(a[h])}return function(a){if(e){var c=a+"";return cb.call(f,c)&&O(f[c],a)>-1}return O(f,a,b)>-1}}function f(){var a,b,c,d=-1,e=arguments.length,f={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};while(++d<e){a=arguments[d];for(b in a)c=(c=a[b])==null?"":c,/beforeLoop|inLoop/.test(b)?(typeof c=="string"&&(c={array:c,object:c}),f.arrayBranch[b]=c.array||"",f.objectBranch[b]=c.object||""):f[b]=c}var h=f.args,i=/^[^,]+/.exec(h)[0],j=f.useStrict;f.firstArg=i,f.hasDontEnumBug=cv,f.isKeysFast=cF,f.noArgsEnum=cy,f.shadowed=bY,f.useHas=f.useHas!==!1,f.useStrict=j==null?cG:j,f.noCharByIndex==null&&(f.noCharByIndex=cB),f.exit||(f.exit="if (!"+i+") return result");if(i!="collection"||!f.arrayBranch.inLoop)f.arrayBranch=null;var l=Function("arrayLikeClasses, ArrayProto, bind, compareAscending, concat, forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, isPlainObject, iteratorBind, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","var callee = function("+h+") {\n"+cO(f)+"\n};\n"+"return callee");return l(cI,bF,bd,g,ca,db,cb,bo,O,q,cY,r,s,k,cq,cM,cj,cd,ce,cs,cf)}function g(a,c){var d=a.index,e=c.index;return a=a.criteria,c=c.criteria,a===b?1:c===b?-1:a<c?-1:a>c?1:d<e?-1:1}function h(a,b){return b_[b]}function i(a){return"\\"+cN[a]}function j(a){return cK[a]}function k(a,b){return function(c,d,e){return a.call(b,c,d,e)}}function l(){}function m(a,b){if(a&&bN.test(b))return"<e%-"+b+"%>";var c=b_.length;return b_[c]="' +\n__e("+b+") +\n'",b$+c}function n(a,b,c,d){if(d){var e=b_.length;return b_[e]="';\n"+d+";\n__p += '",b$+e}return b?m(null,b):o(null,c)}function o(a,b){if(a&&bN.test(b))return"<e%="+b+"%>";var c=b_.length;return b_[c]="' +\n((__t = ("+b+")) == null ? '' : __t) +\n'",b$+c}function p(a){return cL[a]}function q(a){return cf.call(a)==ck}function r(a){return typeof a=="function"}function s(a,b){return a?a==bH||a.__proto__==bH&&(b||!q(a)):!1}function t(a,b,c,d,e){if(a==null)return a;c&&(b=!1),e||(e={value:null}),e.value==null&&(e.value=!!(bG.clone||bI.clone||bJ.clone));var f=cM[typeof a];if((f||e.value)&&a.clone&&r(a.clone))return e.value=null,a.clone(b);if(f){var g=cf.call(a);if(!cJ[g]||cz&&q(a))return a;var h=g==cl;f=h||(g==cq?s(a,!0):f)}if(!f||!b)return f?h?ce.call(a):da({},a):a;var i=a.constructor;switch(g){case cm:return new i(a==!0);case cn:return new i(+a);case cp:case cs:return new i(a);case cr:return i(a.source,bS.exec(a))}d||(d=[]);var j=d.length;while(j--)if(d[j].source==a)return d[j].value;j=a.length;var k=h?i(j):{};d.push({value:k,source:a});if(h){var l=-1;while(++l<j)k[l]=t(a[l],b,null,d,e)}else dc(a,function(a,c){k[c]=t(a,b,null,d,e)});return k}function u(a,b){return a?cb.call(a,b):!1}function v(a){return a===!0||a===!1||cf.call(a)==cm}function w(a){return cf.call(a)==cn}function x(a){return a?a.nodeType===1:!1}function y(a,b,c,d){if(a==null||b==null)return a===b;d||(d={value:null}),d.value==null&&(d.value=!!(bG.isEqual||bI.isEqual||bJ.isEqual));if(cM[typeof a]||cM[typeof b]||d.value){a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&r(a.isEqual))return d.value=null,a.isEqual(b);if(b.isEqual&&r(b.isEqual))return d.value=null,b.isEqual(a)}if(a===b)return a!==0||1/a==1/b;var e=cf.call(a);if(e!=cf.call(b))return!1;switch(e){case cm:case cn:return+a==+b;case cp:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case cr:case cs:return a==b+""}var f=cI[e];if(cz&&!f&&(f=q(a))&&!q(b))return!1;if(!f&&(e!=cq||cC&&(typeof a.toString!="function"&&typeof (a+"")=="string"||typeof b.toString!="function"&&typeof (b+"")=="string")))return!1;c||(c=[]);var g=c.length;while(g--)if(c[g]==a)return!0;var h=-1,i=!0,j=0;c.push(a);if(f){j=a.length,i=j==b.length;if(i)while(j--)if(!(i=y(a[j],b[j],c,d)))break;return i}var k=a.constructor,l=b.constructor;if(k!=l&&!(r(k)&&k instanceof k&&r(l)&&l instanceof l))return!1;for(var m in a)if(cb.call(a,m)){j++;if(!cb.call(b,m)||!y(a[m],b[m],c,d))return!1}for(m in b)if(cb.call(b,m)&&!(j--))return!1;if(cv)while(++h<7){m=bY[h];if(cb.call(a,m)&&(!cb.call(b,m)||!y(a[m],b[m],c,d)))return!1}return!0}function z(a){return ci(a)&&cf.call(a)==cp}function A(a){return a?cM[typeof a]:!1}function B(a){return cf.call(a)==cp&&a!=+a}function C(a){return a===null}function D(a){return cf.call(a)==cp}function E(a){return cf.call(a)==cr}function F(a){return cf.call(a)==cs}function G(a){return a===b}function H(a){if(!a)return 0;var b=cf.call(a),c=a.length;return cI[b]||cz&&q(a)||b==cq&&c>-1&&c===c>>>0&&r(a.splice)?c:df(a).length}function I(a,b,c,d){if(!a)return c;var e=a.length,f=arguments.length<3;d&&(b=k(b,d));if(e>-1&&e===e>>>0){var g=cB&&cf.call(a)==cs?a.split(""):a;e&&f&&(c=g[--e]);while(e--)c=b(c,g[e],e,a);return c}var h,i=df(a);e=i.length,e&&f&&(c=a[i[--e]]);while(e--)h=i[e],c=b(c,a[h],h,a);return c}function J(a){if(!a)return[];if(a.toArray&&r(a.toArray))return a.toArray();var b=a.length;return b>-1&&b===b>>>0?(cA?cf.call(a)==cs:typeof a=="string")?a.split(""):ce.call(a):di(a)}function K(a){var b=[];if(!a)return b;var c=-1,d=a.length;while(++c<d)a[c]&&b.push(a[c]);return b}function L(a){var b=[];if(!a)return b;var c=-1,d=a.length,f=ca.apply(b,arguments),g=e(f,d);while(++c<d)g(a[c])||b.push(a[c]);return b}function M(a,b,c){if(a)return b==null||c?a[0]:ce.call(a,0,b)}function N(a,b){var c=[];if(!a)return c;var d,e=-1,f=a.length;while(++e<f)d=a[e],cY(d)?cc.apply(c,b?d:N(d)):c.push(d);return c}function O(a,b,c){if(!a)return-1;var d=-1,e=a.length;if(c)if(typeof c=="number")d=(c<0?Math.max(0,e+c):c)-1;else return d=Y(a,b),a[d]===b?d:-1;while(++d<e)if(a[d]===b)return d;return-1}function P(a,b,c){return a?ce.call(a,0,-(b==null||c?1:b)):[]}function Q(a){var b=[];if(!a)return b;var c,d=arguments.length,f=[],g=-1,h=a.length;a:while(++g<h){c=a[g];if(O(b,c)<0){for(var i=1;i<d;i++)if(!(f[i]||(f[i]=e(arguments[i])))(c))continue a;b.push(c)}}return b}function R(a,b,c){if(a){var d=a.length;return b==null||c?a[d-1]:ce.call(a,-b||d)}}function S(a,b,c){if(!a)return-1;var d=a.length;c&&typeof c=="number"&&(d=(c<0?Math.max(0,d+c):Math.min(c,d-1))+1);while(d--)if(a[d]===b)return d;return-1}function T(a,b,c){var d=-Infinity,e=d;if(!a)return e;var f,g=-1,h=a.length;if(!b){while(++g<h)a[g]>e&&(e=a[g]);return e}c&&(b=k(b,c));while(++g<h)f=b(a[g],g,a),f>d&&(d=f,e=a[g]);return e}function U(a,b,c){var d=Infinity,e=d;if(!a)return e;var f,g=-1,h=a.length;if(!b){while(++g<h)a[g]<e&&(e=a[g]);return e}c&&(b=k(b,c));while(++g<h)f=b(a[g],g,a),f<d&&(d=f,e=a[g]);return e}function V(a,b,c){a=+a||0,c=+c||1,b==null&&(b=a,a=0);var d=-1,e=Math.max(0,Math.ceil((b-a)/c)),f=Array(e);while(++d<e)f[d]=a,a+=c;return f}function W(a,b,c){return a?ce.call(a,b==null||c?1:b):[]}function X(a){if(!a)return[];var b,c=-1,d=a.length,e=Array(d);while(++c<d)b=Math.floor(Math.random()*(c+1)),e[c]=e[b],e[b]=a[c];return e}function Y(a,b,c,d){if(!a)return 0;var e,f=0,g=a.length;if(c){d&&(c=bd(c,d)),b=c(b);while(f<g)e=f+g>>>1,c(a[e])<b?f=e+1:g=e}else while(f<g)e=f+g>>>1,a[e]<b?f=e+1:g=e;return f}function Z(){var a=-1,b=[],c=ca.apply(b,arguments),d=c.length;while(++a<d)O(b,c[a])<0&&b.push(c[a]);return b}function $(a,b,c,d){var e=[];if(!a)return e;var f,g=-1,h=a.length,i=[];typeof b=="function"&&(d=c,c=b,b=!1),c?d&&(c=k(c,d)):c=bo;while(++g<h){f=c(a[g],g,a);if(b?!g||i[i.length-1]!==f:O(i,f)<0)i.push(f),e.push(a[g])}return e}function _(a){var b=[];if(!a)return b;var c=-1,d=a.length,f=e(arguments,1,20);while(++c<d)f(a[c])||b.push(a[c]);return b}function ba(a){if(!a)return[];var b=-1,c=T(dt(arguments,"length")),d=Array(c);while(++b<c)d[b]=dt(arguments,b);return d}function bb(a,b){if(!a)return{};var c=-1,d=a.length,e={};b||(b=[]);while(++c<d)e[a[c]]=b[c];return e}function bc(a,b){return a<1?b():function(){if(--a<1)return b.apply(this,arguments)}}function bd(a,b){function c(){var g=arguments,h=b;e||(a=b[d]),f.length&&(g=g.length?f.concat(ce.call(g)):f);if(this instanceof c){l.prototype=a.prototype,h=new l;var i=a.apply(h,g);return i&&cM[typeof i]?i:h}return a.apply(h,g)}var d,e=r(a);if(!e)d=b,b=a;else if(cE||cg&&arguments.length>2)return cg.call.apply(cg,arguments);var f=ce.call(arguments,2);return c}function be(){var a=arguments;return function(){var b=arguments,c=a.length;while(c--)b=[a[c].apply(this,b)];return b[0]}}function bf(a,b,c){function d(){h=null,c||a.apply(g,e)}var e,f,g,h;return function(){var i=c&&!h;return e=arguments,g=this,ct(h),h=cu(d,b),i&&(f=a.apply(g,e)),f}}function bg(a,c){var d=ce.call(arguments,2);return cu(function(){return a.apply(b,d)},c)}function bh(a){var c=ce.call(arguments,1);return cu(function(){return a.apply(b,c)},1)}function bi(a,b){var c={};return function(){var d=b?b.apply(this,arguments):arguments[0];return cb.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}function bj(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}function bk(a){var b=ce.call(arguments,1),c=b.length;return function(){var d,e=arguments;return e.length&&(b.length=c,cc.apply(b,e)),d=b.length==1?a.call(this,b[0]):a.apply(this,b),b.length=c,d}}function bl(a,b){function c(){h=new Date,g=null,a.apply(f,d)}var d,e,f,g,h=0;return function(){var i=new Date,j=b-(i-h);return d=arguments,f=this,j<=0?(h=i,e=a.apply(f,d)):g||(g=cu(c,j)),e}}function bm(a,b){return function(){var c=[a];return arguments.length&&cc.apply(c,arguments),b.apply(this,c)}}function bn(a){return a==null?"":(a+"").replace(bW,j)}function bo(a){return a}function bp(a){dp(dd(a),function(b){var e=c[b]=a[b];d.prototype[b]=function(){var a=[this._wrapped];arguments.length&&cc.apply(a,arguments);var b=e.apply(c,a);return this._chain&&(b=new d(b),b._chain=!0),b}})}function bq(){return a._=bM,this}function br(a,b){if(!a)return null;var c=a[b];return r(c)?a[b]():c}function bs(a,b,d){d||(d={}),a+="";var e,f,g=d.escape,j=d.evaluate,k=d.interpolate,l=c.templateSettings,p=d.variable||l.variable,q=p;g==null&&(g=l.escape),j==null&&(j=l.evaluate||!1),k==null&&(k=l.interpolate),g&&(a=a.replace(g,m)),k&&(a=a.replace(k,o)),j!=bA&&(bA=j,bD=RegExp("<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>"+(j?"|"+j.source:""),"g")),e=b_.length,a=a.replace(bD,n),e=e!=b_.length,a="__p += '"+a.replace(bX,i).replace(bV,h)+"';\n",b_.length=0,q||(p=bB||"obj",e?a="with ("+p+") {\n"+a+"\n}\n":(p!=bB&&(bB=p,bC=RegExp("(\\(\\s*)"+p+"\\."+p+"\\b","g")),a=a.replace(bT,"$&"+p+".").replace(bC,"$1__d"))),a=(e?a.replace(bP,""):a).replace(bQ,"$1").replace(bR,"$1;"),a="function("+p+") {\n"+(q?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(q?"":", __d = "+p+"."+p+" || "+p)+";\n")+a+"return __p\n}",cH&&(a+="\n//@ sourceURL=/lodash/template/source["+bZ++ +"]");try{f=Function("_","return "+a)(c)}catch(r){f=function(){throw r}}return b?f(b):(f.source=a,f)}function bt(a,b,c){var d=-1;if(c)while(++d<a)b.call(c,d);else while(++d<a)b(d)}function bu(a){return a==null?"":(a+"").replace(bO,p)}function bv(a){var b=bK++;return a?a+b:b}function bw(a){return a=new d(a),a._chain=!0,a}function bx(a,b){return b(a),a}function by(){return this._chain=!0,this}function bz(){return this._wrapped}"use strict";var bA,bB,bC,bD,bE=typeof exports=="object"&&exports&&(typeof global=="object"&&global&&global==global.global&&(a=global),exports),bF=Array.prototype,bG=Boolean.prototype,bH=Object.prototype,bI=Number.prototype,bJ=String.prototype,bK=0,bL=30,bM=a._,bN=/[-+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,bO=/&(?:amp|lt|gt|quot|#x27);/g,bP=/\b__p \+= '';/g,bQ=/\b(__p \+=) '' \+/g,bR=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bS=/\w*$/,bT=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,bU=RegExp("^"+(bH.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),bV=/__token__(\d+)/g,bW=/[&<>"']/g,bX=/['\n\r\t\u2028\u2029\\]/g,bY=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bZ=0,b$="__token__",b_=[],ca=bF.concat,cb=bH.hasOwnProperty,cc=bF.push,cd=bH.propertyIsEnumerable,ce=bF.slice,cf=bH.toString,cg=bU.test(cg=ce.bind)&&cg,ch=bU.test(ch=Array.isArray)&&ch,ci=a.isFinite,cj=bU.test(cj=Object.keys)&&cj,ck="[object Arguments]",cl="[object Array]",cm="[object Boolean]",cn="[object Date]",co="[object Function]",cp="[object Number]",cq="[object Object]",cr="[object RegExp]",cs="[object String]",ct=a.clearTimeout,cu=a.setTimeout,cv,cw,cx,cy=!0;(function(){function a(){this.x=1}var b={0:1,length:1},c=[];a.prototype={valueOf:1,y:1};for(var d in new a)c.push(d);for(d in arguments)cy=!d;cv=(c+"").length<4,cx=c[0]!="x",cw=(c.splice.call(b,0,1),b[0])})(1);var cz=!q(arguments),cA=ce.call("x")[0]!="x",cB="x"[0]+Object("x")[0]!="xx";try{var cC=({toString:0}+"",cf.call(a.document||0)==cq)}catch(cD){}var cE=cg&&/\n|Opera/.test(cg+cf.call(a.opera)),cF=cj&&/^.+$|true/.test(cj+!!a.attachEvent),cG=!cE;try{var cH=(Function("//@")(),!a.attachEvent)}catch(cD){}var cI={};cI[cm]=cI[cn]=cI[co]=cI[cp]=cI[cq]=cI[cr]=!1,cI[ck]=cI[cl]=cI[cs]=!0;var cJ={};cJ[ck]=cJ[co]=!1,cJ[cl]=cJ[cm]=cJ[cn]=cJ[cp]=cJ[cq]=cJ[cr]=cJ[cs]=!0;var cK={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},cL={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},cM={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1,unknown:!0},cN={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};c.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var cO=bs("<% if (useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length > -1 && length === length >>> 0) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectBranch.inLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {    <% if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>;\n    <% if (!hasDontEnumBug || useHas) { %>}\n<% } %>  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch || noArgsEnum) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),cP={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (callback(value, index, collection) === false) return result"},cQ={init:"{}",top:"var prop;\nif (typeof callback != 'function') {\n  var valueProp = callback;\n  callback = function(value) { return value[valueProp] }\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)"},cR={useHas:!1,args:"object, callback, thisArg",init:"{}",top:"var isFunc = typeof callback == 'function';\nif (!isFunc) {\n  var props = concat.apply(ArrayProto, arguments)\n} else if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (isFunc\n  ? !callback(value, index, object)\n  : indexOf(props, index) < 0\n) result[index] = value"},cS={init:"true",inLoop:"if (!callback(value, index, collection)) return !result"},cT={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"result[index] = value",bottom:"  }\n}"},cU={init:"[]",inLoop:"callback(value, index, collection) && result.push(value)"},cV={top:"if (thisArg) callback = iteratorBind(callback, thisArg)"},cW={inLoop:{object:cP.inLoop}},cX={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+(cF?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(value, index, collection)",object:"result"+(cF?"[ownIndex] = ":".push")+"(callback(value, index, collection))"}};cz&&(q=function(a){return!!a&&!!cb.call(a,"callee")});var cY=ch||function(a){return cf.call(a)==cl};r(/x/)&&(r=function(a){return cf.call(a)==co}),s(cM)||(s=function(a,b){var c=!1;if(!a||typeof a!="object"||!b&&q(a))return c;var d=a.constructor;return(!cC||typeof a.toString=="function"||typeof (a+"")!="string")&&(!r(d)||d instanceof d)?cx?(db(a,function(b,d){return c=!cb.call(a,d),!1}),c===!1):(db(a,function(a,b){c=b}),c===!1||cb.call(a,c)):c});var cZ=f({args:"object",init:"[]",inLoop:"result.push(index)"}),c$=f(cT,{inLoop:"if (result[index] == null) "+cT.inLoop}),c_=f(cR),da=f(cT),db=f(cP,cV,cW,{useHas:!1}),dc=f(cP,cV,cW),dd=f({useHas:!1,args:"object",init:"[]",inLoop:"if (isFunction(value)) result.push(index)",bottom:"result.sort()"}),de=f({args:"value",init:"true",top:"var className = toString.call(value),\n    length = value.length;\nif (arrayLikeClasses[className]"+(cz?" || isArguments(value)":"")+" ||\n"+"  (className == objectClass && length > -1 && length === length >>> 0 &&\n"+"  isFunction(value.splice))"+") return !length",inLoop:{object:"return false"}}),df=cj?function(a){var b=typeof a;return b=="function"&&cd.call(a,"prototype")?cZ(a):a&&cM[b]?cj(a):[]}:cZ,dg=f(cT,{args:"object, source, indicator, stack",top:"var destValue, found, isArr, stackLength, recursive = indicator == isPlainObject;\nif (!recursive) stack = [];\nfor (var argsIndex = 1, argsLength = recursive ? 2 : arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"if (value && ((isArr = isArray(value)) || isPlainObject(value))) {\n  found = false; stackLength = stack.length;\n  while (stackLength--) {\n    if (found = stack[stackLength].source == value) break\n  }\n  if (found) {\n    result[index] = stack[stackLength].value\n  } else {\n    destValue = (destValue = result[index]) && isArr\n      ? (isArray(destValue) ? destValue : [])\n      : (isPlainObject(destValue) ? destValue : {});\n    stack.push({ value: destValue, source: value });\n    result[index] = callee(destValue, value, isPlainObject, stack)\n  }\n} else if (value != null) {\n  result[index] = value\n}"}),dh=f(cR,{top:"if (typeof callback != 'function') {\n  var prop,\n      props = concat.apply(ArrayProto, arguments),\n      length = props.length;\n  for (index = 1; index < length; index++) {\n    prop = props[index];\n    if (prop in object) result[prop] = object[prop]\n  }\n} else {\n  if (thisArg) callback = iteratorBind(callback, thisArg)",inLoop:"if (callback(value, index, object)) result[index] = value",bottom:"}"}),di=f({args:"object",init:"[]",inLoop:"result.push(value)"}),dj=f({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(collection) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (value === target) return true"}),dk=f(cP,cQ),dl=f(cP,cS),dm=f(cP,cU),dn=f(cP,cV,{init:"",inLoop:"if (callback(value, index, collection)) return value"}),dp=f(cP,cV),dq=f(cP,cQ,{inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)"}),dr=f(cX,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)",object:"result"+(cF?"[ownIndex] = ":".push")+"((isFunc ? methodName : value[methodName]).apply(value, args))"}}),ds=f(cP,cX),dt=f(cX,{args:"collection, property",inLoop:{array:"result[index] = value[property]",object:"result"+(cF?"[ownIndex] = ":".push")+"(value[property])"}}),du=f({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = iteratorBind(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = iteratee[++index]"},inLoop:{array:"result = callback(result, value, index, collection)",object:"result = noaccum\n  ? (noaccum = false, value)\n  : callback(result, value, index, collection)"}}),dv=f(cP,cU,{inLoop:"!"+cU.inLoop}),dw=f(cP,cS,{init:"false",inLoop:cS.inLoop.replace("!","")}),dx=f(cP,cQ,cX,{inLoop:{array:"result[index] = {\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n}",object:"result"+(cF?"[ownIndex] = ":".push")+"({\n"+"  criteria: callback(value, index, collection),\n"+"  index: index,\n"+"  value: value\n"+"})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"}),dy=f(cU,{args:"collection, properties",top:"var props = [];\nforIn(properties, function(value, prop) { props.push(prop) });\nvar propsLength = props.length",inLoop:"for (var prop, pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\n  prop = props[propIndex];\n  if (!(pass = value[prop] === properties[prop])) break\n}\npass && result.push(value)"}),dz=f({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++) {\n    result[funcs[index]] = bind(result[funcs[index]], result)\n  }\n  return result\n}",inLoop:"if (isFunction(result[index])) {\n  result[index] = bind(result[index], result)\n}"});c.VERSION="0.6.1",c.after=bc,c.bind=bd,c.bindAll=dz,c.chain=bw,c.clone=t,c.compact=K,c.compose=be,c.contains=dj,c.countBy=dk,c.debounce=bf,c.defaults=c$,c.defer=bh,c.delay=bg,c.difference=L,c.drop=c_,c.escape=bn,c.every=dl,c.extend=da,c.filter=dm,c.find=dn,c.first=M,c.flatten=N,c.forEach=dp,c.forIn=db,c.forOwn=dc,c.functions=dd,c.groupBy=dq,c.has=u,c.identity=bo,c.indexOf=O,c.initial=P,c.intersection=Q,c.invoke=dr,c.isArguments=q,c.isArray=cY,c.isBoolean=v,c.isDate=w,c.isElement=x,c.isEmpty=de,c.isEqual=y,c.isFinite=z,c.isFunction=r,c.isNaN=B,c.isNull=C,c.isNumber=D,c.isObject=A,c.isRegExp=E,c.isString=F,c.isUndefined=G,c.keys=df,c.last=R,c.lastIndexOf=S,c.map=ds,c.max=T,c.memoize=bi,c.merge=dg,c.min=U,c.mixin=bp,c.noConflict=bq,c.once=bj,c.partial=bk,c.pick=dh,c.pluck=dt,c.range=V,c.reduce=du,c.reduceRight=I,c.reject=dv,c.rest=W,c.result=br,c.shuffle=X,c.size=H,c.some=dw,c.sortBy=dx,c.sortedIndex=Y,c.tap=bx,c.template=bs,c.throttle=bl,c.times=bt,c.toArray=J,c.unescape=bu,c.union=Z,c.uniq=$,c.uniqueId=bv,c.values=di,c.where=dy,c.without=_,c.wrap=bm,c.zip=ba,c.zipObject=bb,c.all=dl,c.any=dw,c.collect=ds,c.detect=dn,c.each=dp,c.foldl=du,c.foldr=I,c.head=M,c.include=dj,c.inject=du,c.methods=dd,c.omit=c_,c.select=dm,c.tail=W,c.take=M,c.unique=$,c._iteratorTemplate=cO,c._shimKeys=cZ,d.prototype=c.prototype,bp(c),d.prototype.chain=by,d.prototype.value=bz,dp(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=bF[a];d.prototype[a]=function(){var a=this._wrapped;return b.apply(a,arguments),cw&&a.length===0&&delete a[0],this._chain&&(a=new d(a),a._chain=!0),a}}),dp(["concat","join","slice"],function(a){var b=bF[a];d.prototype[a]=function(){var a=this._wrapped,c=b.apply(a,arguments);return this._chain&&(c=new d(c),c._chain=!0),c}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(a._=c,define(function(){return c})):bE?typeof module=="object"&&module&&module.exports==bE?(module.exports=c)._=c:bE._=c:a._=c}(this),function(){var a=this.math={};a.mean=a.ave=a.average=function(b,c){return a.sum(b,c)/_(b).size()},a.median=function(b){var c=(b.length+1)/2,d=a.sort(b);return d.length%2?d[c-1]:(d[c-1.5]+d[c-.5])/2},a.pow=function(a,b){if(_.isNumber(a))return Math.pow(a,b);if(_.isArray(a))return _.map(a,function(a){return _.pow(a,b)})},a.scale=function(a,b){var b=b||1,c=_.max(a);return _.map(a,function(a){return a*(b/c)})},a.slope=function(a,b){return(b[1]-a[1])/(b[0]-a[0])},a.sort=function(a){return a.sort(function(a,b){return a-b})},a.stdDeviation=a.sigma=function(a){return Math.sqrt(_(a).variance())},a.sum=function(a,b){if(_.isArray(a)&&typeof a[0]=="number")var c=a;else var b=b||"value",c=_(a).pluck(b);var d=0;for(var e=0,f=c.length;e<f;e++)d+=c[e];return d},a.transpose=function(a){var b=[];return _(a).each(function(a,c){_(a).each(function(a,d){b[d]||(b[d]=[]),b[d][c]=a})}),b},a.variance=function(a){var b=_(a).mean();return _(a).chain().map(function(a){return _(a-b).pow(2)}).mean().value()},_.mixin(a)}(),function(a){function b(a){var b=p[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c={},d=Array.prototype,e=Object.prototype,f=e.hasOwnProperty,g=e.toString,h=d.forEach,i=d.slice,j=function(a,b,d){var e,g,i;if(!a)return;if(h&&a.forEach===h)a.forEach(b,d);else if(a.length===+a.length){for(g=0,i=a.length;g<i;g++)if(g in a&&b.call(d,a[g],g,a)===c)return}else for(e in a)if(f.call(a,e)&&b.call(d,a[e],e,a)===c)return},k=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},l=function(a){return j(i.call(arguments,1),function(b){var c;for(c in b)b[c]!==void 0&&(a[c]=b[c])}),a},m={"[object Array]":"array","[object Function]":"function"},n=function(a){return a?m[g.call(a)]||"object":String(a)},o={},p={};o.Callbacks=function(a){a=a?p[a]||b(a):{};var c=[],d=[],e,f,g,h,i,j,k=function(b){var d,e,f,g,h;for(d=0,e=b.length;d<e;d++)f=b[d],g=n(f),g==="array"?k(f):g==="function"&&(!a.unique||!m.has(f))&&c.push(f)},l=function(b,k){k=k||[],e=!a.memory||[b,k],f=!0,g=!0,j=h||0,h=0,i=c.length;for(;c&&j<i;j++)if(c[j].apply(b,k)===!1&&a.stopOnFalse){e=!0;break}g=!1,c&&(a.once?e===!0?m.disable():c=[]:d&&d.length&&(e=d.shift(),m.fireWith(e[0],e[1])))},m={add:function(){if(c){var a=c.length;k(arguments),g?i=c.length:e&&e!==!0&&(h=a,l(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){g&&f<=i&&(i--,f<=j&&j--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){return c=[],this},disable:function(){return c=d=e=undefined,this},disabled:function(){return!c},lock:function(){return d=undefined,(!e||e===!0)&&m.disable(),this},locked:function(){return!d},fireWith:function(b,c){return d&&(g?a.once||d.push([b,c]):(!a.once||!e)&&l(b,c)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},o.Deferred=function(a){var b=o.Callbacks("once memory"),c=o.Callbacks("once memory"),d=o.Callbacks("memory"),e="pending",f={resolve:b,reject:c,notify:d},g={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){return h.done(a).fail(b).progress(c),this},always:function(){return h.done.apply(h,arguments).fail.apply(h,arguments),this},pipe:function(a,b,c){return o.Deferred(function(d){j({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=a[0],e=a[1],f;k(c)?h[b](function(){f=c.apply(this,arguments),f&&k(f.promise)?f.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===h?d:this,[f])}):h[b](d[e])})}).promise()},promise:function(a){if(!a)a=g;else for(var b in g)a[b]=g[b];return a}},h=g.promise({}),i;for(i in f)h[i]=f[i].fire,h[i+"With"]=f[i].fireWith;return h.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(h,h),h},o.when=function(a){function b(a){return function(b){d[a]=arguments.length>1?i.call(arguments,0):b,--h||l.resolveWith(l,d)}}function c(a){return function(b){g[a]=arguments.length>1?i.call(arguments,0):b,l.notifyWith(m,g)}}var d=i.call(arguments,0),e=0,f=d.length,g=new Array(f),h=f,j=f,l=f<=1&&a&&k(a.promise)?a:o.Deferred(),m=l.promise();if(f>1){for(;e<f;e++)d[e]&&d[e].promise&&k(d[e].promise)?d[e].promise().then(b(e),l.reject,c(e)):--h;h||l.resolveWith(l,d)}else l!==a&&l.resolveWith(l,f?[a]:[]);return m},typeof module!="undefined"&&module.exports?module.exports=o:typeof a._!="undefined"?a._.mixin(o):a._=o}(this),function(a,b){var c=a.Miso||(a.Miso={});c.typeOf=function(a,d){var e=b.keys(c.types),f;return e.push(e.splice(b.indexOf(e,"string"),1)[0]),e.push(e.splice(b.indexOf(e,"mixed"),1)[0]),f=b.find(e,function(b){return c.types[b].test(a,d)}),f=b.isUndefined(f)?"string":f,f},c.types={mixed:{name:"mixed",coerce:function(a){return b.isNull(a)||typeof a=="undefined"||b.isNaN(a)?null:a},test:function(a){return!0},compare:function(a,c){if(b.isEqual(a,c))return 0;if(a<c)return-1;if(a>c)return 1},numeric:function(a){return a===null||b.isNaN(+a)?null:+a}},string:{name:"string",coerce:function(a){return b.isNaN(a)||a===null||typeof a=="undefined"?null:a.toString()},test:function(a){return a===null||typeof a=="undefined"||typeof a=="string"},compare:function(a,b){return a==null&&b!=null?-1:a!=null&&b==null?1:a<b?-1:a>b?1:0},numeric:function(a){return b.isNaN(+a)||a===null?null:b.isNumber(+a)?+a:null}},"boolean":{name:"boolean",regexp:/^(true|false)$/,coerce:function(a){return b.isNaN(a)||a===null||typeof a=="undefined"?null:a==="false"?!1:Boolean(a)},test:function(a){return a===null||typeof a=="undefined"||typeof a=="boolean"||this.regexp.test(a)?!0:!1},compare:function(a,b){return a==null&&b!=null?-1:a!=null&&b==null?1:a==null&&b==null?0:a===b?0:a<b?-1:1},numeric:function(a){return a===null||b.isNaN(a)?null:a?1:0}},number:{name:"number",regexp:/^\s*[\-\.]?[0-9]+([\.][0-9]+)?\s*$/,coerce:function(a){var c=+a;return b.isNull(a)||typeof a=="undefined"||b.isNaN(c)?null:c},test:function(a){return a===null||typeof a=="undefined"||typeof a=="number"||this.regexp.test(a)?!0:!1},compare:function(a,b){return a==null&&b!=null?-1:a!=null&&b==null?1:a==null&&b==null?0:a===b?0:a<b?-1:1},numeric:function(a){return b.isNaN(a)||a===null?null:a}},time:{name:"time",format:"DD/MM/YYYY",_formatLookup:[["DD","\\d{2}"],["D","\\d{1}|\\d{2}"],["MM","\\d{2}"],["M","\\d{1}|\\d{2}"],["YYYY","\\d{4}"],["YY","\\d{2}"],["A","[AM|PM]"],["hh","\\d{2}"],["h","\\d{1}|\\d{2}"],["mm","\\d{2}"],["m","\\d{1}|\\d{2}"],["ss","\\d{2}"],["s","\\d{1}|\\d{2}"],["ZZ","[-|+]\\d{4}"],["Z","[-|+]\\d{2}:\\d{2}"]],_regexpTable:{},_regexp:function(a){if(this._regexpTable[a])return new RegExp(this._regexpTable[a],"g");var c=a;return b.each(this._formatLookup,function(a){c=c.replace(a[0],a[1])},this),c=c.split("/").join("\\/"),this._regexpTable[a]=c,new RegExp(this._regexpTable[a],"g")},coerce:function(a,c){c=c||{};if(b.isNull(a)||typeof a=="undefined"||b.isNaN(a))return null;if(b.isString(a)){var d=c.format||this.format;return moment(a,c.format)}return b.isNumber(a)?moment(a):a},test:function(a,c){c=c||{};if(a===null||typeof a=="undefined")return!0;if(b.isString(a)){var d=c.format||this.format,e=this._regexp(d);return e.test(a)}return!0},compare:function(a,b){return a<b?-1:a>b?1:0},numeric:function(a){return b.isNaN(a)||a===null?null:a.valueOf()}}}}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Event=function(a){b.isArray(a)||(a=[a]),this.deltas=a},b.extend(c.Event.prototype,{affectedColumns:function(){var a=[];return b.each(this.deltas,function(c){c.old=c.old||[],c.changed=c.changed||[],a=b.chain(a).union(b.keys(c.old),b.keys(c.changed)).reject(function(a){return a==="_id"}).value()}),a}}),b.extend(c.Event,{isRemove:function(a){return b.isUndefined(a.changed)||b.keys(a.changed).length===0?!0:!1},isAdd:function(a){return b.isUndefined(a.old)||b.keys(a.old).length===0?!0:!1},isUpdate:function(a){return!this.isRemove(a)&&!this.isAdd(a)?!0:!1}}),c.Events={},c.Events.bind=function(a,b,c){var d=this._callbacks||(this._callbacks={}),e=d[a]||(d[a]={}),f=e.tail||(e.tail=e.next={});return f.callback=b,f.context=c,e.tail=f.next={},this},c.Events.unbind=function(a,b){var c,d,e;if(!a)this._callbacks=null;else if(c=this._callbacks)if(!b)c[a]={};else if(d=c[a])while((e=d)&&(d=d.next)){if(d.callback!==b)continue;e.next=d.next,d.context=d.callback=null;break}return this},c.Events.trigger=function(a){var b,c,d,e,f,g=["all",a];if(!(c=this._callbacks))return this;while(f=g.pop()){if(!(b=c[f]))continue;e=f==="all"?arguments:Array.prototype.slice.call(arguments,1);while(b=b.next)(d=b.callback)&&d.apply(b.context||this,e)}return this},c.Events._buildEvent=function(a){return new c.Event(a)}}(this,_),function(a,b){var c=a.Miso||{};c.Builder={detectColumnType:function(a,d){var e=b.inject(d.slice(0,5),function(a,d){var e=c.typeOf(d);return d!==""&&a.indexOf(e)===-1&&!b.isNull(d)&&a.push(e),a},[]);return e.length===1?a.type=e[0]:a.type="mixed",a},detectColumnTypes:function(a,d){b.each(d,function(b,d){var e=a.column(d);if(e.type){e.force=!0;return}c.Builder.detectColumnType(e,b)},this)},cacheRows:function(a){c.Builder.clearRowCache(a),b.each(a._columns[a._columnPositionByName._id].data,function(b,c){a._rowPositionById[b]=c,a._rowIdByPosition.push(b)},a);var d=b.uniq(b.map(a._columns,function(a){return a.data.length}));if(d.length>1)throw new Error("Row lengths need to be the same. Empty values should be set to null."+b.map(a._columns,function(a){return a.data+"|||"}));a.length=d[0]},clearRowCache:function(a){a._rowPositionById={},a._rowIdByPosition=[]},cacheColumns:function(a){a._columnPositionByName={},b.each(a._columns,function(b,c){a._columnPositionByName[b.name]=c})}},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1})}(this,_),function(a,b){var c=a.Miso;c.Column=function(a){return b.extend(this,a),this._id=a.id||b.uniqueId(),this.data=a.data||[],this},b.extend(c.Column.prototype,{toNumeric:function(a){return c.types[this.type].numeric(a)},numericAt:function(a){return this.toNumeric(this.data[a])},coerce:function(){this.data=b.map(this.data,function(a){return c.types[this.type].coerce(a,this)},this)},compute:function(a,b){if(this.func){var c=this.func(a);return typeof b!="undefined"?this.data[b]=c:this.data.push(c),c}},isComputed:function(){return!b.isUndefined(this.func)},_sum:function(){return b.sum(this.data)},_mean:function(){var a=0;for(var b=0;b<this.data.length;b++)a+=this.numericAt(b);return a/=this.data.length,c.types[this.type].coerce(a,this)},_median:function(){return c.types[this.type].coerce(b.median(this.data),this)},_max:function(){var a=-Infinity;for(var b=0;b<this.data.length;b++)this.data[b]!==null&&c.types[this.type].compare(this.data[b],a)>0&&(a=this.numericAt(b));return c.types[this.type].coerce(a,this)},_min:function(){var a=Infinity;for(var b=0;b<this.data.length;b++)this.data[b]!==null&&c.types[this.type].compare(this.data[b],a)<0&&(a=this.numericAt(b));return c.types[this.type].coerce(a,this)}}),c.DataView=function(a){if(typeof a!="undefined"){a=a||(a={});if(b.isUndefined(a.parent))throw new Error("A view must have a parent specified.");this.parent=a.parent,this._initialize(a)}},b.extend(c.DataView.prototype,{_initialize:function(a){this.parent.syncable===!0&&(b.extend(this,c.Events),this.syncable=!0),this.filter={columns:this._columnFilter(a.filter.columns||undefined),rows:this._rowFilter(a.filter.rows||undefined)},this._columns=this._selectData(),c.Builder.cacheColumns(this),c.Builder.cacheRows(this),this.syncable&&this.parent.bind("change",this._sync,this)},_sync:function(a){var d=a.deltas,e=null;b.each(d,function(d,f){var g=this._rowPositionById[d._id];if(typeof g=="undefined"&&c.Event.isAdd(d))this.filter.rows&&this.filter.rows(d.changed)&&(this._add(d.changed),e="add");else{if(g==="undefined")return;b.each(d.changed,function(a,c){var d=this._columnPositionByName[c];if(b.isUndefined(d))return;this._columns[d].data[g]=a,e="update"},this)}var h=this.rowByPosition(g);if(c.Event.isRemove(d)||this.filter.row&&!this.filter.row(h)){var i={_id:d._id,old:this.rowByPosition(g),changed:{}};a.deltas.splice(f,1,i),this._remove(g),e="delete"}},this),this.syncable&&(this.trigger(e,a),this.trigger("change",a))},where:function(a,d){return d=d||{},d.filter=d.filter||{},b.isFunction(a)?d.filter.rows=a:d.filter=a,d.parent=this,new c.DataView(d)},_selectData:function(){var a=[];return b.each(this.parent._columns,function(b){this.filter.columns(b)&&a.push(new c.Column({name:b.name,data:[],type:b.type,_id:b._id}))},this),this.parent.each(function(b){if(!this.filter.rows(b))return;for(var c=0;c<a.length;c++)a[c].data.push(b[a[c].name])},this),a},_columnFilter:function(a){var c;return b.isUndefined(a)?c=function(){return!0}:(b.isString(a)&&(a=[a]),a.push("_id"),c=function(c){return b.indexOf(a,c.name)===-1?!1:!0}),c},_rowFilter:function(a){var c;return b.isNumber(a)&&(a=[a]),b.isUndefined(a)?c=function(){return!0}:b.isFunction(a)?c=a:c=function(c){return b.indexOf(a,c._id)===-1?!1:!0},c},column:function(a){return this._column(a)},_column:function(a){if(b.isUndefined(this._columnPositionByName))return undefined;var c=this._columnPositionByName[a];return this._columns[c]},columns:function(a){return new c.DataView({filter:{columns:a},parent:this})},columnNames:function(){var a=b.pluck(this._columns,"name");return b.reject(a,function(a){return a==="_id"||a==="_oids"})},hasColumn:function(a){return!b.isUndefined(this._columnPositionByName[a])},each:function(a,b){for(var c=0;c<this.length;c++)a.apply(b||this,[this.rowByPosition(c),c])},reverseEach:function(a,b){for(var c=this.length-1;c>=0;c--)a.apply(b||this,[this.rowByPosition(c),c])},eachColumn:function(a,b){var c=this.columnNames();for(var d=0;d<c.length;d++)a.apply(b||this,[c[d],this.column(c[d]),d])},rowByPosition:function(a){return this._row(a)},rowById:function(a){return this._row(this._rowPositionById[a])},_row:function(a){var c={};return b.each(this._columns,function(b){c[b.name]=b.data[a]}),c},_remove:function(a){var c=this._rowPositionById[a];return b.each(this._columns,function(a){a.data.splice(c,1)}),delete this._rowPositionById[a],this._rowIdByPosition.splice(c,1),this.length--,this},_add:function(a,d){b.each(a,function(d,e){var f=this.column(e);if(f.isComputed())throw"You're trying to update a computed column. Those get computed!";if(typeof f!="undefined"){var g=c.types[f.type];if(f.force||g.test(a[f.name],f))b.isUndefined(f.before)||(a[f.name]=f.before(a[f.name])),a[f.name]=g.coerce(a[f.name],f);else throw"incorrect value '"+a[f.name]+"' of type "+c.typeOf(a[f.name],f)+" passed to column '"+f.name+"' with type "+f.type}},this),this._computedColumns&&b.each(this._computedColumns,function(b){var c=b.compute(a);a[b.name]=c});if(b.isUndefined(this.comparator))b.each(this._columns,function(c){c.isComputed()||c.data.push(!b.isUndefined(a[c.name])&&!b.isNull(a[c.name])?a[c.name]:null)}),this.length++,this._rowIdByPosition=this._rowIdByPosition||(this._rowIdByPosition=[]),this._rowPositionById=this._rowPositionById||(this._rowPositionById={}),this._rowIdByPosition.push(a._id),this._rowPositionById[a._id]=this._rowIdByPosition.length;else{var e=function(a,b,c){Array.prototype.splice.apply(c,[a,0].concat(b))},f;this.length++;for(f=0;f<this.length;f++){var g=this.rowByPosition(f);if(b.isUndefined(g._id)||this.comparator(a,g)<0){b.each(this._columns,function(b){e(f,a[b.name]?a[b.name]:null,b.data)});break}}this._rowIdByPosition=[],this._rowPositionById={},this.each(function(a,b){this._rowIdByPosition.push(a._id),this._rowPositionById[a._id]=b})}return this},rows:function(a){return new c.DataView({filter:{rows:a},parent:this})},sort:function(a){var c={};b.isFunction(a)?c.comparator=a:c=a||c,c.comparator&&(this.comparator=c.comparator);if(b.isUndefined(this.comparator))throw new Error("Cannot sort without this.comparator.");var d=this.length,e;if(d===1)return;var f=b.bind(function(a,c){var d=this.rowByPosition(c);b.each(d,function(b,d){var e=this._columnPositionByName[d],f=this._columns[e].data[a];this._columns[e].data.splice(a,1,b),this._columns[e].data.splice(c,1,f)},this)},this),g=b.bind(function(a,b){var c=a,d;while(c*2<=b){d=c*2;var e=this.rowByPosition(c);d+1<b&&this.comparator(this.rowByPosition(d),this.rowByPosition(d+1))<0&&d++;if(this.comparator(e,this.rowByPosition(d))<0)f(c,d),c=d;else return}},this),h=function(a){var b=Math.round((a-2)/2);while(b>=0)g(b,a-1),b--};if(d>2){h(d),e=d-1;while(e>1)f(e,0),e--,g(0,e)}else this.comparator(this.rowByPosition(0),this.rowByPosition(1))>0&&f(0,1);return this.comparator(this.rowByPosition(this.length-2),this.rowByPosition(this.length-1))>0&&f(this.length-1,this.length-2),this.syncable&&c.silent&&this.trigger("sort"),this},toJSON:function(){var a=[];for(var b=0;b<this.length;b++)a.push(this.rowByPosition(b));return a}})}(this,_),function(a,b){var c=a.Miso;c.Product=c.Product||function(a){a=a||{},this.func=a.func;if(a.columns){var c=a.columns;b.isArray(a.columns)&&(c=a.columns[0]),this.valuetype=c.type,this.numeric=function(){return c.toNumeric(this.value)}}return this.func({silent:!0}),this},b.extend(c.Product.prototype,c.Events,{val:function(){return this.value},type:function(){return this.valuetype},_sync:function(a){this.func()},_buildDelta:function(a,b){return{old:a,changed:b}}}),c.Product.define=function(a){return function(d,e){e=e||{};var f=this._findColumns(d),g=this;e.type=e.type||f[0].type,e.typeOptions=e.typeOptions||f[0].typeOptions;var h=function(){var b=a.call(g,f,e);return c.types[e.type].coerce(b,e.typeOptions)};if(this.syncable){var i=new c.Product({columns:f,func:function(a){a=a||{};var c=this._buildDelta(this.value,h.call(g));this.value=c.changed;if(g.syncable){var d=this._buildEvent(c);!b.isUndefined(c.old)&&!a.silent&&c.old!==c.changed&&this.trigger("change",d)}}});return this.bind("change",i._sync,i),i}return h.call(g)}},b.extend(c.DataView.prototype,{_findColumns:function(a){var c=[];return b.isUndefined(a)&&(a=this.columnNames()),a=b.isArray(a)?a:[a],b.each(a,function(a){a=this._columns[this._columnPositionByName[a]],c.push(a)},this),c},sum:c.Product.define(function(a,d){return b.each(a,function(a){if(a.type===c.types.time.name)throw new Error("Can't sum up time")}),b.sum(b.map(a,function(a){return a._sum()}))}),max:c.Product.define(function(a,c){return b.max(b.map(a,function(a){return a._max()}))}),min:c.Product.define(function(a,c){return b.min(b.map(a,function(a){return a._min()}))}),mean:c.Product.define(function(a,d){var e=[];b.each(a,function(a){e.push(a.data)}),e=b.flatten(e);var f=a[0].type;return e=b.map(e,function(a){return c.types[f].numeric(a)}),b.mean(e)})})}(this,_),function(a,b,c){var d=a.Miso;d.Dataset=function(a){this.length=0,this._columns=[],this._columnPositionByName={},this._computedColumns=[],typeof a!="undefined"&&(a=a||{},this._initialize(a))},d.Dataset.prototype=new d.DataView,b.extend(d.Dataset.prototype,{_initialize:function(a){a.sync===!0&&(b.extend(this,d.Events),this.syncable=!0),this.importer=a.importer||null,this.parser=a.parser||d.Parsers.Obj,b.isUndefined(a.parser)&&(a.strict?this.parser=d.Parsers.Strict:a.delimiter&&(this.parser=d.Parsers.Delimited)),this.importer===null&&(a.url?a.interval?(this.importer=d.Importers.Polling,this.interval=a.interval):this.importer=d.Importers.Remote:this.importer=d.Importers.Local),this.parser=new this.parser(a),this.parser instanceof d.Parsers.Delimited&&(a.dataType="text"),this.importer=new this.importer(a),a.comparator&&(this.comparator=a.comparator),a.ready&&(this.ready=a.ready),a.resetOnFetch&&(this.resetOnFetch=a.resetOnFetch),a.uniqueAgainst&&(this.uniqueAgainst=a.uniqueAgainst),b.isUndefined(a.data)&&b.isUndefined(a.url)&&this._addIdColumn(),a.deferred?this.deferred=a.deferred:this.deferred=new b.Deferred,a.columns&&this.addColumns(a.columns)},fetch:function(a){a=a||{};var c=this.deferred;if(b.isNull(this.importer))throw"No importer defined";return this.importer.fetch({success:b.bind(function(b){try{this._apply(b)}catch(d){if(a.error)a.error.call(this,d);else throw d}this.comparator&&this.sort(),this.ready&&this.ready.call(this),a.success&&a.success.call(this),c.resolveWith(this,[this])},this),error:b.bind(function(b){a.error&&a.error.call(this,b),c.reject(b)},this)}),c.promise()},_applications:{againstColumn:function(a){var c=[],e=b.keys(a),f,g=this.uniqueAgainst,h=this.column(g),i=[],j=[],k=[];b.each(a[g],function(c,e){var f=h.data.indexOf(d.types[h.type].coerce(c)),g={};b.each(a,function(a,b){g[b]=a[e]});if(f===-1)i.push(g);else{j.push(g);var k=this.rowById(this.column("_id").data[f])._id;this.update(k,g)}},this),i.length>0&&this.add(i)},blind:function(a){var c,d,e=[],f,g=b.keys(a),h=b.max(b.map(g,function(b){return a[b].length},this));for(var i=0;i<h;i++){f={};for(var j=0;j<g.length;j++)f[g[j]]=a[g[j]][i];e.push(f)}this.add(e)}},_apply:function(a){var c=this.parser.parse(a);if(!this.fetched)this._addIdColumn(),this.addColumns(b.map(c.columns,function(a){return{name:a}})),d.Builder.detectColumnTypes(this,c.data),this._applications.blind.call(this,c.data),this.fetched=!0;else if(this.resetOnFetch)this.reset(),this._applications.blind.call(this,c.data);else if(this.uniqueAgainst){if(!this.hasColumn(this.uniqueAgainst))throw new Error("You requested a unique add against a column that doesn't exist.");this._applications.againstColumn.call(this,c.data)}else this._applications.blind.call(this,c.data);d.Builder.cacheRows(this)},addColumns:function(a){b.each(a,function(a){this.addColumn(a)},this)},addComputedColumn:function(a,c,e){if(!b.isUndefined(this.column(a)))throw"There is already a column by this name.";if(typeof d.types[c]=="undefined")throw"The type "+c+" doesn't exist";var f=new d.Column({name:a,type:c,func:b.bind(e,this)});return this._columns.push(f),this._computedColumns.push(f),this._columnPositionByName[f.name]=this._columns.length-1,this.length>0&&this.each(function(a,b){f.compute(a,b)},this),f},addColumn:function(a){return b.isUndefined(this.column(a.name))?(a=new d.Column(a),this._columns.push(a),this._columnPositionByName[a.name]=this._columns.length-1,a):!1},_addIdColumn:function(a){if(!b.isUndefined(this.column("_id")))return;var c=[];a&&a>0&&b.times(a,function(){c.push(b.uniqueId())}),this.addColumn({name:"_id",type:"number",data:c});if(this._columnPositionByName._id!==0){var d=this._columns[this._columnPositionByName._id],e=this._columnPositionByName._id;this._columns.splice(e,1),this._columns.unshift(d),this._columnPositionByName._id=0,b.each(this._columnPositionByName,function(a,b){b!=="_id"&&this._columnPositionByName[b]<e&&this._columnPositionByName[b]++},this)}},add:function(a,c){c=c||{},b.isArray(a)||(a=[a]);var d=[];b.each(a,function(a){a._id||(a._id=b.uniqueId()),this._add(a,c),this.syncable&&!c.silent&&d.push({changed:a})},this);if(this.syncable&&!c.silent){var e=this._buildEvent(d);this.trigger("add",e),this.trigger("change",e)}return this},remove:function(a,c){a=this._rowFilter(a);var d=[],e=[];this.each(function(b,c){a(b)&&(e.push(b._id),d.push({old:b}))}),b.each(e,function(a){this._remove(a)},this);if(this.syncable&&(!c||!c.silent)){var f=this._buildEvent(d);this.trigger("remove",f),this.trigger("change",f)}},update:function(a,c,e){var f,g=[],h=b.bind(function(a,e){var h,i;b.isFunction(c)?i=c.apply(this,[a]):i=c,f=b.keys(i),b.each(f,function(a){h=this.column(a);if(h.isComputed())throw"You're trying to update a computed column. Those get computed!";var c=d.types[h.type];if(c)if(c.test(i[h.name],h))b.isUndefined(h.before)||(i[h.name]=h.before(i[h.name])),i[h.name]=c.coerce(i[h.name],h);else throw"incorrect value '"+i[h.name]+"' of type "+d.typeOf(i[h.name],h)+" passed to column '"+h.name+"' with type "+h.type;h.data[e]=i[h.name]},this),typeof this._computedColumns!="undefined"&&b.each(this._computedColumns,function(c){var d=b.extend({},a,i),f=d[c.name],g=c.compute(d,e);f!==g&&(i[c.name]=g)}),g.push({_id:a._id,old:a,changed:i})},this);b.isString(a)&&(a=[a]);if(b.isArray(a)){var i,j;b.each(a,function(a){i=this.rowById(a),j=this._rowPositionById[a],h(i,j)})}else a=this._rowFilter(a),this.each(function(b,c){a(b)&&h(b,c)},this);if(this.syncable&&(!e||!e.silent)){var k=this._buildEvent(g);this.trigger("update",k),this.trigger("change",k)}return this},reset:function(a){b.each(this._columns,function(a){a.data=[]}),this.length=0,this.syncable&&(!a||!a.silent)&&this.trigger("reset")}})}(this,_,moment),function(a,b){var c=a.Miso||(a.Miso={});c.Derived=function(a){a=a||{},c.Dataset.call(this),this.parent=a.parent,this.method=a.method,this._addIdColumn(),this.addColumn({name:"_oids",type:"mixed"}),this.parent.syncable&&(b.extend(this,c.Events),this.syncable=!0,this.parent.bind("change",this._sync,this))},c.Derived.prototype=new c.Dataset,b.extend(c.Derived.prototype,{_sync:function(a){this.func.call(this.args),this.trigger("change")}}),b.extend(c.DataView.prototype,{movingAverage:function(a,d,e){e=e||{};var f=new c.Derived({parent:this,method:e.method||b.mean,size:d,args:arguments});this.eachColumn(function(a){f.addColumn({name:a,type:this.column(a).type,data:[]})},this),c.Builder.cacheColumns(f);var g=function(){var e=[];typeof a=="string"&&(a=[a]),this.column("_id").data=this.parent.column("_id").data.slice(d-1,this.parent.length),this.eachColumn(function(c,e,f){a.indexOf(c)===-1&&c!=="_oids"?e.data=this.parent.column(c).data.slice(d-1,this.parent.length):e.data=b.movingAvg(this.parent.column(c).data,d,this.method)},this),this.length=this.parent.length-d+1;var f=this.column("_oids");f.data=[];for(var g=0;g<this.length;g++)f.data.push(this.parent.column("_id").data.slice(g,g+d));return c.Builder.cacheRows(this),this};return f.func=b.bind(g,f),f.func.call(f.args)},countBy:function(a,d){function e(a,b,d){var e;for(e=0;e<a.length;e++)if(c.types[d].compare(a[e],b)===0)return e;return-1}d=d||{};var f=new c.Derived({parent:this,method:b.sum,args:arguments}),g=this.column(a);f.addColumn({name:a,type:g.type}),f.addColumn({name:"count",type:"number"}),f.addColumn({name:"_oids",type:"mixed"}),c.Builder.cacheColumns(f);var h=f._column(a).data,i=f._column("count").data,j=f._column("_oids").data,k=f._column("_id").data;return this.each(function(c){var d=e(h,c[a],g.type);d===-1?(h.push(c[a]),k.push(b.uniqueId()),i.push(1),j.push([c._id])):(i[d]+=1,j[d].push(c._id))}),c.Builder.cacheRows(f),f},groupBy:function(a,d,e){e=e||{};var f=new c.Derived({parent:this,method:e.method||b.sum,args:arguments});e&&e.preprocess&&(f.preprocess=e.preprocess);var g=b.union([a],d);b.each(g,function(a){this.addColumn({name:a,type:this.parent.column(a).type})},f),c.Builder.cacheColumns(f);var h=function(){c.Builder.clearRowCache(this);var e={},f=0,g=this._columnPositionByName[a],h=this.parent.column(a);for(var i=0;i<this.parent.length;i++){var j=null;this.preprocess?j=this.preprocess(h.data[i]):j=h.data[i],b.isUndefined(e[j])&&(e[j]=f,b.each(d,function(a){var c=this.column(a),d=this.column("_id");c.data[f]=[],d.data[f]=b.uniqueId()},this),this.column(a).data[f]=j,f++),b.each(d,function(a){var b=this.column(a),c=this.parent.column(a).data[i],d=e[j];b.data[d].push(this.parent.rowByPosition(i))},this)}var k=this._columns[this._columnPositionByName._oids];return k.data=[],b.each(d,function(a){var c=this.column(a);b.each(c.data,function(d,e){b.isArray(d)&&(k.data[e]=k.data[e]||[],k.data[e].push(b.map(d,function(a){return a._id})),k.data[e]=b.flatten(k.data[e]),c.data[e]=this.method(b.map(d,function(b){return b[a]})),this.length++)},this)},this),c.Builder.cacheRows(this),this};return f.func=b.bind(h,f),f.func.call(f.args)}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers=function(a,b){},c.Importers.prototype.extract=function(a){return a=b.clone(a),a}}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers.Local=function(a){a=a||{},this.data=a.data||null,this.extract=a.extract||this.extract},b.extend(c.Importers.Local.prototype,c.Importers.prototype,{fetch:function(a){var b=a.data?a.data:this.data;a.success(this.extract(b))}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers.Remote=function(a){a=a||{},this._url=a.url,this.extract=a.extract||this.extract,this.params={type:"GET",url:b.isFunction(this._url)?b.bind(this._url,this):this._url,dataType:a.dataType?a.dataType:a.jsonp?"jsonp":"json",callback:a.callback}},b.extend(c.Importers.Remote.prototype,c.Importers.prototype,{fetch:function(a){var d=b.bind(function(b){a.success(this.extract(b))},this);this.callback&&(window[this.callback]=d),c.Xhr(b.extend(this.params,{success:this.callback?this.callback:d,error:a.error}))}});var d={url:"",data:"",dataType:"",success:function(){},type:"GET",async:!0,xhr:function(){return a.ActiveXObject?new a.ActiveXObject("Microsoft.XMLHTTP"):new a.XMLHttpRequest}},e=/\?/;c.Xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;var f=b.isFunction(a.url)?a.url():a.url;if(!(!a.dataType||a.dataType!=="jsonp"&&a.dataType!=="script")){c.Xhr.getJSONP(f,a.success,a.dataType==="script",a.error,a.callback);return}var g=b.extend({},d,a,{url:f});g.ajax=g.xhr();if(g.ajax)return g.type==="GET"&&g.data&&(g.url+=(e.test(g.url)?"&":"?")+g.data,g.data=null),g.ajax.open(g.type,g.url,g.async),g.ajax.send(g.data||null),c.Xhr.httpData(g)},c.Xhr.getJSONP=function(a,c,d,e,f){if(d){var g=document.querySelectorAll('script[src="'+a+'"]');if(g.length){c&&c(!0);return}}var h=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script"),j=a.split("?")[1],k=!1,l=[],m;j&&!d&&(l=j.split("&")),l.length&&(m=l[l.length-1].split("="));if(!f){var n=b.uniqueId("callback");f=l.length?m[1]?m[1]:n:n}!j&&!d&&(a+="?");if(!j||!/callback/.test(j))j&&(a+="&"),a+="callback="+f;f&&!d&&(!window[f]||(f=f+ +(new Date)+b.uniqueId()),window[f]=function(a){c&&c(a),k=!0},m&&(a=a.replace(m.join("="),m[0]+"="+f))),i.onload=i.onreadystatechange=function(){if(!i.readyState||/loaded|complete/.test(i.readyState)){d&&c&&c();if(k){try{delete window[f]}catch(a){window[f]=void 0}h.removeChild(i)}}},i.onerror=function(a){e&&e.call(null,a)},i.src=a,h.insertBefore(i,h.firstChild);return},c.Xhr.httpData=function(a){var b,c=null;return a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{c=JSON.parse(a.ajax.responseText)}catch(d){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:c},a.dataType&&(b=b[a.dataType]),/(2..)/.test(a.ajax.status)?a.success.call(a.ajax,b):a.error&&a.error.call(null,a.ajax.statusText)}},b}}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers.Polling=function(a){a=a||{},this.interval=a.interval||1e3,this._def=null,c.Importers.Remote.apply(this,[a])},b.extend(c.Importers.Polling.prototype,c.Importers.Remote.prototype,{fetch:function(d){this._def===null&&(this._def=b.Deferred(),this.success_callback=b.bind(function(a){d.success(this.extract(a)),this._def.resolve(this)},this),this.error_callback=b.bind(function(a){d.error(a),this._def.reject(a)},this)),b.when(this._def.promise()).then(function(a){var c=b.bind(function(){this.fetch({success:this.success_callback,error:this.error_callback})},a);a._timeout=setTimeout(c,a.interval),a._def=b.Deferred()}),c.Xhr(b.extend(this.params,{success:this.success_callback,error:this.error_callback})),a.imp=this},stop:function(){this._def!==null&&this._def.reject(),typeof this._timeout!="undefined"&&clearTimeout(this._timeout)},start:function(){this._def!==null&&(this._def=b.Deferred(),this.fetch())}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Importers.GoogleSpreadsheet=function(a){a=a||{};if(a.url)a.url=a.url;else{if(b.isUndefined(a.key))throw new Error("Set options 'key' properties to point to your google document.");a.fast?(a.url="https://spreadsheets.google.com/tq?key="+a.key,typeof a.sheetName=="undefined"&&(a.sheetName="Sheet1"),a.url+="&sheet="+a.sheetName,this.callback="misodsgs"+(new Date).getTime(),a.url+="&tqx=version:0.6;responseHandler:"+this.callback,a.url+=";reqId:0;out:json&tq&_=1335871249558#",delete a.sheetName):a.url="https://spreadsheets.google.com/feeds/cells/"+a.key+"/"+a.worksheet+"/public/basic?alt=json-in-script&callback=",delete a.key}return this.params={type:"GET",url:a.url,dataType:"jsonp"},this},b.extend(c.Importers.GoogleSpreadsheet.prototype,c.Importers.Remote.prototype)}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers=function(a){this.options=a||{}},b.extend(c.Parsers.prototype,{parse:function(){}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers.Strict=function(a){this.options=a||{}},b.extend(c.Parsers.Strict.prototype,c.Parsers.prototype,{parse:function(a){var c={},d=[];return b.each(a.columns,function(a){if(d.indexOf(a.name)!==-1)throw new Error('You have more than one column named "'+a.name+'"');d.push(a.name),c[a.name]=a.data}),{columns:d,data:c}}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers.Obj=c.Parsers,b.extend(c.Parsers.Obj.prototype,c.Parsers.prototype,{parse:function(a){var c=b.keys(a[0]),d={};return b.each(c,function(a){d[a]=[]}),b.each(c,function(c){b.times(a.length,function(b){d[c].push(a[b][c])})}),{columns:c,data:d}}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers.GoogleSpreadsheet=function(a){this.fast=a.fast||!1},b.extend(c.Parsers.GoogleSpreadsheet.prototype,c.Parsers.prototype,{parse:function(a){var c=[],d=[],e={},f;if(typeof a.status!="undefined"&&a.status==="error")throw new Error("You can't use the fast importer for this url. Disable the fast flag");if(this.fast){c=b.pluck(a.table.cols,"label");if(b.unique(c).length<c.length){var g="";throw b.inject(c,function(a,b){return a[b]=a[b]+1||1,a[b]>1&&(g=b),a},{}),new Error('You have more than one column named "'+g+'"')}b.each(a.table.rows,function(a){a=a.c;for(f=0;f<a.length;f++)d[f]=d[f]||[],a[f].v===""?d[f].push(null):d[f].push(a[f].v)}),b.each(c,function(a,b){e[a]=d[b]})}else{var h=/([A-Z]+)(\d+)/,i={};b.each(a.feed.entry,function(a,b){var e=h.exec(a.title.$t),f=e[1],g=parseInt(e[2],10);if(g===1){if(c.indexOf(a.content.$t)!==-1)throw new Error('You have more than one column named "'+a.content.$t+'"');i[f]=d.length,c[i[f]]=a.content.$t,d[i[f]]=[]}else{var j=i[f];d[j][g-1]=a.content.$t}},this),b.each(d,function(a,f){a.length=b.max(b.pluck(d,"length")),a.splice(0,1);for(var g=0;g<a.length;g++)if(b.isUndefined(a[g])||a[g]==="")a[g]=null;e[c[f]]=a})}return{columns:c,data:e}}})}(this,_),function(a,b){var c=a.Miso||(a.Miso={});c.Parsers.Delimited=function(a){a=a||{},this.delimiter=a.delimiter||",",this.skipRows=a.skipRows||0,this.emptyValue=a.emptyValue||null,this.__delimiterPatterns=new RegExp("(\\"+this.delimiter+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+this.delimiter+"\\r\\n]*))","gi")},typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),b.extend(c.Parsers.Delimited.prototype,c.Parsers.prototype,{parse:function(a){var c=[],d={},e={},f=function(a){e[a]||(e[a]=0);var b=a+e[a];return e[a]+=1,b},g=function(a,e,g,h,i){g=g||",";var j=null,k=0,l=!1,m=-1,n=0;try{e=e.replace(/\s+$/,"").replace(/^[\r|\n|\s]+[\r|\n]/,"\n");if(h>0){var o=0,p=0,q=e.length;while(o<h&&p<q)/\n|\r|\r\n/.test(e.charAt(p))&&o++,p++;e=e.slice(p,q)}function r(a){var e=a[1];if(e.length&&e!==g){n++;if(m<k-1)throw n--,new Error("Not enough items in row");l=!0,m=0}else l||k++,m++;var h=null;a[2]?h=a[2].replace(new RegExp('""',"g"),'"'):h=a[3];if(l){h===""&&(h=i);if(typeof d[c[m]]=="undefined")throw new Error("Too many items in row");d[c[m]].push(h)}else{var j=function(a){var b=f(a);while(c.indexOf(b)!==-1)b=f(a);return b};if(b.isUndefined(h)||h==="")h="X";c.indexOf(h)!==-1&&(h=j(h)),c.push(h),d[h]=[]}}(new RegExp("^"+g)).test(e)&&r(["","",undefined,""]);while(j=a.exec(e))r(j)}catch(s){throw new Error("Error while parsing delimited data on row "+n+". Message: "+s.message)}return{columns:c,data:d}};return g(this.__delimiterPatterns,a,this.delimiter,this.skipRows,this.emptyValue)}})}(this,_),this.Handlebars={},function(a){a.VERSION="1.0.rc.1",a.helpers={},a.partials={},a.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},a.registerPartial=function(a,b){this.partials[a]=b},a.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")});var b=Object.prototype.toString,c="[object Function]";a.registerHelper("blockHelperMissing",function(d,e){var f=e.inverse||function(){},g=e.fn,h="",i=b.call(d);return i===c&&(d=d.call(this)),d===!0?g(this):d===!1||d==null?f(this):i==="[object Array]"?d.length>0?a.helpers.each(d,e):f(this):g(d)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.registerHelper("each",function(b,c){var d=c.fn,e=c.inverse,f="",g;c.data&&(g=a.createFrame(c.data));if(b&&b.length>0)for(var h=0,i=b.length;h<i;h++)g&&(g.index=h),f=f+d(b[h],{data:g});else f=e(this);return f}),a.registerHelper("if",function(d,e){var f=b.call(d);return f===c&&(d=d.call(this)),!d||a.Utils.isEmpty(d)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){var d=c.fn,e=c.inverse;return c.fn=e,c.inverse=d,a.helpers["if"].call(this,b,c)}),a.registerHelper("with",function(a,b){return b.fn(a)}),a.registerHelper("log",function(b){a.log(b)})}(this.Handlebars);var handlebars=function(){function c(){this.yy={}}var a={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,DATA:27,param:28,STRING:29,INTEGER:30,BOOLEAN:31,hashSegments:32,hashSegment:33,ID:34,EQUALS:35,pathSegments:36,SEP:37,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",27:"DATA",29:"STRING",30:"INTEGER",31:"BOOLEAN",34:"ID",35:"EQUALS",37:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[17,1],[25,2],[25,1],[28,1],[28,1],[28,1],[28,1],[28,1],[26,1],[32,2],[32,1],[33,3],[33,3],[33,3],[33,3],[33,3],[21,1],[36,3],[36,1]],performAction:function e(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=new d.ProgramNode(f[h-2],f[h]);break;case 3:this.$=new d.ProgramNode(f[h]);break;case 4:this.$=new d.ProgramNode([]);break;case 5:this.$=[f[h]];break;case 6:f[h-1].push(f[h]),this.$=f[h-1];break;case 7:this.$=new d.BlockNode(f[h-2],f[h-1].inverse,f[h-1],f[h]);break;case 8:this.$=new d.BlockNode(f[h-2],f[h-1],f[h-1].inverse,f[h]);break;case 9:this.$=f[h];break;case 10:this.$=f[h];break;case 11:this.$=new d.ContentNode(f[h]);break;case 12:this.$=new d.CommentNode(f[h]);break;case 13:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 14:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 15:this.$=f[h-1];break;case 16:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 17:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1],!0);break;case 18:this.$=new d.PartialNode(f[h-1]);break;case 19:this.$=new d.PartialNode(f[h-2],f[h-1]);break;case 20:break;case 21:this.$=[[f[h-2]].concat(f[h-1]),f[h]];break;case 22:this.$=[[f[h-1]].concat(f[h]),null];break;case 23:this.$=[[f[h-1]],f[h]];break;case 24:this.$=[[f[h]],null];break;case 25:this.$=[[new d.DataNode(f[h])],null];break;case 26:f[h-1].push(f[h]),this.$=f[h-1];break;case 27:this.$=[f[h]];break;case 28:this.$=f[h];break;case 29:this.$=new d.StringNode(f[h]);break;case 30:this.$=new d.IntegerNode(f[h]);break;case 31:this.$=new d.BooleanNode(f[h]);break;case 32:this.$=new d.DataNode(f[h]);break;case 33:this.$=new d.HashNode(f[h]);break;case 34:f[h-1].push(f[h]),this.$=f[h-1];break;case 35:this.$=[f[h]];break;case 36:this.$=[f[h-2],f[h]];break;case 37:this.$=[f[h-2],new d.StringNode(f[h])];break;case 38:this.$=[f[h-2],new d.IntegerNode(f[h])];break;case 39:this.$=[f[h-2],new d.BooleanNode(f[h])];break;case 40:this.$=[f[h-2],new d.DataNode(f[h])];break;case 41:this.$=new d.IdNode(f[h]);break;case 42:f[h-2].push(f[h]),this.$=f[h-2];break;case 43:this.$=[f[h]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,27:[1,24],34:[1,26],36:25},{17:27,21:23,27:[1,24],34:[1,26],36:25},{17:28,21:23,27:[1,24],34:[1,26],36:25},{17:29,21:23,27:[1,24],34:[1,26],36:25},{21:30,34:[1,26],36:25},{1:[2,1]},{6:31,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,32],21:23,27:[1,24],34:[1,26],36:25},{10:33,20:[1,34]},{10:35,20:[1,34]},{18:[1,36]},{18:[2,24],21:41,25:37,26:38,27:[1,45],28:39,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,25]},{18:[2,41],27:[2,41],29:[2,41],30:[2,41],31:[2,41],34:[2,41],37:[1,48]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],37:[2,43]},{18:[1,49]},{18:[1,50]},{18:[1,51]},{18:[1,52],21:53,34:[1,26],36:25},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:54,34:[1,26],36:25},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:41,26:55,27:[1,45],28:56,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,23]},{18:[2,27],27:[2,27],29:[2,27],30:[2,27],31:[2,27],34:[2,27]},{18:[2,33],33:57,34:[1,58]},{18:[2,28],27:[2,28],29:[2,28],30:[2,28],31:[2,28],34:[2,28]},{18:[2,29],27:[2,29],29:[2,29],30:[2,29],31:[2,29],34:[2,29]},{18:[2,30],27:[2,30],29:[2,30],30:[2,30],31:[2,30],34:[2,30]},{18:[2,31],27:[2,31],29:[2,31],30:[2,31],31:[2,31],34:[2,31]},{18:[2,32],27:[2,32],29:[2,32],30:[2,32],31:[2,32],34:[2,32]},{18:[2,35],34:[2,35]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],35:[1,59],37:[2,43]},{34:[1,60]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,61]},{18:[1,62]},{18:[2,21]},{18:[2,26],27:[2,26],29:[2,26],30:[2,26],31:[2,26],34:[2,26]},{18:[2,34],34:[2,34]},{35:[1,59]},{21:63,27:[1,67],29:[1,64],30:[1,65],31:[1,66],34:[1,26],36:25},{18:[2,42],27:[2,42],29:[2,42],30:[2,42],31:[2,42],34:[2,42],37:[2,42]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,36],34:[2,36]},{18:[2,37],34:[2,37]},{18:[2,38],34:[2,38]},{18:[2,39],34:[2,39]},{18:[2,40],34:[2,40]}],defaultActions:{16:[2,1],24:[2,25],38:[2,23],55:[2,21]},parseError:function(a,b){throw new Error(a)},parse:function g(a){function o(a){c.length=c.length-2*a,d.length=d.length-a,e.length=e.length-a}function p(){var a;return a=b.lexer.lex()||1,typeof a!="number"&&(a=b.symbols_[a]||a),a}var b=this,c=[0],d=[null],e=[],f=this.table,g="",h=0,i=0,j=0,k=2,l=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var m=this.lexer.yylloc;e.push(m);var n=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var q,r,s,t,u,v,w={},x,y,z,A;for(;;){s=c[c.length-1];if(this.defaultActions[s])t=this.defaultActions[s];else{if(q===null||typeof q=="undefined")q=p();t=f[s]&&f[s][q]}if(typeof t=="undefined"||!t.length||!t[0]){var B="";if(!j){A=[];for(x in f[s])this.terminals_[x]&&x>2&&A.push("'"+this.terminals_[x]+"'");this.lexer.showPosition?B="Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[q]||q)+"'":B="Parse error on line "+(h+1)+": Unexpected "+(q==1?"end of input":"'"+(this.terminals_[q]||q)+"'"),this.parseError(B,{text:this.lexer.match,token:this.terminals_[q]||q,line:this.lexer.yylineno,loc:m,expected:A})}}if(t[0]instanceof Array&&t.length>1)throw new Error("Parse Error: multiple actions possible at state: "+s+", token: "+q);switch(t[0]){case 1:c.push(q),d.push(this.lexer.yytext),e.push(this.lexer.yylloc),c.push(t[1]),q=null,r?(q=r,r=null):(i=this.lexer.yyleng,g=this.lexer.yytext,h=this.lexer.yylineno,m=this.lexer.yylloc,j>0&&j--);break;case 2:y=this.productions_[t[1]][1],w.$=d[d.length-y],w._$={first_line:e[e.length-(y||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(y||1)].first_column,last_column:e[e.length-1].last_column},n&&(w._$.range=[e[e.length-(y||1)].range[0],e[e.length-1].range[1]]),v=this.performAction.call(w,g,i,h,this.yy,t[1],d,e);if(typeof v!="undefined")return v;y&&(c=c.slice(0,-1*y*2),d=d.slice(0,-1*y),e=e.slice(0,-1*y)),c.push(this.productions_[t[1]][0]),d.push(w.$),e.push(w._$),z=f[c[c.length-2]][c[c.length-1]],c.push(z);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function b(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw new Error(a)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=(new Array(a.length+1)).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e,f;this._more||(this.yytext="",this.match="");var g=this._currentRules();for(var h=0;h<g.length;h++){c=this._input.match(this.rules[g[h]]);if(c&&(!b||c[0].length>b[0].length)){b=c,d=h;if(!this.options.flex)break}}if(b){f=b[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,g[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(a)return a;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a!="undefined"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){var e=d;switch(c){case 0:b.yytext.slice(-1)!=="\\"&&this.begin("mu"),b.yytext.slice(-1)==="\\"&&(b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu"));if(b.yytext)return 14;break;case 1:return 14;case 2:return b.yytext.slice(-1)!=="\\"&&this.popState(),b.yytext.slice(-1)==="\\"&&(b.yytext=b.yytext.substr(0,b.yyleng-1)),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 35;case 13:return 34;case 14:return 34;case 15:return 37;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),29;case 20:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),29;case 21:return b.yytext=b.yytext.substr(1),27;case 22:return 31;case 23:return 31;case 24:return 30;case 25:return 34;case 26:return b.yytext=b.yytext.substr(1,b.yyleng-2),34;case 27:return"INVALID";case 28:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,28],inclusive:!0}},a}();return a.lexer=b,c.prototype=a,a.Parser=c,new c}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=handlebars,exports.Parser=handlebars.Parser,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function a(a){if(!a[1])throw new Error("Usage: "+a[0]+" FILE");var b,c;return typeof process!="undefined"?b=require("fs").readFileSync(require("path").resolve(a[1]),"utf8"):b=require("file").path(require("file").cwd()).join(a[1]).read({charset:"utf-8"}),exports.parser.parse(b)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(a){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(a)},Handlebars.print=function(a){return(new Handlebars.PrintVisitor).accept(a)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){}},Handlebars.log=function(a,b){Handlebars.logger.log(a,b)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(a,b){this.type="program",this.statements=a,b&&(this.inverse=new Handlebars.AST.ProgramNode(b))},Handlebars.AST.MustacheNode=function(a,b,c){this.type="mustache",this.escaped=!c,this.hash=b;var d=this.id=a[0],e=this.params=a.slice(1),f=this.eligibleHelper=d.isSimple;this.isHelper=f&&(e.length||b)},Handlebars.AST.PartialNode=function(a,b){this.type="partial",this.id=a,this.context=b};var a=function(a,b){if(a.original!==b.original)throw new Handlebars.Exception(a.original+" doesn't match "+b.original)};Handlebars.AST.BlockNode=function(b,c,d,e){a(b.id,e),this.type="block",this.mustache=b,this.program=c,this.inverse=d,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(a){this.type="content",this.string=a},Handlebars.AST.HashNode=function(a){this.type="hash",this.pairs=a},Handlebars.AST.IdNode=function(a){this.type="ID",this.original=a.join(".");var b=[],c=0;for(var d=0,e=a.length;d<e;d++){var f=a[d];f===".."?c++:f==="."||f==="this"?this.isScoped=!0:b.push(f)}this.parts=b,this.string=b.join("."),this.depth=c,this.isSimple=a.length===1&&!this.isScoped&&c===0},Handlebars.AST.DataNode=function(a){this.type="DATA",this.id=a},Handlebars.AST.StringNode=function(a){this.type="STRING",this.string=a},Handlebars.AST.IntegerNode=function(a){this.type="INTEGER",this.integer=a},Handlebars.AST.BooleanNode=function(a){this.type="BOOLEAN",this.bool=a},Handlebars.AST.CommentNode=function(a){this.type="comment",this.comment=a}}(),Handlebars.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/[&<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():a==null||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(a,b){a.prototype={compiler:a,disassemble:function(){var a=this.opcodes,b,c=[],d,e;for(var f=0,g=a.length;f<g;f++){b=a[f];if(b.opcode==="DECLARE")c.push("DECLARE "+b.name+"="+b.value);else{d=[];for(var h=0;h<b.args.length;h++)e=b.args[h],typeof e=="string"&&(e='"'+e.replace("\n","\\n")+'"'),d.push(e);c.push(b.opcode+" "+d.join(" "))}}return c.join("\n")},guid:0,compile:function(a,b){this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var b=a.statements,c;this.opcodes=[];for(var d=0,e=b.length;d<e;d++)c=b[d],this[c.type](c);return this.isSimple=e===1,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b=(new this.compiler).compile(a,this.options),c=this.guid++,d;this.usePartial=this.usePartial||b.usePartial,this.children[c]=b;for(var e=0,f=b.depths.list.length;e<f;e++){d=b.depths.list[e];if(d<2)continue;this.addDepth(d-1)}return c},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=this.classifyMustache(b);e==="helper"?this.helperMustache(b,c,d):e==="simple"?(this.simpleMustache(b),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("pushLiteral","{}"),this.opcode("blockValue")):(this.ambiguousMustache(b,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("pushLiteral","{}"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b=a.pairs,c,d;this.opcode("push","{}");for(var e=0,f=b.length;e<f;e++)c=b[e],d=c[1],this.accept(d),this.opcode("assignToHash",c[0])},partial:function(a){var b=a.id;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.original),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.options,c=this.classifyMustache(a);c==="simple"?this.simpleMustache(a):c==="helper"?this.helperMustache(a):this.ambiguousMustache(a),a.escaped&&!b.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(a,b,c){var d=a.id,e=d.parts[0];this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e)},simpleMustache:function(a,b,c){var d=a.id;d.type==="DATA"?this.DATA(d):d.parts.length?this.ID(d):(this.addDepth(d.depth),this.opcode("getContext",d.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+e);this.opcode("invokeHelper",d.length,e)}},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;c<d;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){this.options.data=!0,this.opcode("lookupData",a.id)},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){if(isNaN(a))throw new Error("EWOT");if(a===0)return;this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a))},classifyMustache:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){var b=a.length,c;while(b--)c=a[b],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.string)):this[c.type](c)},setupMustacheParams:function(a){var b=a.params;return this.pushParams(b),a.hash?this.hash(a.hash):this.opcode("pushLiteral","{}"),b},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("pushLiteral","{}"),d}};var c=function(a){this.value=a};b.prototype={nameLookup:function(a,c,d){return/^[0-9]+$/.test(c)?a+"["+c+"]":b.isValidJavaScriptVariableName(c)?a+"."+c:a+"['"+c+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":"buffer += "+a+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.compileChildren(a,b);var e=a.opcodes,f;this.i=0;for(g=e.length;this.i<g;this.i++)f=e[this.i],f.opcode==="DECLARE"?this[f.name]=f.value:this[f.opcode].apply(this,f.args);return this.createFunctionContext(d)},nextOpcode:function(){var a=this.environment.opcodes,b=a[this.i+1];return a[this.i+1]},eat:function(a){this.i=this.i+1},preamble:function(){var a=[];if(!this.isChild){var b=this.namespace,c="helpers = helpers || "+b+".helpers;";this.environment.usePartial&&(c=c+" partials = partials || "+b+".partials;"),this.options.data&&(c=c+" data = data || {};"),a.push(c)}else a.push("");this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", "));if(!this.isChild){var c=[];for(var d in this.context.aliases)this.source[1]=this.source[1]+", "+d+"="+this.context.aliases[d]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var e=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var f=0,g=this.environment.depths.list.length;f<g;f++)e.push("depth"+this.environment.depths.list[f]);if(a)return e.push(this.source.join("\n  ")),Function.apply(this,e);var h="function "+(this.name||"")+"("+e.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,h+"\n\n"),h},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),b+" = blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.source.push("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var a=this.nextOpcode(),b="";this.context.aliases.escapeExpression="this.escapeExpression",a&&a.opcode==="appendContent"&&(b=" + "+this.quotedString(a.args[0]),this.eat(a)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+b))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.pushStack(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+"() : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(a){this.pushStack(this.nameLookup("data",a,"data"))},pushStringParam:function(a){this.pushStackLiteral("depth"+this.lastContext),this.pushString(a)},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){this.pushStack(a)},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){a!=null?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b){this.context.aliases.helperMissing="helpers.helperMissing";var c=this.lastHelper=this.setupHelper(a,b);this.register("foundHelper",c.name),this.pushStack("foundHelper ? foundHelper.call("+c.callParams+") "+": helperMissing.call("+c.helperMissingParams+")")},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.pushStack(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var b=this.setupHelper(0,a),c=this.lastHelper=this.nameLookup("helpers",a,"helper");this.register("foundHelper",c);var d=this.nameLookup("depth"+this.lastContext,a,"context"),e=this.nextStack();this.source.push("if (foundHelper) { "+e+" = foundHelper.call("+b.callParams+"); }"),this.source.push("else { "+e+" = "+d+"; "+e+" = typeof "+e+" === functionType ? "+e+"() : "+e+"; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.pushStack("self.invokePartial("+b.join(", ")+");")},assignToHash:function(a){var b=this.popStack(),c=this.topStack();this.source.push(c+"['"+a+"'] = "+b+";")},compiler:b,compileChildren:function(a,b){var c=a.children,d,e;for(var f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler,this.context.programs.push("");var h=this.context.programs.length;d.index=h,d.name="program"+h,this.context.programs[h]=e.compile(d,b,this.context)}},programExpression:function(a){this.context.aliases.self="this";if(a==null)return"self.noop";var b=this.environment.children[a],c=b.depths.list,d,e=[b.index,b.name,"data"];for(var f=0,g=c.length;f<g;f++)d=c[f],d===1?e.push("depth0"):e.push("depth"+(d-1));return c.length===0?"self.program("+e.join(", ")+")":(e.shift(),"self.programWithDepth("+e.join(", ")+")")},register:function(a,b){this.useRegister(a),this.source.push(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.compileStack.push(new c(a)),a},pushStack:function(a){return this.source.push(this.incrStack()+" = "+a+";"),this.compileStack.push("stack"+this.stackSlot),"stack"+this.stackSlot},replaceStack:function(a){var b=a.call(this,this.topStack());return this.source.push(this.topStack()+" = "+b+";"),"stack"+this.stackSlot},nextStack:function(a){var b=this.incrStack();return this.compileStack.push("stack"+this.stackSlot),b},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){var a=this.compileStack.pop();return a instanceof c?a.value:(this.stackSlot--,a)},topStack:function(){var a=this.compileStack[this.compileStack.length-1];return a instanceof c?a.value:a},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(a,b){var c=[];this.setupParams(a,c);var d=this.nameLookup("helpers",b,"helper");return{params:c,name:d,callParams:["depth0"].concat(c).join(", "),helperMissingParams:["depth0",this.quotedString(b)].concat(c).join(", ")}},setupParams:function(a,b){var c=[],d=[],e,f,g;c.push("hash:"+this.popStack()),f=this.popStack(),g=this.popStack();if(g||f)g||(this.context.aliases.self="this",g="self.noop"),f||(this.context.aliases.self="this",f="self.noop"),c.push("inverse:"+f),c.push("fn:"+g);for(var h=0;h<a;h++)e=this.popStack(),b.push(e),this.options.stringParams&&d.push(this.popStack());return this.options.stringParams&&c.push("contexts:["+d.join(",")+"]"),this.options.data&&c.push("data:data"),b.push("{"+c.join(",")+"}"),b.join(", ")}};var d="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),e=b.RESERVED_WORDS={};for(var f=0,g=d.length;f<g;f++)e[d[f]]=!0;b.isValidJavaScriptVariableName=function(a){return!b.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(a,b){b=b||{};var c=Handlebars.parse(a),d=(new Handlebars.Compiler).compile(c,b);return(new Handlebars.JavaScriptCompiler).compile(d,b)},Handlebars.compile=function(a,b){function d(){var c=Handlebars.parse(a),d=(new Handlebars.Compiler).compile(c,b),e=(new Handlebars.JavaScriptCompiler).compile(d,b,undefined,!0);return Handlebars.template(e)}b=b||{};var c;return function(a,b){return c||(c=d()),c.call(this,a,b)}},Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:(d=this.programs[a]=Handlebars.VM.program(b),d)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,f){var g={helpers:d,partials:e,data:f};if(a===undefined)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in runtime-only mode");return e[b]=Handlebars.compile(a,{data:f!==undefined}),e[b](c,g)}},Handlebars.template=Handlebars.VM.template,function(a){a.fn.jOdometer=function(b){function t(a){a!=undefined?(clearInterval(s),f=a,u(f)):(u(f),f=f+b.increment),b.counterEnd!=!1&&f>=b.counterEnd&&(clearInterval(s),u(b.counterEnd))}function u(d){i=String(d).split(".");if(h.length>0)for(m=0;m<h.length;m++)oldDigit=h[m],i[1]&&(h[m]=i[1].charAt(m)),h[m]==""&&(h[m]="0"),v(a(".jodometer_decimal_"+m,c),parseInt(h[m]),parseInt(oldDigit));n=i[0],l=n.length-1;var f=b.maxDigits==0?g.length:b.maxDigits;for(m=0;m<f;m++)oldDigit=g[m],l>=0&&(g[m]=n.charAt(l)),g[m]==""&&b.maxDigits==0&&(g[m]="0"),oldDigit==""&&(b.prefixChar?(l==0&&(a(".jodometer_integer_"+m,c).animate({top:e},0,"linear"),oldDigit="0"),l==-1&&(a(".jodometer_integer_"+m,c).animate({top:15*b.heightNumber*-1},1,"linear"),a(".jodometer_integer_"+m,c).show())):l==0&&(a(".jodometer_integer_"+m,c).show(),oldDigit="0")),v(a(".jodometer_integer_"+m,c),parseInt(g[m]),parseInt(oldDigit)),l--}function v(a,c,d){if(isNaN(c)||isNaN(d))return this;c!=d&&(a.stop(),c==0?a.animate({top:10*b.heightNumber*-1+e},b.speed,b.easing).animate({top:e},1,"linear"):c<d?a.animate({top:10*b.heightNumber*-1+e},b.speed*((10-d)/10),"linear").animate({top:e},1,"linear").animate({top:c*b.heightNumber*-1+e},b.speed*d/10,b.easing):a.animate({top:c*b.heightNumber*-1+e},b.speed,b.easing))}if(this.length>1)return this.each(function(){a(this).jOdometer(b)}),this;b=a.extend({},a.fn.jOdometer.defaults,b),this.goToNumber=function(a){t(a)};var c=a(this),d=this,e=-b.heightNumber,f=parseFloat(b.counterStart),g=[],h=[],i=String(b.counterStart).split("."),j=0,k=0;if(i[1]){var l=0;for(var m=i[1].length-1;m>-1;m--)h[m]=i[1].charAt(m),a(this).append('<img style="position:absolute; right:'+(l*b.widthNumber+b.offsetRight+l*b.spaceNumbers)+"px; top:"+(parseInt(h[m])*b.heightNumber*-1+e)+'px;" class="jodometer_decimal_'+m+'" src="'+b.numbersImage+'" alt="Decimal '+(m+1)+'" />'),l++;a(this).append('<div style="position:absolute; width:'+b.widthDot+"px; height:"+b.heightNumber+"px; background:url("+b.numbersImage+") no-repeat center "+(12*b.heightNumber*-1+e)+"px; right:"+(i[1].length*b.widthNumber+b.offsetRight+i[1].length*b.spaceNumbers)+'px;" class="jodometer_dot"></div>'),j=i[1].length,k=b.widthDot}var n=i[0],l=n.length-1,o=0,p=b.maxDigits==0?n.length:b.maxDigits;for(var m=0;m<p;m++){m<n.length?g[m]=n.charAt(l):g[m]="",b.formatNumber&&m>0&&m%3==0&&(a(this).append('<div style="position:absolute; width:'+b.widthDot+"px; "+"height:"+b.heightNumber+"px; "+"background:url("+b.numbersImage+") "+"no-repeat center bottom; "+"right:"+(m*b.widthNumber+j*b.widthNumber+k+o+b.offsetRight+j*b.spaceNumbers+m*b.spaceNumbers+b.spaceNumbers)+"px;"+'" class="jodometer_dot"></div>'),o+=b.widthDot+b.spaceNumbers);var q="";l<0&&(q="display:none; ");var r=parseInt(g[m]);b.prefixChar&&l==-1&&(q="",r=14),a(this).append('<img style="'+q+"position:absolute; "+"right:"+(m*b.widthNumber+j*b.widthNumber+k+o+b.offsetRight+j*b.spaceNumbers+m*b.spaceNumbers+b.spaceNumbers)+"px; "+"top:"+(r*b.heightNumber*-1+e)+"px;"+'" class="jodometer_integer_'+m+'" src="'+b.numbersImage+'" alt="Integer '+(m+1)+'" />'),l--}if(parseFloat(b.counterStart)!=b.counterEnd||b.counterEnd.toString()=="false"&&parseFloat(b.counterStart)==0)var s=setInterval(function(){t()},b.delayTime);return this},a.fn.jOdometer.defaults={counterStart:"0000.00",counterEnd:!1,delayTime:1e3,increment:.01,speed:500,easing:"swing",numbersImage:"/images/jodometer-numbers.png",formatNumber:!1,heightNumber:31,widthNumber:14,offsetRight:0,spaceNumbers:0,widthDot:10,maxDigits:0,prefixChar:!1}}(jQuery),function(a,b,c,d){var e=c(a),f=c(b),g=c.fancybox=function(){g.open.apply(this,arguments)},h=null,i=b.createTouch!==d,j=function(a){return a&&a.hasOwnProperty&&a instanceof c},k=function(a){return a&&"string"===c.type(a)},l=function(a){return k(a)&&0<a.indexOf("%")},m=function(a,b){var c=parseInt(a,10);return b&&l(a)&&(c*=g.getViewport()[b]/100),Math.ceil(c)},n=function(a,b){return m(a,b)+"px"};c.extend(g,{version:"2.1.0",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!i,autoCenter:!i,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"'+(c.browser.msie?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{closeClick:!0,speedOut:200,showEarly:!0,css:{}},title:{type:"float"}},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){if(a&&(c.isPlainObject(b)||(b={}),!1!==g.close(!0)))return c.isArray(a)||(a=j(a)?c(a).get():[a]),c.each(a,function(e,f){var h={},i,l,m,n,o;"object"===c.type(f)&&(f.nodeType&&(f=c(f)),j(f)?(h={href:f.attr("href"),title:f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,h,f.metadata())):h=f),i=b.href||h.href||(k(f)?f:null),l=b.title!==d?b.title:h.title||"",n=(m=b.content||h.content)?"html":b.type||h.type,!n&&h.isDom&&(n=f.data("fancybox-type"),n||(n=(n=f.prop("class").match(/fancybox\.(\w+)/))?n[1]:null)),k(i)&&(n||(g.isImage(i)?n="image":g.isSWF(i)?n="swf":"#"===i.charAt(0)?n="inline":k(f)&&(n="html",m=f)),"ajax"===n)&&(o=i.split(/\s+/,2),i=o.shift(),o=o.shift()),m||("inline"===n?i?m=c(k(i)?i.replace(/.*(?=#[^\s]+$)/,""):i):h.isDom&&(m=f):"html"===n?m=i:!n&&!i&&h.isDom&&(n="inline",m=f)),c.extend(h,{href:i,type:n,content:m,title:l,selector:o}),a[e]=h}),g.opts=c.extend(!0,{},g.defaults,b),b.keys!==d&&(g.opts.keys=b.keys?c.extend({},g.defaults.keys,b.keys):!1),g.group=a,g._start(g.opts.index)},cancel:function(){var a=g.coming;a&&!1!==g.trigger("onCancel")&&(g.hideLoading(),g.ajaxLoad&&g.ajaxLoad.abort(),g.ajaxLoad=null,g.imgPreload&&(g.imgPreload.onload=g.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0).trigger("onReset").remove(),g.current||g.trigger("afterClose"),g.coming=null)},close:function(a){g.cancel(),!1!==g.trigger("beforeClose")&&(g.unbindEvents(),!g.isOpen||!0===a?(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),g._afterZoomOut()):(g.isOpen=g.isOpened=!1,g.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),g.wrap.stop(!0,!0).removeClass("fancybox-opened"),"fixed"===g.wrap.css("position")&&g.wrap.css(g._getPosition(!0)),g.transitions[g.current.closeMethod]()))},play:function(a){var b=function(){clearTimeout(g.player.timer)},d=function(){b(),g.current&&g.player.isActive&&(g.player.timer=setTimeout(g.next,g.current.playSpeed))},e=function(){b(),c("body").unbind(".player"),g.player.isActive=!1,g.trigger("onPlayEnd")};!0===a||!g.player.isActive&&!1!==a?g.current&&(g.current.loop||g.current.index<g.group.length-1)&&(g.player.isActive=!0,c("body").bind({"afterShow.player onUpdate.player":d,"onCancel.player beforeClose.player":e,"beforeLoad.player":b}),d(),g.trigger("onPlayStart")):e()},next:function(a){var b=g.current;b&&(k(a)||(a=b.direction.next),g.jumpto(b.index+1,a,"next"))},prev:function(a){var b=g.current;b&&(k(a)||(a=b.direction.prev),g.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=g.current;e&&(a=m(a),g.direction=b||e.direction[a>=e.index?"next":"prev"],g.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d)&&(g.cancel(),g._start(a))},reposition:function(a,b){var c;g.isOpen&&(c=g._getPosition(b),a&&"scroll"===a.type?(delete c.position,g.wrap.stop(!0,!0).animate(c,200)):g.wrap.css(c))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(h),h=null);if(g.isOpen&&!h){if(c||i)g.wrap.removeAttr("style").addClass("fancybox-tmp"),g.trigger("onUpdate");h=setTimeout(function(){var c=g.current;c&&(g.wrap.removeClass("fancybox-tmp"),b!=="scroll"&&g._setDimension(),b==="scroll"&&c.canShrink||g.reposition(a),g.trigger("onUpdate"),h=null)},i?500:c?20:300)}},toggle:function(a){g.isOpen&&(g.current.fitToView="boolean"===c.type(a)?a:!g.current.fitToView,g.update())},hideLoading:function(){f.unbind("keypress.fb"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;g.hideLoading(),f.bind("keypress.fb",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),g.cancel())}),a=c('<div id="fancybox-loading"><div></div></div>').click(g.cancel).appendTo("body"),g.defaults.fixed||(b=g.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=g.current?g.current.locked:!1,c={x:e.scrollLeft(),y:e.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=i&&a.innerWidth?a.innerWidth:e.width(),c.h=i&&a.innerHeight?a.innerHeight:e.height()),c},unbindEvents:function(){g.wrap&&j(g.wrap)&&g.wrap.unbind(".fb"),f.unbind(".fb"),e.unbind(".fb")},bindEvents:function(){var a=g.current,b;a&&(e.bind("orientationchange.fb"+(i?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),g.update),(b=a.keys)&&f.bind("keydown.fb",function(e){var f=e.which||e.keyCode,h=e.target||e.srcElement;!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&(!h||!h.type&&!c(h).is("[contenteditable]"))&&c.each(b,function(b,h){if(1<a.group.length&&h[f]!==d)return g[b](h[f]),e.preventDefault(),!1;if(-1<c.inArray(f,h))return g[b](),e.preventDefault(),!1})}),c.fn.mousewheel&&a.mouseWheel&&g.wrap.bind("mousewheel.fb",function(b,d,e,f){for(var h=c(b.target||null),i=!1;h.length&&!i&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)i=h[0]&&(!h[0].style.overflow||"hidden"!==h[0].style.overflow)&&(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=c(h).parent();0!==d&&!i&&1<g.group.length&&!a.canShrink&&(0<f||0<e?g.prev(0<f?"down":"left"):(0>f||0>e)&&g.next(0>f?"up":"right"),b.preventDefault())}))},trigger:function(a,b){var d,e=b||g.coming||g.current;if(e){c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1)));if(!1===d)return!1;"onCancel"===a&&!g.isOpened&&(g.isActive=!1),e.helpers&&c.each(e.helpers,function(b,d){d&&g.helpers[b]&&c.isFunction(g.helpers[b][a])&&g.helpers[b][a](d,e)}),c.event.trigger(a+".fb")}},isImage:function(a){return k(a)&&a.match(/\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$/i)},isSWF:function(a){return k(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var b={},d,e,a=m(a);d=g.group[a]||null;if(!d)return!1;b=c.extend(!0,{},g.opts,d),d=b.margin,e=b.padding,"number"===c.type(d)&&(b.margin=[d,d,d,d]),"number"===c.type(e)&&(b.padding=[e,e,e,e]),b.modal&&c.extend(!0,b,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),b.autoSize&&(b.autoWidth=b.autoHeight=!0),"auto"===b.width&&(b.autoWidth=!0),"auto"===b.height&&(b.autoHeight=!0),b.group=g.group,b.index=a,g.coming=b;if(!1===g.trigger("beforeLoad"))g.coming=null;else{e=b.type,d=b.href;if(!e)return g.coming=null,g.current&&g.router&&"jumpto"!==g.router?(g.current.index=a,g[g.router](g.direction)):!1;g.isActive=!0;if("image"===e||"swf"===e)b.autoHeight=b.autoWidth=!1,b.scrolling="visible";"image"===e&&(b.aspectRatio=!0),"iframe"===e&&i&&(b.scrolling="scroll"),b.wrap=c(b.tpl.wrap).addClass("fancybox-"+(i?"mobile":"desktop")+" fancybox-type-"+e+" fancybox-tmp "+b.wrapCSS).appendTo(b.parent),c.extend(b,{skin:c(".fancybox-skin",b.wrap),outer:c(".fancybox-outer",b.wrap),inner:c(".fancybox-inner",b.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,c){b.skin.css("padding"+c,n(b.padding[a]))}),g.trigger("onReady");if("inline"===e||"html"===e){if(!b.content||!b.content.length)return g._error("content")}else if(!d)return g._error("href");"image"===e?g._loadImage():"ajax"===e?g._loadAjax():"iframe"===e?g._loadIframe():g._afterLoad()}},_error:function(a){c.extend(g.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:g.coming.tpl.error}),g._afterLoad()},_loadImage:function(){var a=g.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,g.coming.width=this.width,g.coming.height=this.height,g._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,g._error("image")},a.src=g.coming.href,(a.complete===d||!a.complete)&&g.showLoading()},_loadAjax:function(){var a=g.coming;g.showLoading(),g.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){g.coming&&"abort"!==b?g._error("ajax",a):g.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,g._afterLoad())}}))},_loadIframe:function(){var a=g.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",i?"auto":a.iframe.scrolling).attr("src",a.href);c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(g.showLoading(),b.one("load",function(){c(this).data("ready",1),i||c(this).bind("load.fb",g.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),g._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||g._afterLoad()},_preloadImages:function(){var a=g.group,b=g.current,c=a.length,d=b.preload?Math.min(b.preload,c-1):0,e,f;for(f=1;f<=d;f+=1)e=a[(b.index+f)%c],"image"===e.type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var a=g.coming,b=g.current,d,e,f,h,i;g.hideLoading();if(a&&!1!==g.isActive)if(!1===g.trigger("afterLoad",a,b))a.wrap.stop(!0).trigger("onReset").remove(),g.coming=null;else{b&&(g.trigger("beforeChange",b),b.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove(),"fixed"===b.wrap.css("position")&&b.wrap.css(g._getPosition(!0))),g.unbindEvents(),d=a.content,e=a.type,f=a.scrolling,c.extend(g,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:b}),h=a.href;switch(e){case"inline":case"ajax":case"html":a.selector?d=c("<div>").html(d).find(a.selector):j(d)&&(d.data("fancybox-placeholder")||d.data("fancybox-placeholder",c('<div class="fancybox-placeholder"></div>').insertAfter(d).hide()),d=d.show().detach(),a.wrap.bind("onReset",function(){c(this).find(d).length&&d.hide().replaceAll(d.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":d=a.tpl.image.replace("{href}",h);break;case"swf":d='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+h+'"></param>',i="",c.each(a.swf,function(a,b){d=d+('<param name="'+a+'" value="'+b+'"></param>'),i=i+(" "+a+'="'+b+'"')}),d+='<embed src="'+h+'" type="application/x-shockwave-flash" width="100%" height="100%"'+i+"></embed></object>"}(!j(d)||!d.parent().is(a.inner))&&a.inner.append(d),g.trigger("beforeShow"),a.inner.css("overflow","yes"===f?"scroll":"no"===f?"hidden":f),g._setDimension(),a.wrap.removeClass("fancybox-tmp"),a.pos=c.extend({},a.dim,g._getPosition(!0)),g.isOpen=!1,g.coming=null,g.bindEvents(),g.isOpened?b.prevMethod&&g.transitions[b.prevMethod]():c(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),g.transitions[g.isOpened?a.nextMethod:a.openMethod](),g._preloadImages()}},_setDimension:function(){var a=g.getViewport(),b=0,d=!1,e=!1,d=g.wrap,f=g.skin,h=g.inner,i=g.current,e=i.width,j=i.height,k=i.minWidth,o=i.minHeight,p=i.maxWidth,q=i.maxHeight,r=i.scrolling,s=i.scrollOutside?i.scrollbarWidth:0,t=i.margin,u=t[1]+t[3],w=t[0]+t[2],x,y,z,A,B,D,E,F,G;d.add(f).add(h).width("auto").height("auto"),t=f.outerWidth(!0)-f.width(),x=f.outerHeight(!0)-f.height(),y=u+t,z=w+x,A=l(e)?(a.w-y)*m(e)/100:e,B=l(j)?(a.h-z)*m(j)/100:j;if("iframe"===i.type){if(G=i.content,i.autoHeight&&1===G.data("ready"))try{G[0].contentWindow.document.location&&(h.width(A).height(9999),D=G.contents().find("body"),s&&D.css("overflow-x","hidden"),B=D.height())}catch(H){}}else if(i.autoWidth||i.autoHeight)h.addClass("fancybox-tmp"),i.autoWidth||h.width(A),i.autoHeight||h.height(B),i.autoWidth&&(A=h.width()),i.autoHeight&&(B=h.height()),h.removeClass("fancybox-tmp");e=m(A),j=m(B),F=A/B,k=m(l(k)?m(k,"w")-y:k),p=m(l(p)?m(p,"w")-y:p),o=m(l(o)?m(o,"h")-z:o),q=m(l(q)?m(q,"h")-z:q),D=p,E=q,u=a.w-u,w=a.h-w;if(i.aspectRatio){if(e>p&&(e=p,j=e/F),j>q&&(j=q,e=j*F),e<k&&(e=k,j=e/F),j<o)j=o,e=j*F}else e=Math.max(k,Math.min(e,p)),j=Math.max(o,Math.min(j,q));if(i.fitToView)if(p=Math.min(a.w-y,p),q=Math.min(a.h-z,q),h.width(m(e)).height(m(j)),d.width(m(e+t)),a=d.width(),y=d.height(),i.aspectRatio)for(;(a>u||y>w)&&e>k&&j>o&&!(19<b++);)j=Math.max(o,Math.min(q,j-10)),e=j*F,e<k&&(e=k,j=e/F),e>p&&(e=p,j=e/F),h.width(m(e)).height(m(j)),d.width(m(e+t)),a=d.width(),y=d.height();else e=Math.max(k,Math.min(e,e-(a-u))),j=Math.max(o,Math.min(j,j-(y-w)));s&&"auto"===r&&j<B&&e+t+s<u&&(e+=s),h.width(m(e)).height(m(j)),d.width(m(e+t)),a=d.width(),y=d.height(),d=(a>u||y>w)&&e>k&&j>o,e=i.aspectRatio?e<D&&j<E&&e<A&&j<B:(e<D||j<E)&&(e<A||j<B),c.extend(i,{dim:{width:n(a),height:n(y)},origWidth:A,origHeight:B,canShrink:d,canExpand:e,wPadding:t,hPadding:x,wrapSpace:y-f.outerHeight(!0),skinSpace:f.height()-j}),!G&&i.autoHeight&&j>o&&j<q&&!e&&h.height("auto")},_getPosition:function(a){var b=g.current,c=g.getViewport(),d=b.margin,e=g.wrap.width()+d[1]+d[3],f=g.wrap.height()+d[0]+d[2],d={position:"absolute",top:d[0],left:d[3]};return b.autoCenter&&b.fixed&&!a&&f<=c.h&&e<=c.w?d.position="fixed":b.locked||(d.top+=c.y,d.left+=c.x),d.top=n(Math.max(d.top,d.top+(c.h-f)*b.topRatio)),d.left=n(Math.max(d.left,d.left+(c.w-e)*b.leftRatio)),d},_afterZoomIn:function(){var a=g.current;a&&((g.isOpen=g.isOpened=!0,g.wrap.addClass("fancybox-opened").css("overflow","visible"),g.reposition(),(a.closeClick||a.nextClick)&&g.inner.css("cursor","pointer").bind("click.fb",function(b){!c(b.target).is("a")&&!c(b.target).parent().is("a")&&g[a.closeClick?"close":"next"]()}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(g.skin).bind("click.fb",g.close),a.arrows&&1<g.group.length&&((a.loop||0<a.index)&&c(a.tpl.prev).appendTo(g.outer).bind("click.fb",g.prev),(a.loop||a.index<g.group.length-1)&&c(a.tpl.next).appendTo(g.outer).bind("click.fb",g.next)),g.trigger("afterShow"),!a.loop&&a.index===a.group.length-1)?g.play(!1):g.opts.autoPlay&&!g.player.isActive&&(g.opts.autoPlay=!1,g.play()))},_afterZoomOut:function(){var a=g.current;c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),c.extend(g,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),g.trigger("afterClose",a)}}),g.transitions={getOrigPosition:function(){var a=g.current,b=a.element,c=a.orig,d={},e=50,f=50,h=a.hPadding,i=a.wPadding,k=g.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),j(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=k.y+(k.h-f)*a.topRatio,d.left=k.x+(k.w-e)*a.leftRatio),a.locked&&(d.top-=k.y,d.left-=k.x),d={top:n(d.top-h*a.topRatio),left:n(d.left-i*a.leftRatio),width:n(e+i),height:n(f+h)}},step:function(a,b){var c,d,e=b.prop;d=g.current;var f=d.wrapSpace,h=d.skinSpace;if("width"===e||"height"===e)c=b.end===b.start?1:(a-b.start)/(b.end-b.start),g.isClosing&&(c=1-c),d="width"===e?d.wPadding:d.hPadding,d=a-d,g.skin[e](m("width"===e?d:d-f*c)),g.inner[e](m("width"===e?d:d-f*c-h*c))},zoomIn:function(){var a=g.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),g.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:g._afterZoomIn})},zoomOut:function(){var a=g.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),g.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:g._afterZoomOut})},changeIn:function(){var a=g.current,b=a.nextEffect,c=a.pos,d={opacity:1},e=g.direction,f;c.opacity=.1,"elastic"===b&&(f="down"===e||"up"===e?"top":"left","down"===e||"right"===e?(c[f]=n(m(c[f])-200),d[f]="+=200px"):(c[f]=n(m(c[f])+200),d[f]="-=200px")),"none"===b?g._afterZoomIn():g.wrap.css(c).animate(d,{duration:a.nextSpeed,easing:a.nextEasing,complete:g._afterZoomIn})},changeOut:function(){var a=g.previous,b=a.prevEffect,d={opacity:.1},e=g.direction;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"=200px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},g.helpers.overlay={overlay:null,update:function(){var a="100%",d;this.overlay.width(a).height("100%"),c.browser.msie?(d=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),f.width()>d&&(a=f.width())):f.width()>e.width()&&(a=f.width()),this.overlay.width(a).height(f.height())},onReady:function(a,d){c(".fancybox-overlay").stop(!0,!0),this.overlay||c.extend(this,{overlay:c('<div class="fancybox-overlay"></div>').appendTo(d.parent),margin:f.height()>e.height()||"scroll"===c("body").css("overflow-y")?c("body").css("margin-right"):!1,el:b.all&&!b.querySelector?c("html"):c("body")}),d.fixed&&!i&&(this.overlay.addClass("fancybox-overlay-fixed"),d.autoCenter&&(this.overlay.append(d.wrap),d.locked=this.overlay)),!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var d=this.overlay.unbind(".fb").width("auto").height("auto").css(a.css);a.closeClick&&d.bind("click.fb",function(a){c(a.target).hasClass("fancybox-overlay")&&g.close()}),b.fixed&&!i?b.locked&&(this.el.addClass("fancybox-lock"),!1!==this.margin&&c("body").css("margin-right",m(this.margin)+b.scrollbarWidth)):this.update(),d.show()},onUpdate:function(a,b){(!b.fixed||i)&&this.update()},afterClose:function(a){var b=this,a=a.speedOut||0;b.overlay&&!g.isActive&&b.overlay.fadeOut(a||0,function(){c("body").css("margin-right",b.margin),b.el.removeClass("fancybox-lock"),b.overlay.remove(),b.overlay=null})}},g.helpers.title={beforeShow:function(a){var b=g.current.title,d=a.type;if(k(b)&&""!==c.trim(b)){b=c('<div class="fancybox-title fancybox-title-'+d+'-wrap">'+b+"</div>");switch(d){case"inside":d=g.skin;break;case"outside":d=g.wrap;break;case"over":d=g.inner;break;default:d=g.skin,b.appendTo("body").width(b.width()).wrapInner('<span class="child"></span>'),g.current.margin[2]+=Math.abs(m(b.css("margin-bottom")))}"top"===a.position?b.prependTo(d):b.appendTo(d)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",h=function(f){var h=c(this).blur(),i=b,j,k;!f.ctrlKey&&!f.altKey&&!f.shiftKey&&!f.metaKey&&!h.is(".fancybox-wrap")&&(j=a.groupAttr||"data-fancybox-group",k=h.attr(j),k||(j="rel",k=h.get(0)[j]),k&&""!==k&&"nofollow"!==k&&(h=e.length?c(e):d,h=h.filter("["+j+'="'+k+'"]'),i=h.index(this)),a.index=i,!1!==g.open(h,a)&&f.preventDefault())},a=a||{};return b=a.index||0,!e||!1===a.live?d.unbind("click.fb-start").bind("click.fb-start",h):f.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",h),this},f.ready(function(){c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();return a.remove(),b});if(c.support.fixedPosition===d){var a=c.support,b=c('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===b[0].offsetTop||15===b[0].offsetTop;b.remove(),a.fixedPosition=e}c.extend(g.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")})})}(window,document,jQuery),function(a){"use strict";var b=a.fancybox,c=function(b,c,d){return d=d||"",a.type(d)==="object"&&(d=a.param(d,!0)),a.each(c,function(a,c){b=b.replace("$"+a,c||"")}),d.length&&(b+=(b.indexOf("?")>0?"&":"?")+d),b};b.helpers.media={types:{youtube:{matcher:/(youtube\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed)?([\w-]{11}|\?listType=(.*)&list=(.*)).*/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"opaque",enablejsapi:1},type:"iframe",url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,color:"",fullscreen:1},type:"iframe",url:"//player.vimeo.com/video/$1"},metacafe:{matcher:/metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,params:{autoPlay:"yes"},type:"swf",url:function(b,c,d){return d.swf.flashVars="playerVars="+a.param(c,!0),"//www.metacafe.com/fplayer/"+b[1]+"/.swf"}},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"swf",url:"//www.dailymotion.com/swf/video/$1"},twitvid:{matcher:/twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,params:{autoplay:0},type:"iframe",url:"//www.twitvid.com/embed.php?guid=$1"},twitpic:{matcher:/twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,type:"image",url:"//twitpic.com/show/full/$1/"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/"},google_maps:{matcher:/maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,type:"iframe",url:function(a){return"//maps.google."+a[1]+"/"+a[3]+""+a[4]+"&output="+(a[4].indexOf("layer=c")>0?"svembed":"embed")}}},beforeLoad:function(b,d){var e=d.href||"",f=!1,g,h,i,j;for(g in this.types){h=this.types[g],i=e.match(h.matcher);if(i){f=h.type,j=a.extend(!0,{},h.params,d[g]||(a.isPlainObject(b[g])?b[g].params:null)),e=a.type(h.url)==="function"?h.url.call(this,i,j,d):c(h.url,i,j);break}}f&&(d.href=e,d.type=f,d.autoHeight=!1)}}}(jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&d.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),function(a,b,c){function e(a){return a}function f(a){return decodeURIComponent(a.replace(d," "))}var d=/\+/g,g=a.cookie=function(d,h,i){if(h!==c){i=a.extend({},g.defaults,i),h===null&&(i.expires=-1);if(typeof i.expires=="number"){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return h=g.json?JSON.stringify(h):String(h),b.cookie=[encodeURIComponent(d),"=",g.raw?h:encodeURIComponent(h),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}var l=g.raw?e:f,m=b.cookie.split("; ");for(var n=0,o=m.length;n<o;n++){var p=m[n].split("=");if(l(p.shift())===d){var q=l(p.join("="));return g.json?JSON.parse(q):q}}return null};g.defaults={},a.removeCookie=function(b,c){return a.cookie(b)!==null?(a.cookie(b,null,c),!0):!1}}(jQuery,document),function(a,b){"$:nomunge";var c=a.jQuery||a.Cowboy||(a.Cowboy={}),d;c.throttle=d=function(a,d,e,f){function i(){function k(){h=+(new Date),e.apply(c,j)}function l(){g=b}var c=this,i=+(new Date)-h,j=arguments;f&&!g&&k(),g&&clearTimeout(g),f===b&&i>a?k():d!==!0&&(g=setTimeout(f?l:k,f===b?a-i:a))}var g,h=0;return typeof d!="boolean"&&(f=e,e=d,d=b),c.guid&&(i.guid=e.guid=e.guid||c.guid++),i},c.debounce=function(a,c,e){return e===b?d(a,c,!1):d(a,e,c!==!1)}}(this);var RJ=RJ||{SPREADSHEETKEY:"0Ao7re1ITFPKydFhKcGFDT2JpTnphbnNubTUwbThVSEE",setupDataCaching:function(){RJ.fetchDataFromGDocs()&&(dataCache={}),RJ.pendingGDocsRequests=0},fetchDataFromGDocs:function(a){return!0},showDataFromGDocs:function(){return;var a},loadData:function(a,b,c){var d=[],e={},f=new Miso.Dataset({importer:Miso.Importers.GoogleSpreadsheet,parser:Miso.Parsers.GoogleSpreadsheet,key:RJ.SPREADSHEETKEY,worksheet:b});RJ.fetchDataFromGDocs(a)?(RJ.pendingGDocsRequests++,f.fetch({success:function(){this.each(function(a){d.push(a)}),e[a]=d,dataCache[a]=d,RJ.pendingGDocsRequests--,RJ.fetchDataFromGDocs()&&RJ.pendingGDocsRequests==0&&RJ.showDataFromGDocs(),RJ.templatize(a,e,c)},error:function(){d=dataCache[a],e[a]=d,RJ.templatize(a,e,c)}})):(d=dataCache[a],e[a]=d,RJ.templatize(a,e,c))},templatize:function(a,b,c){a==="videos"&&_.each(b.videos,function(a,c){var d=b.videos[c].video_url.split("v=")[1],e=d.indexOf("&");e!==-1&&(d=d.substring(0,e)),b.videos[c].thumbnail="https://i3.ytimg.com/vi/"+d+"/0.jpg"});if(a==="counters"){var d=RJ.normalizeCounterValue(b.counters[0].amount),e=RJ.normalizeCounterValue(b.counters[1].amount);RJ.counter.options.counterStart=d-3,RJ.counter.options.counterEnd=d,RJ.counter.options.counterStart==RJ.counter.options.counterEnd&&(RJ.counter.options.counterStart-=10),$(".counter").jOdometer(RJ.counter.options),$(".donations").html(RJ.commify(e));return}c!==undefined&&(b=RJ.transform(b[a],c));if($("#"+a+"-template").length>0){var f=$("#"+a+"-template").html(),g=Handlebars.compile(f);$("#"+a+"-container").append(g(b))}},transform:function(a,b){var c=[],d=[];return _.each(a,function(a,e){e>0&&e%b===0&&(c.push(d),d=[]),d.push(a)}),d.length>0&&c.push(d),c},commify:function(a){return"$"+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},normalizeCounterValue:function(a){return a=a.toString().replace(/\.(\d+)/),a=a.replace(/\D/,""),parseInt(a)},counter:{options:{increment:1,delayTime:500,counterStart:0,counterEnd:0,numbersImage:"http://rollingjubilee.org/assets/img/jodometer-numbers-24pt.png",widthNumber:32,heightNumber:54,spaceNumbers:0,offsetRight:-10,maxDigits:10,prefixChar:!0}},twitter:{tweet:"You are not a loan. #RollingJubilee #PeoplesBailout @StrikeDebt",getURL:function(a,b){var c="https://twitter.com/home?",b=b!==undefined?b:RJ.twitter.tweet;return a!==undefined?c+"status=."+encodeURIComponent(a+" "+b):c+"status="+encodeURIComponent(b)}},ecard:{chosen_graphic:"one",recipient_name:null,first_name:null,donation_amount:null,get:function(a){a&&$.each($.parseJSON(a),function(a,b){$("#"+a).length>0&&($("#"+a).val(b),RJ.ecard[a]=b),console.log(b),a==="chosen_graphic"&&($(".ecard #options div").removeClass("selected"),$("#"+b).addClass("selected"),RJ.ecard.chosen_graphic=b)})},getPreview:function(){var a=RJ.ecard.chosen_graphic?RJ.ecard.chosen_graphic:"one",b=RJ.ecard.donation_amount?RJ.ecard.donation_amount:"20",c=RJ.ecard.recipient_name?RJ.ecard.recipient_name:"Friend",d=RJ.ecard.first_name?RJ.ecard.first_name:"Your friend";return"http://5pt.net/rj/gifts/generate.php?image_number="+a+"&recipient_name="+c+"&first_name="+d+"&amount="+b}}};$(function(){RJ.setupDataCaching(),RJ.loadData("videos","1",4),RJ.loadData("allies","2"),RJ.loadData("knowledge","3"),RJ.loadData("social-media","4"),RJ.loadData("faq1","5"),RJ.loadData("faq2","6"),RJ.loadData("counters","7"),RJ.ecard.get($.cookie("rollingjubilee")),$(".fancybox-media").fancybox({openEffect:"none",closeEffect:"none",helpers:{media:{}}}),$(document).on("click","nav.main a, a.scroll",function(){var a=$(this).attr("href"),b=$(a).offset().top-20;return $("html,body").animate({scrollTop:b},700),!1}),$(document).on("click",".journalists li",function(){$(this).addClass("selected").siblings().removeClass("selected"),RJ.twitter.target=$(this).find(".username").text(),$(".statuses").slideDown();var a=$(".statuses").offset().top;return $("html,body").animate({scrollTop:a},300),!1}),$(document).on("click",".statuses li",function(){return $(this).addClass("selected").siblings().removeClass("selected"),RJ.twitter.tweet=$(this).find("span").text()+" http://rollingjubilee.org",location.href=RJ.twitter.getURL(RJ.twitter.target,RJ.twitter.tweet),!1}),$(document).on("click",".ecard #options div",function(a){RJ.ecard.chosen_graphic=$(this).attr("id"),$(".ecard #options div").removeClass("selected"),$(this).addClass("selected"),$("#preview").find("img").attr("src",$(this).find("img").attr("src").replace("_thumb","_preview")),a.preventDefault()}),$("#recipient_name, #first_name").on("keyup",$.debounce(250,function(){RJ.ecard[$(this).attr("id")]=$(this).val()})),$(".update-ecard").on("click",function(){RJ.ecard.donation_amount=$("#donation_amount").val(),$.cookie("rollingjubilee",JSON.stringify(RJ.ecard)),location.reload()}),$(document).on("click","#sample-tweets li",function(){location.href=RJ.twitter.getURL(undefined,$(this).find("span").text())})});